<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="Source to the Rust file `/home/travis/build/OsnaCS/plantex/target/debug/build/wayland-client-a4c38b9fe523cc64/out/wayland_client_api.rs`.">
    <meta name="keywords" content="rust, rustlang, rust-lang">

    <title>wayland_client_api.rs.html -- source</title>

    <link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../main.css">
    

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content source"><pre class="line-numbers"><span id="1">   1</span>
<span id="2">   2</span>
<span id="3">   3</span>
<span id="4">   4</span>
<span id="5">   5</span>
<span id="6">   6</span>
<span id="7">   7</span>
<span id="8">   8</span>
<span id="9">   9</span>
<span id="10">  10</span>
<span id="11">  11</span>
<span id="12">  12</span>
<span id="13">  13</span>
<span id="14">  14</span>
<span id="15">  15</span>
<span id="16">  16</span>
<span id="17">  17</span>
<span id="18">  18</span>
<span id="19">  19</span>
<span id="20">  20</span>
<span id="21">  21</span>
<span id="22">  22</span>
<span id="23">  23</span>
<span id="24">  24</span>
<span id="25">  25</span>
<span id="26">  26</span>
<span id="27">  27</span>
<span id="28">  28</span>
<span id="29">  29</span>
<span id="30">  30</span>
<span id="31">  31</span>
<span id="32">  32</span>
<span id="33">  33</span>
<span id="34">  34</span>
<span id="35">  35</span>
<span id="36">  36</span>
<span id="37">  37</span>
<span id="38">  38</span>
<span id="39">  39</span>
<span id="40">  40</span>
<span id="41">  41</span>
<span id="42">  42</span>
<span id="43">  43</span>
<span id="44">  44</span>
<span id="45">  45</span>
<span id="46">  46</span>
<span id="47">  47</span>
<span id="48">  48</span>
<span id="49">  49</span>
<span id="50">  50</span>
<span id="51">  51</span>
<span id="52">  52</span>
<span id="53">  53</span>
<span id="54">  54</span>
<span id="55">  55</span>
<span id="56">  56</span>
<span id="57">  57</span>
<span id="58">  58</span>
<span id="59">  59</span>
<span id="60">  60</span>
<span id="61">  61</span>
<span id="62">  62</span>
<span id="63">  63</span>
<span id="64">  64</span>
<span id="65">  65</span>
<span id="66">  66</span>
<span id="67">  67</span>
<span id="68">  68</span>
<span id="69">  69</span>
<span id="70">  70</span>
<span id="71">  71</span>
<span id="72">  72</span>
<span id="73">  73</span>
<span id="74">  74</span>
<span id="75">  75</span>
<span id="76">  76</span>
<span id="77">  77</span>
<span id="78">  78</span>
<span id="79">  79</span>
<span id="80">  80</span>
<span id="81">  81</span>
<span id="82">  82</span>
<span id="83">  83</span>
<span id="84">  84</span>
<span id="85">  85</span>
<span id="86">  86</span>
<span id="87">  87</span>
<span id="88">  88</span>
<span id="89">  89</span>
<span id="90">  90</span>
<span id="91">  91</span>
<span id="92">  92</span>
<span id="93">  93</span>
<span id="94">  94</span>
<span id="95">  95</span>
<span id="96">  96</span>
<span id="97">  97</span>
<span id="98">  98</span>
<span id="99">  99</span>
<span id="100"> 100</span>
<span id="101"> 101</span>
<span id="102"> 102</span>
<span id="103"> 103</span>
<span id="104"> 104</span>
<span id="105"> 105</span>
<span id="106"> 106</span>
<span id="107"> 107</span>
<span id="108"> 108</span>
<span id="109"> 109</span>
<span id="110"> 110</span>
<span id="111"> 111</span>
<span id="112"> 112</span>
<span id="113"> 113</span>
<span id="114"> 114</span>
<span id="115"> 115</span>
<span id="116"> 116</span>
<span id="117"> 117</span>
<span id="118"> 118</span>
<span id="119"> 119</span>
<span id="120"> 120</span>
<span id="121"> 121</span>
<span id="122"> 122</span>
<span id="123"> 123</span>
<span id="124"> 124</span>
<span id="125"> 125</span>
<span id="126"> 126</span>
<span id="127"> 127</span>
<span id="128"> 128</span>
<span id="129"> 129</span>
<span id="130"> 130</span>
<span id="131"> 131</span>
<span id="132"> 132</span>
<span id="133"> 133</span>
<span id="134"> 134</span>
<span id="135"> 135</span>
<span id="136"> 136</span>
<span id="137"> 137</span>
<span id="138"> 138</span>
<span id="139"> 139</span>
<span id="140"> 140</span>
<span id="141"> 141</span>
<span id="142"> 142</span>
<span id="143"> 143</span>
<span id="144"> 144</span>
<span id="145"> 145</span>
<span id="146"> 146</span>
<span id="147"> 147</span>
<span id="148"> 148</span>
<span id="149"> 149</span>
<span id="150"> 150</span>
<span id="151"> 151</span>
<span id="152"> 152</span>
<span id="153"> 153</span>
<span id="154"> 154</span>
<span id="155"> 155</span>
<span id="156"> 156</span>
<span id="157"> 157</span>
<span id="158"> 158</span>
<span id="159"> 159</span>
<span id="160"> 160</span>
<span id="161"> 161</span>
<span id="162"> 162</span>
<span id="163"> 163</span>
<span id="164"> 164</span>
<span id="165"> 165</span>
<span id="166"> 166</span>
<span id="167"> 167</span>
<span id="168"> 168</span>
<span id="169"> 169</span>
<span id="170"> 170</span>
<span id="171"> 171</span>
<span id="172"> 172</span>
<span id="173"> 173</span>
<span id="174"> 174</span>
<span id="175"> 175</span>
<span id="176"> 176</span>
<span id="177"> 177</span>
<span id="178"> 178</span>
<span id="179"> 179</span>
<span id="180"> 180</span>
<span id="181"> 181</span>
<span id="182"> 182</span>
<span id="183"> 183</span>
<span id="184"> 184</span>
<span id="185"> 185</span>
<span id="186"> 186</span>
<span id="187"> 187</span>
<span id="188"> 188</span>
<span id="189"> 189</span>
<span id="190"> 190</span>
<span id="191"> 191</span>
<span id="192"> 192</span>
<span id="193"> 193</span>
<span id="194"> 194</span>
<span id="195"> 195</span>
<span id="196"> 196</span>
<span id="197"> 197</span>
<span id="198"> 198</span>
<span id="199"> 199</span>
<span id="200"> 200</span>
<span id="201"> 201</span>
<span id="202"> 202</span>
<span id="203"> 203</span>
<span id="204"> 204</span>
<span id="205"> 205</span>
<span id="206"> 206</span>
<span id="207"> 207</span>
<span id="208"> 208</span>
<span id="209"> 209</span>
<span id="210"> 210</span>
<span id="211"> 211</span>
<span id="212"> 212</span>
<span id="213"> 213</span>
<span id="214"> 214</span>
<span id="215"> 215</span>
<span id="216"> 216</span>
<span id="217"> 217</span>
<span id="218"> 218</span>
<span id="219"> 219</span>
<span id="220"> 220</span>
<span id="221"> 221</span>
<span id="222"> 222</span>
<span id="223"> 223</span>
<span id="224"> 224</span>
<span id="225"> 225</span>
<span id="226"> 226</span>
<span id="227"> 227</span>
<span id="228"> 228</span>
<span id="229"> 229</span>
<span id="230"> 230</span>
<span id="231"> 231</span>
<span id="232"> 232</span>
<span id="233"> 233</span>
<span id="234"> 234</span>
<span id="235"> 235</span>
<span id="236"> 236</span>
<span id="237"> 237</span>
<span id="238"> 238</span>
<span id="239"> 239</span>
<span id="240"> 240</span>
<span id="241"> 241</span>
<span id="242"> 242</span>
<span id="243"> 243</span>
<span id="244"> 244</span>
<span id="245"> 245</span>
<span id="246"> 246</span>
<span id="247"> 247</span>
<span id="248"> 248</span>
<span id="249"> 249</span>
<span id="250"> 250</span>
<span id="251"> 251</span>
<span id="252"> 252</span>
<span id="253"> 253</span>
<span id="254"> 254</span>
<span id="255"> 255</span>
<span id="256"> 256</span>
<span id="257"> 257</span>
<span id="258"> 258</span>
<span id="259"> 259</span>
<span id="260"> 260</span>
<span id="261"> 261</span>
<span id="262"> 262</span>
<span id="263"> 263</span>
<span id="264"> 264</span>
<span id="265"> 265</span>
<span id="266"> 266</span>
<span id="267"> 267</span>
<span id="268"> 268</span>
<span id="269"> 269</span>
<span id="270"> 270</span>
<span id="271"> 271</span>
<span id="272"> 272</span>
<span id="273"> 273</span>
<span id="274"> 274</span>
<span id="275"> 275</span>
<span id="276"> 276</span>
<span id="277"> 277</span>
<span id="278"> 278</span>
<span id="279"> 279</span>
<span id="280"> 280</span>
<span id="281"> 281</span>
<span id="282"> 282</span>
<span id="283"> 283</span>
<span id="284"> 284</span>
<span id="285"> 285</span>
<span id="286"> 286</span>
<span id="287"> 287</span>
<span id="288"> 288</span>
<span id="289"> 289</span>
<span id="290"> 290</span>
<span id="291"> 291</span>
<span id="292"> 292</span>
<span id="293"> 293</span>
<span id="294"> 294</span>
<span id="295"> 295</span>
<span id="296"> 296</span>
<span id="297"> 297</span>
<span id="298"> 298</span>
<span id="299"> 299</span>
<span id="300"> 300</span>
<span id="301"> 301</span>
<span id="302"> 302</span>
<span id="303"> 303</span>
<span id="304"> 304</span>
<span id="305"> 305</span>
<span id="306"> 306</span>
<span id="307"> 307</span>
<span id="308"> 308</span>
<span id="309"> 309</span>
<span id="310"> 310</span>
<span id="311"> 311</span>
<span id="312"> 312</span>
<span id="313"> 313</span>
<span id="314"> 314</span>
<span id="315"> 315</span>
<span id="316"> 316</span>
<span id="317"> 317</span>
<span id="318"> 318</span>
<span id="319"> 319</span>
<span id="320"> 320</span>
<span id="321"> 321</span>
<span id="322"> 322</span>
<span id="323"> 323</span>
<span id="324"> 324</span>
<span id="325"> 325</span>
<span id="326"> 326</span>
<span id="327"> 327</span>
<span id="328"> 328</span>
<span id="329"> 329</span>
<span id="330"> 330</span>
<span id="331"> 331</span>
<span id="332"> 332</span>
<span id="333"> 333</span>
<span id="334"> 334</span>
<span id="335"> 335</span>
<span id="336"> 336</span>
<span id="337"> 337</span>
<span id="338"> 338</span>
<span id="339"> 339</span>
<span id="340"> 340</span>
<span id="341"> 341</span>
<span id="342"> 342</span>
<span id="343"> 343</span>
<span id="344"> 344</span>
<span id="345"> 345</span>
<span id="346"> 346</span>
<span id="347"> 347</span>
<span id="348"> 348</span>
<span id="349"> 349</span>
<span id="350"> 350</span>
<span id="351"> 351</span>
<span id="352"> 352</span>
<span id="353"> 353</span>
<span id="354"> 354</span>
<span id="355"> 355</span>
<span id="356"> 356</span>
<span id="357"> 357</span>
<span id="358"> 358</span>
<span id="359"> 359</span>
<span id="360"> 360</span>
<span id="361"> 361</span>
<span id="362"> 362</span>
<span id="363"> 363</span>
<span id="364"> 364</span>
<span id="365"> 365</span>
<span id="366"> 366</span>
<span id="367"> 367</span>
<span id="368"> 368</span>
<span id="369"> 369</span>
<span id="370"> 370</span>
<span id="371"> 371</span>
<span id="372"> 372</span>
<span id="373"> 373</span>
<span id="374"> 374</span>
<span id="375"> 375</span>
<span id="376"> 376</span>
<span id="377"> 377</span>
<span id="378"> 378</span>
<span id="379"> 379</span>
<span id="380"> 380</span>
<span id="381"> 381</span>
<span id="382"> 382</span>
<span id="383"> 383</span>
<span id="384"> 384</span>
<span id="385"> 385</span>
<span id="386"> 386</span>
<span id="387"> 387</span>
<span id="388"> 388</span>
<span id="389"> 389</span>
<span id="390"> 390</span>
<span id="391"> 391</span>
<span id="392"> 392</span>
<span id="393"> 393</span>
<span id="394"> 394</span>
<span id="395"> 395</span>
<span id="396"> 396</span>
<span id="397"> 397</span>
<span id="398"> 398</span>
<span id="399"> 399</span>
<span id="400"> 400</span>
<span id="401"> 401</span>
<span id="402"> 402</span>
<span id="403"> 403</span>
<span id="404"> 404</span>
<span id="405"> 405</span>
<span id="406"> 406</span>
<span id="407"> 407</span>
<span id="408"> 408</span>
<span id="409"> 409</span>
<span id="410"> 410</span>
<span id="411"> 411</span>
<span id="412"> 412</span>
<span id="413"> 413</span>
<span id="414"> 414</span>
<span id="415"> 415</span>
<span id="416"> 416</span>
<span id="417"> 417</span>
<span id="418"> 418</span>
<span id="419"> 419</span>
<span id="420"> 420</span>
<span id="421"> 421</span>
<span id="422"> 422</span>
<span id="423"> 423</span>
<span id="424"> 424</span>
<span id="425"> 425</span>
<span id="426"> 426</span>
<span id="427"> 427</span>
<span id="428"> 428</span>
<span id="429"> 429</span>
<span id="430"> 430</span>
<span id="431"> 431</span>
<span id="432"> 432</span>
<span id="433"> 433</span>
<span id="434"> 434</span>
<span id="435"> 435</span>
<span id="436"> 436</span>
<span id="437"> 437</span>
<span id="438"> 438</span>
<span id="439"> 439</span>
<span id="440"> 440</span>
<span id="441"> 441</span>
<span id="442"> 442</span>
<span id="443"> 443</span>
<span id="444"> 444</span>
<span id="445"> 445</span>
<span id="446"> 446</span>
<span id="447"> 447</span>
<span id="448"> 448</span>
<span id="449"> 449</span>
<span id="450"> 450</span>
<span id="451"> 451</span>
<span id="452"> 452</span>
<span id="453"> 453</span>
<span id="454"> 454</span>
<span id="455"> 455</span>
<span id="456"> 456</span>
<span id="457"> 457</span>
<span id="458"> 458</span>
<span id="459"> 459</span>
<span id="460"> 460</span>
<span id="461"> 461</span>
<span id="462"> 462</span>
<span id="463"> 463</span>
<span id="464"> 464</span>
<span id="465"> 465</span>
<span id="466"> 466</span>
<span id="467"> 467</span>
<span id="468"> 468</span>
<span id="469"> 469</span>
<span id="470"> 470</span>
<span id="471"> 471</span>
<span id="472"> 472</span>
<span id="473"> 473</span>
<span id="474"> 474</span>
<span id="475"> 475</span>
<span id="476"> 476</span>
<span id="477"> 477</span>
<span id="478"> 478</span>
<span id="479"> 479</span>
<span id="480"> 480</span>
<span id="481"> 481</span>
<span id="482"> 482</span>
<span id="483"> 483</span>
<span id="484"> 484</span>
<span id="485"> 485</span>
<span id="486"> 486</span>
<span id="487"> 487</span>
<span id="488"> 488</span>
<span id="489"> 489</span>
<span id="490"> 490</span>
<span id="491"> 491</span>
<span id="492"> 492</span>
<span id="493"> 493</span>
<span id="494"> 494</span>
<span id="495"> 495</span>
<span id="496"> 496</span>
<span id="497"> 497</span>
<span id="498"> 498</span>
<span id="499"> 499</span>
<span id="500"> 500</span>
<span id="501"> 501</span>
<span id="502"> 502</span>
<span id="503"> 503</span>
<span id="504"> 504</span>
<span id="505"> 505</span>
<span id="506"> 506</span>
<span id="507"> 507</span>
<span id="508"> 508</span>
<span id="509"> 509</span>
<span id="510"> 510</span>
<span id="511"> 511</span>
<span id="512"> 512</span>
<span id="513"> 513</span>
<span id="514"> 514</span>
<span id="515"> 515</span>
<span id="516"> 516</span>
<span id="517"> 517</span>
<span id="518"> 518</span>
<span id="519"> 519</span>
<span id="520"> 520</span>
<span id="521"> 521</span>
<span id="522"> 522</span>
<span id="523"> 523</span>
<span id="524"> 524</span>
<span id="525"> 525</span>
<span id="526"> 526</span>
<span id="527"> 527</span>
<span id="528"> 528</span>
<span id="529"> 529</span>
<span id="530"> 530</span>
<span id="531"> 531</span>
<span id="532"> 532</span>
<span id="533"> 533</span>
<span id="534"> 534</span>
<span id="535"> 535</span>
<span id="536"> 536</span>
<span id="537"> 537</span>
<span id="538"> 538</span>
<span id="539"> 539</span>
<span id="540"> 540</span>
<span id="541"> 541</span>
<span id="542"> 542</span>
<span id="543"> 543</span>
<span id="544"> 544</span>
<span id="545"> 545</span>
<span id="546"> 546</span>
<span id="547"> 547</span>
<span id="548"> 548</span>
<span id="549"> 549</span>
<span id="550"> 550</span>
<span id="551"> 551</span>
<span id="552"> 552</span>
<span id="553"> 553</span>
<span id="554"> 554</span>
<span id="555"> 555</span>
<span id="556"> 556</span>
<span id="557"> 557</span>
<span id="558"> 558</span>
<span id="559"> 559</span>
<span id="560"> 560</span>
<span id="561"> 561</span>
<span id="562"> 562</span>
<span id="563"> 563</span>
<span id="564"> 564</span>
<span id="565"> 565</span>
<span id="566"> 566</span>
<span id="567"> 567</span>
<span id="568"> 568</span>
<span id="569"> 569</span>
<span id="570"> 570</span>
<span id="571"> 571</span>
<span id="572"> 572</span>
<span id="573"> 573</span>
<span id="574"> 574</span>
<span id="575"> 575</span>
<span id="576"> 576</span>
<span id="577"> 577</span>
<span id="578"> 578</span>
<span id="579"> 579</span>
<span id="580"> 580</span>
<span id="581"> 581</span>
<span id="582"> 582</span>
<span id="583"> 583</span>
<span id="584"> 584</span>
<span id="585"> 585</span>
<span id="586"> 586</span>
<span id="587"> 587</span>
<span id="588"> 588</span>
<span id="589"> 589</span>
<span id="590"> 590</span>
<span id="591"> 591</span>
<span id="592"> 592</span>
<span id="593"> 593</span>
<span id="594"> 594</span>
<span id="595"> 595</span>
<span id="596"> 596</span>
<span id="597"> 597</span>
<span id="598"> 598</span>
<span id="599"> 599</span>
<span id="600"> 600</span>
<span id="601"> 601</span>
<span id="602"> 602</span>
<span id="603"> 603</span>
<span id="604"> 604</span>
<span id="605"> 605</span>
<span id="606"> 606</span>
<span id="607"> 607</span>
<span id="608"> 608</span>
<span id="609"> 609</span>
<span id="610"> 610</span>
<span id="611"> 611</span>
<span id="612"> 612</span>
<span id="613"> 613</span>
<span id="614"> 614</span>
<span id="615"> 615</span>
<span id="616"> 616</span>
<span id="617"> 617</span>
<span id="618"> 618</span>
<span id="619"> 619</span>
<span id="620"> 620</span>
<span id="621"> 621</span>
<span id="622"> 622</span>
<span id="623"> 623</span>
<span id="624"> 624</span>
<span id="625"> 625</span>
<span id="626"> 626</span>
<span id="627"> 627</span>
<span id="628"> 628</span>
<span id="629"> 629</span>
<span id="630"> 630</span>
<span id="631"> 631</span>
<span id="632"> 632</span>
<span id="633"> 633</span>
<span id="634"> 634</span>
<span id="635"> 635</span>
<span id="636"> 636</span>
<span id="637"> 637</span>
<span id="638"> 638</span>
<span id="639"> 639</span>
<span id="640"> 640</span>
<span id="641"> 641</span>
<span id="642"> 642</span>
<span id="643"> 643</span>
<span id="644"> 644</span>
<span id="645"> 645</span>
<span id="646"> 646</span>
<span id="647"> 647</span>
<span id="648"> 648</span>
<span id="649"> 649</span>
<span id="650"> 650</span>
<span id="651"> 651</span>
<span id="652"> 652</span>
<span id="653"> 653</span>
<span id="654"> 654</span>
<span id="655"> 655</span>
<span id="656"> 656</span>
<span id="657"> 657</span>
<span id="658"> 658</span>
<span id="659"> 659</span>
<span id="660"> 660</span>
<span id="661"> 661</span>
<span id="662"> 662</span>
<span id="663"> 663</span>
<span id="664"> 664</span>
<span id="665"> 665</span>
<span id="666"> 666</span>
<span id="667"> 667</span>
<span id="668"> 668</span>
<span id="669"> 669</span>
<span id="670"> 670</span>
<span id="671"> 671</span>
<span id="672"> 672</span>
<span id="673"> 673</span>
<span id="674"> 674</span>
<span id="675"> 675</span>
<span id="676"> 676</span>
<span id="677"> 677</span>
<span id="678"> 678</span>
<span id="679"> 679</span>
<span id="680"> 680</span>
<span id="681"> 681</span>
<span id="682"> 682</span>
<span id="683"> 683</span>
<span id="684"> 684</span>
<span id="685"> 685</span>
<span id="686"> 686</span>
<span id="687"> 687</span>
<span id="688"> 688</span>
<span id="689"> 689</span>
<span id="690"> 690</span>
<span id="691"> 691</span>
<span id="692"> 692</span>
<span id="693"> 693</span>
<span id="694"> 694</span>
<span id="695"> 695</span>
<span id="696"> 696</span>
<span id="697"> 697</span>
<span id="698"> 698</span>
<span id="699"> 699</span>
<span id="700"> 700</span>
<span id="701"> 701</span>
<span id="702"> 702</span>
<span id="703"> 703</span>
<span id="704"> 704</span>
<span id="705"> 705</span>
<span id="706"> 706</span>
<span id="707"> 707</span>
<span id="708"> 708</span>
<span id="709"> 709</span>
<span id="710"> 710</span>
<span id="711"> 711</span>
<span id="712"> 712</span>
<span id="713"> 713</span>
<span id="714"> 714</span>
<span id="715"> 715</span>
<span id="716"> 716</span>
<span id="717"> 717</span>
<span id="718"> 718</span>
<span id="719"> 719</span>
<span id="720"> 720</span>
<span id="721"> 721</span>
<span id="722"> 722</span>
<span id="723"> 723</span>
<span id="724"> 724</span>
<span id="725"> 725</span>
<span id="726"> 726</span>
<span id="727"> 727</span>
<span id="728"> 728</span>
<span id="729"> 729</span>
<span id="730"> 730</span>
<span id="731"> 731</span>
<span id="732"> 732</span>
<span id="733"> 733</span>
<span id="734"> 734</span>
<span id="735"> 735</span>
<span id="736"> 736</span>
<span id="737"> 737</span>
<span id="738"> 738</span>
<span id="739"> 739</span>
<span id="740"> 740</span>
<span id="741"> 741</span>
<span id="742"> 742</span>
<span id="743"> 743</span>
<span id="744"> 744</span>
<span id="745"> 745</span>
<span id="746"> 746</span>
<span id="747"> 747</span>
<span id="748"> 748</span>
<span id="749"> 749</span>
<span id="750"> 750</span>
<span id="751"> 751</span>
<span id="752"> 752</span>
<span id="753"> 753</span>
<span id="754"> 754</span>
<span id="755"> 755</span>
<span id="756"> 756</span>
<span id="757"> 757</span>
<span id="758"> 758</span>
<span id="759"> 759</span>
<span id="760"> 760</span>
<span id="761"> 761</span>
<span id="762"> 762</span>
<span id="763"> 763</span>
<span id="764"> 764</span>
<span id="765"> 765</span>
<span id="766"> 766</span>
<span id="767"> 767</span>
<span id="768"> 768</span>
<span id="769"> 769</span>
<span id="770"> 770</span>
<span id="771"> 771</span>
<span id="772"> 772</span>
<span id="773"> 773</span>
<span id="774"> 774</span>
<span id="775"> 775</span>
<span id="776"> 776</span>
<span id="777"> 777</span>
<span id="778"> 778</span>
<span id="779"> 779</span>
<span id="780"> 780</span>
<span id="781"> 781</span>
<span id="782"> 782</span>
<span id="783"> 783</span>
<span id="784"> 784</span>
<span id="785"> 785</span>
<span id="786"> 786</span>
<span id="787"> 787</span>
<span id="788"> 788</span>
<span id="789"> 789</span>
<span id="790"> 790</span>
<span id="791"> 791</span>
<span id="792"> 792</span>
<span id="793"> 793</span>
<span id="794"> 794</span>
<span id="795"> 795</span>
<span id="796"> 796</span>
<span id="797"> 797</span>
<span id="798"> 798</span>
<span id="799"> 799</span>
<span id="800"> 800</span>
<span id="801"> 801</span>
<span id="802"> 802</span>
<span id="803"> 803</span>
<span id="804"> 804</span>
<span id="805"> 805</span>
<span id="806"> 806</span>
<span id="807"> 807</span>
<span id="808"> 808</span>
<span id="809"> 809</span>
<span id="810"> 810</span>
<span id="811"> 811</span>
<span id="812"> 812</span>
<span id="813"> 813</span>
<span id="814"> 814</span>
<span id="815"> 815</span>
<span id="816"> 816</span>
<span id="817"> 817</span>
<span id="818"> 818</span>
<span id="819"> 819</span>
<span id="820"> 820</span>
<span id="821"> 821</span>
<span id="822"> 822</span>
<span id="823"> 823</span>
<span id="824"> 824</span>
<span id="825"> 825</span>
<span id="826"> 826</span>
<span id="827"> 827</span>
<span id="828"> 828</span>
<span id="829"> 829</span>
<span id="830"> 830</span>
<span id="831"> 831</span>
<span id="832"> 832</span>
<span id="833"> 833</span>
<span id="834"> 834</span>
<span id="835"> 835</span>
<span id="836"> 836</span>
<span id="837"> 837</span>
<span id="838"> 838</span>
<span id="839"> 839</span>
<span id="840"> 840</span>
<span id="841"> 841</span>
<span id="842"> 842</span>
<span id="843"> 843</span>
<span id="844"> 844</span>
<span id="845"> 845</span>
<span id="846"> 846</span>
<span id="847"> 847</span>
<span id="848"> 848</span>
<span id="849"> 849</span>
<span id="850"> 850</span>
<span id="851"> 851</span>
<span id="852"> 852</span>
<span id="853"> 853</span>
<span id="854"> 854</span>
<span id="855"> 855</span>
<span id="856"> 856</span>
<span id="857"> 857</span>
<span id="858"> 858</span>
<span id="859"> 859</span>
<span id="860"> 860</span>
<span id="861"> 861</span>
<span id="862"> 862</span>
<span id="863"> 863</span>
<span id="864"> 864</span>
<span id="865"> 865</span>
<span id="866"> 866</span>
<span id="867"> 867</span>
<span id="868"> 868</span>
<span id="869"> 869</span>
<span id="870"> 870</span>
<span id="871"> 871</span>
<span id="872"> 872</span>
<span id="873"> 873</span>
<span id="874"> 874</span>
<span id="875"> 875</span>
<span id="876"> 876</span>
<span id="877"> 877</span>
<span id="878"> 878</span>
<span id="879"> 879</span>
<span id="880"> 880</span>
<span id="881"> 881</span>
<span id="882"> 882</span>
<span id="883"> 883</span>
<span id="884"> 884</span>
<span id="885"> 885</span>
<span id="886"> 886</span>
<span id="887"> 887</span>
<span id="888"> 888</span>
<span id="889"> 889</span>
<span id="890"> 890</span>
<span id="891"> 891</span>
<span id="892"> 892</span>
<span id="893"> 893</span>
<span id="894"> 894</span>
<span id="895"> 895</span>
<span id="896"> 896</span>
<span id="897"> 897</span>
<span id="898"> 898</span>
<span id="899"> 899</span>
<span id="900"> 900</span>
<span id="901"> 901</span>
<span id="902"> 902</span>
<span id="903"> 903</span>
<span id="904"> 904</span>
<span id="905"> 905</span>
<span id="906"> 906</span>
<span id="907"> 907</span>
<span id="908"> 908</span>
<span id="909"> 909</span>
<span id="910"> 910</span>
<span id="911"> 911</span>
<span id="912"> 912</span>
<span id="913"> 913</span>
<span id="914"> 914</span>
<span id="915"> 915</span>
<span id="916"> 916</span>
<span id="917"> 917</span>
<span id="918"> 918</span>
<span id="919"> 919</span>
<span id="920"> 920</span>
<span id="921"> 921</span>
<span id="922"> 922</span>
<span id="923"> 923</span>
<span id="924"> 924</span>
<span id="925"> 925</span>
<span id="926"> 926</span>
<span id="927"> 927</span>
<span id="928"> 928</span>
<span id="929"> 929</span>
<span id="930"> 930</span>
<span id="931"> 931</span>
<span id="932"> 932</span>
<span id="933"> 933</span>
<span id="934"> 934</span>
<span id="935"> 935</span>
<span id="936"> 936</span>
<span id="937"> 937</span>
<span id="938"> 938</span>
<span id="939"> 939</span>
<span id="940"> 940</span>
<span id="941"> 941</span>
<span id="942"> 942</span>
<span id="943"> 943</span>
<span id="944"> 944</span>
<span id="945"> 945</span>
<span id="946"> 946</span>
<span id="947"> 947</span>
<span id="948"> 948</span>
<span id="949"> 949</span>
<span id="950"> 950</span>
<span id="951"> 951</span>
<span id="952"> 952</span>
<span id="953"> 953</span>
<span id="954"> 954</span>
<span id="955"> 955</span>
<span id="956"> 956</span>
<span id="957"> 957</span>
<span id="958"> 958</span>
<span id="959"> 959</span>
<span id="960"> 960</span>
<span id="961"> 961</span>
<span id="962"> 962</span>
<span id="963"> 963</span>
<span id="964"> 964</span>
<span id="965"> 965</span>
<span id="966"> 966</span>
<span id="967"> 967</span>
<span id="968"> 968</span>
<span id="969"> 969</span>
<span id="970"> 970</span>
<span id="971"> 971</span>
<span id="972"> 972</span>
<span id="973"> 973</span>
<span id="974"> 974</span>
<span id="975"> 975</span>
<span id="976"> 976</span>
<span id="977"> 977</span>
<span id="978"> 978</span>
<span id="979"> 979</span>
<span id="980"> 980</span>
<span id="981"> 981</span>
<span id="982"> 982</span>
<span id="983"> 983</span>
<span id="984"> 984</span>
<span id="985"> 985</span>
<span id="986"> 986</span>
<span id="987"> 987</span>
<span id="988"> 988</span>
<span id="989"> 989</span>
<span id="990"> 990</span>
<span id="991"> 991</span>
<span id="992"> 992</span>
<span id="993"> 993</span>
<span id="994"> 994</span>
<span id="995"> 995</span>
<span id="996"> 996</span>
<span id="997"> 997</span>
<span id="998"> 998</span>
<span id="999"> 999</span>
<span id="1000">1000</span>
<span id="1001">1001</span>
<span id="1002">1002</span>
<span id="1003">1003</span>
<span id="1004">1004</span>
<span id="1005">1005</span>
<span id="1006">1006</span>
<span id="1007">1007</span>
<span id="1008">1008</span>
<span id="1009">1009</span>
<span id="1010">1010</span>
<span id="1011">1011</span>
<span id="1012">1012</span>
<span id="1013">1013</span>
<span id="1014">1014</span>
<span id="1015">1015</span>
<span id="1016">1016</span>
<span id="1017">1017</span>
<span id="1018">1018</span>
<span id="1019">1019</span>
<span id="1020">1020</span>
<span id="1021">1021</span>
<span id="1022">1022</span>
<span id="1023">1023</span>
<span id="1024">1024</span>
<span id="1025">1025</span>
<span id="1026">1026</span>
<span id="1027">1027</span>
<span id="1028">1028</span>
<span id="1029">1029</span>
<span id="1030">1030</span>
<span id="1031">1031</span>
<span id="1032">1032</span>
<span id="1033">1033</span>
<span id="1034">1034</span>
<span id="1035">1035</span>
<span id="1036">1036</span>
<span id="1037">1037</span>
<span id="1038">1038</span>
<span id="1039">1039</span>
<span id="1040">1040</span>
<span id="1041">1041</span>
<span id="1042">1042</span>
<span id="1043">1043</span>
<span id="1044">1044</span>
<span id="1045">1045</span>
<span id="1046">1046</span>
<span id="1047">1047</span>
<span id="1048">1048</span>
<span id="1049">1049</span>
<span id="1050">1050</span>
<span id="1051">1051</span>
<span id="1052">1052</span>
<span id="1053">1053</span>
<span id="1054">1054</span>
<span id="1055">1055</span>
<span id="1056">1056</span>
<span id="1057">1057</span>
<span id="1058">1058</span>
<span id="1059">1059</span>
<span id="1060">1060</span>
<span id="1061">1061</span>
<span id="1062">1062</span>
<span id="1063">1063</span>
<span id="1064">1064</span>
<span id="1065">1065</span>
<span id="1066">1066</span>
<span id="1067">1067</span>
<span id="1068">1068</span>
<span id="1069">1069</span>
<span id="1070">1070</span>
<span id="1071">1071</span>
<span id="1072">1072</span>
<span id="1073">1073</span>
<span id="1074">1074</span>
<span id="1075">1075</span>
<span id="1076">1076</span>
<span id="1077">1077</span>
<span id="1078">1078</span>
<span id="1079">1079</span>
<span id="1080">1080</span>
<span id="1081">1081</span>
<span id="1082">1082</span>
<span id="1083">1083</span>
<span id="1084">1084</span>
<span id="1085">1085</span>
<span id="1086">1086</span>
<span id="1087">1087</span>
<span id="1088">1088</span>
<span id="1089">1089</span>
<span id="1090">1090</span>
<span id="1091">1091</span>
<span id="1092">1092</span>
<span id="1093">1093</span>
<span id="1094">1094</span>
<span id="1095">1095</span>
<span id="1096">1096</span>
<span id="1097">1097</span>
<span id="1098">1098</span>
<span id="1099">1099</span>
<span id="1100">1100</span>
<span id="1101">1101</span>
<span id="1102">1102</span>
<span id="1103">1103</span>
<span id="1104">1104</span>
<span id="1105">1105</span>
<span id="1106">1106</span>
<span id="1107">1107</span>
<span id="1108">1108</span>
<span id="1109">1109</span>
<span id="1110">1110</span>
<span id="1111">1111</span>
<span id="1112">1112</span>
<span id="1113">1113</span>
<span id="1114">1114</span>
<span id="1115">1115</span>
<span id="1116">1116</span>
<span id="1117">1117</span>
<span id="1118">1118</span>
<span id="1119">1119</span>
<span id="1120">1120</span>
<span id="1121">1121</span>
<span id="1122">1122</span>
<span id="1123">1123</span>
<span id="1124">1124</span>
<span id="1125">1125</span>
<span id="1126">1126</span>
<span id="1127">1127</span>
<span id="1128">1128</span>
<span id="1129">1129</span>
<span id="1130">1130</span>
<span id="1131">1131</span>
<span id="1132">1132</span>
<span id="1133">1133</span>
<span id="1134">1134</span>
<span id="1135">1135</span>
<span id="1136">1136</span>
<span id="1137">1137</span>
<span id="1138">1138</span>
<span id="1139">1139</span>
<span id="1140">1140</span>
<span id="1141">1141</span>
<span id="1142">1142</span>
<span id="1143">1143</span>
<span id="1144">1144</span>
<span id="1145">1145</span>
<span id="1146">1146</span>
<span id="1147">1147</span>
<span id="1148">1148</span>
<span id="1149">1149</span>
<span id="1150">1150</span>
<span id="1151">1151</span>
<span id="1152">1152</span>
<span id="1153">1153</span>
<span id="1154">1154</span>
<span id="1155">1155</span>
<span id="1156">1156</span>
<span id="1157">1157</span>
<span id="1158">1158</span>
<span id="1159">1159</span>
<span id="1160">1160</span>
<span id="1161">1161</span>
<span id="1162">1162</span>
<span id="1163">1163</span>
<span id="1164">1164</span>
<span id="1165">1165</span>
<span id="1166">1166</span>
<span id="1167">1167</span>
<span id="1168">1168</span>
<span id="1169">1169</span>
<span id="1170">1170</span>
<span id="1171">1171</span>
<span id="1172">1172</span>
<span id="1173">1173</span>
<span id="1174">1174</span>
<span id="1175">1175</span>
<span id="1176">1176</span>
<span id="1177">1177</span>
<span id="1178">1178</span>
<span id="1179">1179</span>
<span id="1180">1180</span>
<span id="1181">1181</span>
<span id="1182">1182</span>
<span id="1183">1183</span>
<span id="1184">1184</span>
<span id="1185">1185</span>
<span id="1186">1186</span>
<span id="1187">1187</span>
<span id="1188">1188</span>
<span id="1189">1189</span>
<span id="1190">1190</span>
<span id="1191">1191</span>
<span id="1192">1192</span>
<span id="1193">1193</span>
<span id="1194">1194</span>
<span id="1195">1195</span>
<span id="1196">1196</span>
<span id="1197">1197</span>
<span id="1198">1198</span>
<span id="1199">1199</span>
<span id="1200">1200</span>
<span id="1201">1201</span>
<span id="1202">1202</span>
<span id="1203">1203</span>
<span id="1204">1204</span>
<span id="1205">1205</span>
<span id="1206">1206</span>
<span id="1207">1207</span>
<span id="1208">1208</span>
<span id="1209">1209</span>
<span id="1210">1210</span>
<span id="1211">1211</span>
<span id="1212">1212</span>
<span id="1213">1213</span>
<span id="1214">1214</span>
<span id="1215">1215</span>
<span id="1216">1216</span>
<span id="1217">1217</span>
<span id="1218">1218</span>
<span id="1219">1219</span>
<span id="1220">1220</span>
<span id="1221">1221</span>
<span id="1222">1222</span>
<span id="1223">1223</span>
<span id="1224">1224</span>
<span id="1225">1225</span>
<span id="1226">1226</span>
<span id="1227">1227</span>
<span id="1228">1228</span>
<span id="1229">1229</span>
<span id="1230">1230</span>
<span id="1231">1231</span>
<span id="1232">1232</span>
<span id="1233">1233</span>
<span id="1234">1234</span>
<span id="1235">1235</span>
<span id="1236">1236</span>
<span id="1237">1237</span>
<span id="1238">1238</span>
<span id="1239">1239</span>
<span id="1240">1240</span>
<span id="1241">1241</span>
<span id="1242">1242</span>
<span id="1243">1243</span>
<span id="1244">1244</span>
<span id="1245">1245</span>
<span id="1246">1246</span>
<span id="1247">1247</span>
<span id="1248">1248</span>
<span id="1249">1249</span>
<span id="1250">1250</span>
<span id="1251">1251</span>
<span id="1252">1252</span>
<span id="1253">1253</span>
<span id="1254">1254</span>
<span id="1255">1255</span>
<span id="1256">1256</span>
<span id="1257">1257</span>
<span id="1258">1258</span>
<span id="1259">1259</span>
<span id="1260">1260</span>
<span id="1261">1261</span>
<span id="1262">1262</span>
<span id="1263">1263</span>
<span id="1264">1264</span>
<span id="1265">1265</span>
<span id="1266">1266</span>
<span id="1267">1267</span>
<span id="1268">1268</span>
<span id="1269">1269</span>
<span id="1270">1270</span>
<span id="1271">1271</span>
<span id="1272">1272</span>
<span id="1273">1273</span>
<span id="1274">1274</span>
<span id="1275">1275</span>
<span id="1276">1276</span>
<span id="1277">1277</span>
<span id="1278">1278</span>
<span id="1279">1279</span>
<span id="1280">1280</span>
<span id="1281">1281</span>
<span id="1282">1282</span>
<span id="1283">1283</span>
<span id="1284">1284</span>
<span id="1285">1285</span>
<span id="1286">1286</span>
<span id="1287">1287</span>
<span id="1288">1288</span>
<span id="1289">1289</span>
<span id="1290">1290</span>
<span id="1291">1291</span>
<span id="1292">1292</span>
<span id="1293">1293</span>
<span id="1294">1294</span>
<span id="1295">1295</span>
<span id="1296">1296</span>
<span id="1297">1297</span>
<span id="1298">1298</span>
<span id="1299">1299</span>
<span id="1300">1300</span>
<span id="1301">1301</span>
<span id="1302">1302</span>
<span id="1303">1303</span>
<span id="1304">1304</span>
<span id="1305">1305</span>
<span id="1306">1306</span>
<span id="1307">1307</span>
<span id="1308">1308</span>
<span id="1309">1309</span>
<span id="1310">1310</span>
<span id="1311">1311</span>
<span id="1312">1312</span>
<span id="1313">1313</span>
<span id="1314">1314</span>
<span id="1315">1315</span>
<span id="1316">1316</span>
<span id="1317">1317</span>
<span id="1318">1318</span>
<span id="1319">1319</span>
<span id="1320">1320</span>
<span id="1321">1321</span>
<span id="1322">1322</span>
<span id="1323">1323</span>
<span id="1324">1324</span>
<span id="1325">1325</span>
<span id="1326">1326</span>
<span id="1327">1327</span>
<span id="1328">1328</span>
<span id="1329">1329</span>
<span id="1330">1330</span>
<span id="1331">1331</span>
<span id="1332">1332</span>
<span id="1333">1333</span>
<span id="1334">1334</span>
<span id="1335">1335</span>
<span id="1336">1336</span>
<span id="1337">1337</span>
<span id="1338">1338</span>
<span id="1339">1339</span>
<span id="1340">1340</span>
<span id="1341">1341</span>
<span id="1342">1342</span>
<span id="1343">1343</span>
<span id="1344">1344</span>
<span id="1345">1345</span>
<span id="1346">1346</span>
<span id="1347">1347</span>
<span id="1348">1348</span>
<span id="1349">1349</span>
<span id="1350">1350</span>
<span id="1351">1351</span>
<span id="1352">1352</span>
<span id="1353">1353</span>
<span id="1354">1354</span>
<span id="1355">1355</span>
<span id="1356">1356</span>
<span id="1357">1357</span>
<span id="1358">1358</span>
<span id="1359">1359</span>
<span id="1360">1360</span>
<span id="1361">1361</span>
<span id="1362">1362</span>
<span id="1363">1363</span>
<span id="1364">1364</span>
<span id="1365">1365</span>
<span id="1366">1366</span>
<span id="1367">1367</span>
<span id="1368">1368</span>
<span id="1369">1369</span>
<span id="1370">1370</span>
<span id="1371">1371</span>
<span id="1372">1372</span>
<span id="1373">1373</span>
<span id="1374">1374</span>
<span id="1375">1375</span>
<span id="1376">1376</span>
<span id="1377">1377</span>
<span id="1378">1378</span>
<span id="1379">1379</span>
<span id="1380">1380</span>
<span id="1381">1381</span>
<span id="1382">1382</span>
<span id="1383">1383</span>
<span id="1384">1384</span>
<span id="1385">1385</span>
<span id="1386">1386</span>
<span id="1387">1387</span>
<span id="1388">1388</span>
<span id="1389">1389</span>
<span id="1390">1390</span>
<span id="1391">1391</span>
<span id="1392">1392</span>
<span id="1393">1393</span>
<span id="1394">1394</span>
<span id="1395">1395</span>
<span id="1396">1396</span>
<span id="1397">1397</span>
<span id="1398">1398</span>
<span id="1399">1399</span>
<span id="1400">1400</span>
<span id="1401">1401</span>
<span id="1402">1402</span>
<span id="1403">1403</span>
<span id="1404">1404</span>
<span id="1405">1405</span>
<span id="1406">1406</span>
<span id="1407">1407</span>
<span id="1408">1408</span>
<span id="1409">1409</span>
<span id="1410">1410</span>
<span id="1411">1411</span>
<span id="1412">1412</span>
<span id="1413">1413</span>
<span id="1414">1414</span>
<span id="1415">1415</span>
<span id="1416">1416</span>
<span id="1417">1417</span>
<span id="1418">1418</span>
<span id="1419">1419</span>
<span id="1420">1420</span>
<span id="1421">1421</span>
<span id="1422">1422</span>
<span id="1423">1423</span>
<span id="1424">1424</span>
<span id="1425">1425</span>
<span id="1426">1426</span>
<span id="1427">1427</span>
<span id="1428">1428</span>
<span id="1429">1429</span>
<span id="1430">1430</span>
<span id="1431">1431</span>
<span id="1432">1432</span>
<span id="1433">1433</span>
<span id="1434">1434</span>
<span id="1435">1435</span>
<span id="1436">1436</span>
<span id="1437">1437</span>
<span id="1438">1438</span>
<span id="1439">1439</span>
<span id="1440">1440</span>
<span id="1441">1441</span>
<span id="1442">1442</span>
<span id="1443">1443</span>
<span id="1444">1444</span>
<span id="1445">1445</span>
<span id="1446">1446</span>
<span id="1447">1447</span>
<span id="1448">1448</span>
<span id="1449">1449</span>
<span id="1450">1450</span>
<span id="1451">1451</span>
<span id="1452">1452</span>
<span id="1453">1453</span>
<span id="1454">1454</span>
<span id="1455">1455</span>
<span id="1456">1456</span>
<span id="1457">1457</span>
<span id="1458">1458</span>
<span id="1459">1459</span>
<span id="1460">1460</span>
<span id="1461">1461</span>
<span id="1462">1462</span>
<span id="1463">1463</span>
<span id="1464">1464</span>
<span id="1465">1465</span>
<span id="1466">1466</span>
<span id="1467">1467</span>
<span id="1468">1468</span>
<span id="1469">1469</span>
<span id="1470">1470</span>
<span id="1471">1471</span>
<span id="1472">1472</span>
<span id="1473">1473</span>
<span id="1474">1474</span>
<span id="1475">1475</span>
<span id="1476">1476</span>
<span id="1477">1477</span>
<span id="1478">1478</span>
<span id="1479">1479</span>
<span id="1480">1480</span>
<span id="1481">1481</span>
<span id="1482">1482</span>
<span id="1483">1483</span>
<span id="1484">1484</span>
<span id="1485">1485</span>
<span id="1486">1486</span>
<span id="1487">1487</span>
<span id="1488">1488</span>
<span id="1489">1489</span>
<span id="1490">1490</span>
<span id="1491">1491</span>
<span id="1492">1492</span>
<span id="1493">1493</span>
<span id="1494">1494</span>
<span id="1495">1495</span>
<span id="1496">1496</span>
<span id="1497">1497</span>
<span id="1498">1498</span>
<span id="1499">1499</span>
<span id="1500">1500</span>
<span id="1501">1501</span>
<span id="1502">1502</span>
<span id="1503">1503</span>
<span id="1504">1504</span>
<span id="1505">1505</span>
<span id="1506">1506</span>
<span id="1507">1507</span>
<span id="1508">1508</span>
<span id="1509">1509</span>
<span id="1510">1510</span>
<span id="1511">1511</span>
<span id="1512">1512</span>
<span id="1513">1513</span>
<span id="1514">1514</span>
<span id="1515">1515</span>
<span id="1516">1516</span>
<span id="1517">1517</span>
<span id="1518">1518</span>
<span id="1519">1519</span>
<span id="1520">1520</span>
<span id="1521">1521</span>
<span id="1522">1522</span>
<span id="1523">1523</span>
<span id="1524">1524</span>
<span id="1525">1525</span>
<span id="1526">1526</span>
<span id="1527">1527</span>
<span id="1528">1528</span>
<span id="1529">1529</span>
<span id="1530">1530</span>
<span id="1531">1531</span>
<span id="1532">1532</span>
<span id="1533">1533</span>
<span id="1534">1534</span>
<span id="1535">1535</span>
<span id="1536">1536</span>
<span id="1537">1537</span>
<span id="1538">1538</span>
<span id="1539">1539</span>
<span id="1540">1540</span>
<span id="1541">1541</span>
<span id="1542">1542</span>
<span id="1543">1543</span>
<span id="1544">1544</span>
<span id="1545">1545</span>
<span id="1546">1546</span>
<span id="1547">1547</span>
<span id="1548">1548</span>
<span id="1549">1549</span>
<span id="1550">1550</span>
<span id="1551">1551</span>
<span id="1552">1552</span>
<span id="1553">1553</span>
<span id="1554">1554</span>
<span id="1555">1555</span>
<span id="1556">1556</span>
<span id="1557">1557</span>
<span id="1558">1558</span>
<span id="1559">1559</span>
<span id="1560">1560</span>
<span id="1561">1561</span>
<span id="1562">1562</span>
<span id="1563">1563</span>
<span id="1564">1564</span>
<span id="1565">1565</span>
<span id="1566">1566</span>
<span id="1567">1567</span>
<span id="1568">1568</span>
<span id="1569">1569</span>
<span id="1570">1570</span>
<span id="1571">1571</span>
<span id="1572">1572</span>
<span id="1573">1573</span>
<span id="1574">1574</span>
<span id="1575">1575</span>
<span id="1576">1576</span>
<span id="1577">1577</span>
<span id="1578">1578</span>
<span id="1579">1579</span>
<span id="1580">1580</span>
<span id="1581">1581</span>
<span id="1582">1582</span>
<span id="1583">1583</span>
<span id="1584">1584</span>
<span id="1585">1585</span>
<span id="1586">1586</span>
<span id="1587">1587</span>
<span id="1588">1588</span>
<span id="1589">1589</span>
<span id="1590">1590</span>
<span id="1591">1591</span>
<span id="1592">1592</span>
<span id="1593">1593</span>
<span id="1594">1594</span>
<span id="1595">1595</span>
<span id="1596">1596</span>
<span id="1597">1597</span>
<span id="1598">1598</span>
<span id="1599">1599</span>
<span id="1600">1600</span>
<span id="1601">1601</span>
<span id="1602">1602</span>
<span id="1603">1603</span>
<span id="1604">1604</span>
<span id="1605">1605</span>
<span id="1606">1606</span>
<span id="1607">1607</span>
<span id="1608">1608</span>
<span id="1609">1609</span>
<span id="1610">1610</span>
<span id="1611">1611</span>
<span id="1612">1612</span>
<span id="1613">1613</span>
<span id="1614">1614</span>
<span id="1615">1615</span>
<span id="1616">1616</span>
<span id="1617">1617</span>
<span id="1618">1618</span>
<span id="1619">1619</span>
<span id="1620">1620</span>
<span id="1621">1621</span>
<span id="1622">1622</span>
<span id="1623">1623</span>
<span id="1624">1624</span>
<span id="1625">1625</span>
<span id="1626">1626</span>
<span id="1627">1627</span>
<span id="1628">1628</span>
<span id="1629">1629</span>
<span id="1630">1630</span>
<span id="1631">1631</span>
<span id="1632">1632</span>
<span id="1633">1633</span>
<span id="1634">1634</span>
<span id="1635">1635</span>
<span id="1636">1636</span>
<span id="1637">1637</span>
<span id="1638">1638</span>
<span id="1639">1639</span>
<span id="1640">1640</span>
<span id="1641">1641</span>
<span id="1642">1642</span>
<span id="1643">1643</span>
<span id="1644">1644</span>
<span id="1645">1645</span>
<span id="1646">1646</span>
<span id="1647">1647</span>
<span id="1648">1648</span>
<span id="1649">1649</span>
<span id="1650">1650</span>
<span id="1651">1651</span>
<span id="1652">1652</span>
<span id="1653">1653</span>
<span id="1654">1654</span>
<span id="1655">1655</span>
<span id="1656">1656</span>
<span id="1657">1657</span>
<span id="1658">1658</span>
<span id="1659">1659</span>
<span id="1660">1660</span>
<span id="1661">1661</span>
<span id="1662">1662</span>
<span id="1663">1663</span>
<span id="1664">1664</span>
<span id="1665">1665</span>
<span id="1666">1666</span>
<span id="1667">1667</span>
<span id="1668">1668</span>
<span id="1669">1669</span>
<span id="1670">1670</span>
<span id="1671">1671</span>
<span id="1672">1672</span>
<span id="1673">1673</span>
<span id="1674">1674</span>
<span id="1675">1675</span>
<span id="1676">1676</span>
<span id="1677">1677</span>
<span id="1678">1678</span>
<span id="1679">1679</span>
<span id="1680">1680</span>
<span id="1681">1681</span>
<span id="1682">1682</span>
<span id="1683">1683</span>
<span id="1684">1684</span>
<span id="1685">1685</span>
<span id="1686">1686</span>
<span id="1687">1687</span>
<span id="1688">1688</span>
<span id="1689">1689</span>
<span id="1690">1690</span>
<span id="1691">1691</span>
<span id="1692">1692</span>
<span id="1693">1693</span>
<span id="1694">1694</span>
<span id="1695">1695</span>
<span id="1696">1696</span>
<span id="1697">1697</span>
<span id="1698">1698</span>
<span id="1699">1699</span>
<span id="1700">1700</span>
<span id="1701">1701</span>
<span id="1702">1702</span>
<span id="1703">1703</span>
<span id="1704">1704</span>
<span id="1705">1705</span>
<span id="1706">1706</span>
<span id="1707">1707</span>
<span id="1708">1708</span>
<span id="1709">1709</span>
<span id="1710">1710</span>
<span id="1711">1711</span>
<span id="1712">1712</span>
<span id="1713">1713</span>
<span id="1714">1714</span>
<span id="1715">1715</span>
<span id="1716">1716</span>
<span id="1717">1717</span>
<span id="1718">1718</span>
<span id="1719">1719</span>
<span id="1720">1720</span>
<span id="1721">1721</span>
<span id="1722">1722</span>
<span id="1723">1723</span>
<span id="1724">1724</span>
<span id="1725">1725</span>
<span id="1726">1726</span>
<span id="1727">1727</span>
<span id="1728">1728</span>
<span id="1729">1729</span>
<span id="1730">1730</span>
<span id="1731">1731</span>
<span id="1732">1732</span>
<span id="1733">1733</span>
<span id="1734">1734</span>
<span id="1735">1735</span>
<span id="1736">1736</span>
<span id="1737">1737</span>
<span id="1738">1738</span>
<span id="1739">1739</span>
<span id="1740">1740</span>
<span id="1741">1741</span>
<span id="1742">1742</span>
<span id="1743">1743</span>
<span id="1744">1744</span>
<span id="1745">1745</span>
<span id="1746">1746</span>
<span id="1747">1747</span>
<span id="1748">1748</span>
<span id="1749">1749</span>
<span id="1750">1750</span>
<span id="1751">1751</span>
<span id="1752">1752</span>
<span id="1753">1753</span>
<span id="1754">1754</span>
<span id="1755">1755</span>
<span id="1756">1756</span>
<span id="1757">1757</span>
<span id="1758">1758</span>
<span id="1759">1759</span>
<span id="1760">1760</span>
<span id="1761">1761</span>
<span id="1762">1762</span>
<span id="1763">1763</span>
<span id="1764">1764</span>
<span id="1765">1765</span>
<span id="1766">1766</span>
<span id="1767">1767</span>
<span id="1768">1768</span>
<span id="1769">1769</span>
<span id="1770">1770</span>
<span id="1771">1771</span>
<span id="1772">1772</span>
<span id="1773">1773</span>
<span id="1774">1774</span>
<span id="1775">1775</span>
<span id="1776">1776</span>
<span id="1777">1777</span>
<span id="1778">1778</span>
<span id="1779">1779</span>
<span id="1780">1780</span>
<span id="1781">1781</span>
<span id="1782">1782</span>
<span id="1783">1783</span>
<span id="1784">1784</span>
<span id="1785">1785</span>
<span id="1786">1786</span>
<span id="1787">1787</span>
<span id="1788">1788</span>
<span id="1789">1789</span>
<span id="1790">1790</span>
<span id="1791">1791</span>
<span id="1792">1792</span>
<span id="1793">1793</span>
<span id="1794">1794</span>
<span id="1795">1795</span>
<span id="1796">1796</span>
<span id="1797">1797</span>
<span id="1798">1798</span>
<span id="1799">1799</span>
<span id="1800">1800</span>
<span id="1801">1801</span>
<span id="1802">1802</span>
<span id="1803">1803</span>
<span id="1804">1804</span>
<span id="1805">1805</span>
<span id="1806">1806</span>
<span id="1807">1807</span>
<span id="1808">1808</span>
<span id="1809">1809</span>
<span id="1810">1810</span>
<span id="1811">1811</span>
<span id="1812">1812</span>
<span id="1813">1813</span>
<span id="1814">1814</span>
<span id="1815">1815</span>
<span id="1816">1816</span>
<span id="1817">1817</span>
<span id="1818">1818</span>
<span id="1819">1819</span>
<span id="1820">1820</span>
<span id="1821">1821</span>
<span id="1822">1822</span>
<span id="1823">1823</span>
<span id="1824">1824</span>
<span id="1825">1825</span>
<span id="1826">1826</span>
<span id="1827">1827</span>
<span id="1828">1828</span>
<span id="1829">1829</span>
<span id="1830">1830</span>
<span id="1831">1831</span>
<span id="1832">1832</span>
<span id="1833">1833</span>
<span id="1834">1834</span>
<span id="1835">1835</span>
<span id="1836">1836</span>
<span id="1837">1837</span>
<span id="1838">1838</span>
<span id="1839">1839</span>
<span id="1840">1840</span>
<span id="1841">1841</span>
<span id="1842">1842</span>
<span id="1843">1843</span>
<span id="1844">1844</span>
<span id="1845">1845</span>
<span id="1846">1846</span>
<span id="1847">1847</span>
<span id="1848">1848</span>
<span id="1849">1849</span>
<span id="1850">1850</span>
<span id="1851">1851</span>
<span id="1852">1852</span>
<span id="1853">1853</span>
<span id="1854">1854</span>
<span id="1855">1855</span>
<span id="1856">1856</span>
<span id="1857">1857</span>
<span id="1858">1858</span>
<span id="1859">1859</span>
<span id="1860">1860</span>
<span id="1861">1861</span>
<span id="1862">1862</span>
<span id="1863">1863</span>
<span id="1864">1864</span>
<span id="1865">1865</span>
<span id="1866">1866</span>
<span id="1867">1867</span>
<span id="1868">1868</span>
<span id="1869">1869</span>
<span id="1870">1870</span>
<span id="1871">1871</span>
<span id="1872">1872</span>
<span id="1873">1873</span>
<span id="1874">1874</span>
<span id="1875">1875</span>
<span id="1876">1876</span>
<span id="1877">1877</span>
<span id="1878">1878</span>
<span id="1879">1879</span>
<span id="1880">1880</span>
<span id="1881">1881</span>
<span id="1882">1882</span>
<span id="1883">1883</span>
<span id="1884">1884</span>
<span id="1885">1885</span>
<span id="1886">1886</span>
<span id="1887">1887</span>
<span id="1888">1888</span>
<span id="1889">1889</span>
<span id="1890">1890</span>
<span id="1891">1891</span>
<span id="1892">1892</span>
<span id="1893">1893</span>
<span id="1894">1894</span>
<span id="1895">1895</span>
<span id="1896">1896</span>
<span id="1897">1897</span>
<span id="1898">1898</span>
<span id="1899">1899</span>
<span id="1900">1900</span>
<span id="1901">1901</span>
<span id="1902">1902</span>
<span id="1903">1903</span>
<span id="1904">1904</span>
<span id="1905">1905</span>
<span id="1906">1906</span>
<span id="1907">1907</span>
<span id="1908">1908</span>
<span id="1909">1909</span>
<span id="1910">1910</span>
<span id="1911">1911</span>
<span id="1912">1912</span>
<span id="1913">1913</span>
<span id="1914">1914</span>
<span id="1915">1915</span>
<span id="1916">1916</span>
<span id="1917">1917</span>
<span id="1918">1918</span>
<span id="1919">1919</span>
<span id="1920">1920</span>
<span id="1921">1921</span>
<span id="1922">1922</span>
<span id="1923">1923</span>
<span id="1924">1924</span>
<span id="1925">1925</span>
<span id="1926">1926</span>
<span id="1927">1927</span>
<span id="1928">1928</span>
<span id="1929">1929</span>
<span id="1930">1930</span>
<span id="1931">1931</span>
<span id="1932">1932</span>
<span id="1933">1933</span>
<span id="1934">1934</span>
<span id="1935">1935</span>
<span id="1936">1936</span>
<span id="1937">1937</span>
<span id="1938">1938</span>
<span id="1939">1939</span>
<span id="1940">1940</span>
<span id="1941">1941</span>
<span id="1942">1942</span>
<span id="1943">1943</span>
<span id="1944">1944</span>
<span id="1945">1945</span>
<span id="1946">1946</span>
<span id="1947">1947</span>
<span id="1948">1948</span>
<span id="1949">1949</span>
<span id="1950">1950</span>
<span id="1951">1951</span>
<span id="1952">1952</span>
<span id="1953">1953</span>
<span id="1954">1954</span>
<span id="1955">1955</span>
<span id="1956">1956</span>
<span id="1957">1957</span>
<span id="1958">1958</span>
<span id="1959">1959</span>
<span id="1960">1960</span>
<span id="1961">1961</span>
<span id="1962">1962</span>
<span id="1963">1963</span>
<span id="1964">1964</span>
<span id="1965">1965</span>
<span id="1966">1966</span>
<span id="1967">1967</span>
<span id="1968">1968</span>
<span id="1969">1969</span>
<span id="1970">1970</span>
<span id="1971">1971</span>
<span id="1972">1972</span>
<span id="1973">1973</span>
<span id="1974">1974</span>
<span id="1975">1975</span>
<span id="1976">1976</span>
<span id="1977">1977</span>
<span id="1978">1978</span>
<span id="1979">1979</span>
<span id="1980">1980</span>
<span id="1981">1981</span>
<span id="1982">1982</span>
<span id="1983">1983</span>
<span id="1984">1984</span>
<span id="1985">1985</span>
<span id="1986">1986</span>
<span id="1987">1987</span>
<span id="1988">1988</span>
<span id="1989">1989</span>
<span id="1990">1990</span>
<span id="1991">1991</span>
<span id="1992">1992</span>
<span id="1993">1993</span>
<span id="1994">1994</span>
<span id="1995">1995</span>
<span id="1996">1996</span>
<span id="1997">1997</span>
<span id="1998">1998</span>
<span id="1999">1999</span>
<span id="2000">2000</span>
<span id="2001">2001</span>
<span id="2002">2002</span>
<span id="2003">2003</span>
<span id="2004">2004</span>
<span id="2005">2005</span>
<span id="2006">2006</span>
<span id="2007">2007</span>
<span id="2008">2008</span>
<span id="2009">2009</span>
<span id="2010">2010</span>
<span id="2011">2011</span>
<span id="2012">2012</span>
<span id="2013">2013</span>
<span id="2014">2014</span>
<span id="2015">2015</span>
<span id="2016">2016</span>
<span id="2017">2017</span>
<span id="2018">2018</span>
<span id="2019">2019</span>
<span id="2020">2020</span>
<span id="2021">2021</span>
<span id="2022">2022</span>
<span id="2023">2023</span>
<span id="2024">2024</span>
<span id="2025">2025</span>
<span id="2026">2026</span>
<span id="2027">2027</span>
<span id="2028">2028</span>
<span id="2029">2029</span>
<span id="2030">2030</span>
<span id="2031">2031</span>
<span id="2032">2032</span>
<span id="2033">2033</span>
<span id="2034">2034</span>
<span id="2035">2035</span>
<span id="2036">2036</span>
<span id="2037">2037</span>
<span id="2038">2038</span>
<span id="2039">2039</span>
<span id="2040">2040</span>
<span id="2041">2041</span>
<span id="2042">2042</span>
<span id="2043">2043</span>
<span id="2044">2044</span>
<span id="2045">2045</span>
<span id="2046">2046</span>
<span id="2047">2047</span>
<span id="2048">2048</span>
<span id="2049">2049</span>
<span id="2050">2050</span>
<span id="2051">2051</span>
<span id="2052">2052</span>
<span id="2053">2053</span>
<span id="2054">2054</span>
<span id="2055">2055</span>
<span id="2056">2056</span>
<span id="2057">2057</span>
<span id="2058">2058</span>
<span id="2059">2059</span>
<span id="2060">2060</span>
<span id="2061">2061</span>
<span id="2062">2062</span>
<span id="2063">2063</span>
<span id="2064">2064</span>
<span id="2065">2065</span>
<span id="2066">2066</span>
<span id="2067">2067</span>
<span id="2068">2068</span>
<span id="2069">2069</span>
<span id="2070">2070</span>
<span id="2071">2071</span>
<span id="2072">2072</span>
<span id="2073">2073</span>
<span id="2074">2074</span>
<span id="2075">2075</span>
<span id="2076">2076</span>
<span id="2077">2077</span>
<span id="2078">2078</span>
<span id="2079">2079</span>
<span id="2080">2080</span>
<span id="2081">2081</span>
<span id="2082">2082</span>
<span id="2083">2083</span>
<span id="2084">2084</span>
<span id="2085">2085</span>
<span id="2086">2086</span>
<span id="2087">2087</span>
<span id="2088">2088</span>
<span id="2089">2089</span>
<span id="2090">2090</span>
<span id="2091">2091</span>
<span id="2092">2092</span>
<span id="2093">2093</span>
<span id="2094">2094</span>
<span id="2095">2095</span>
<span id="2096">2096</span>
<span id="2097">2097</span>
<span id="2098">2098</span>
<span id="2099">2099</span>
<span id="2100">2100</span>
<span id="2101">2101</span>
<span id="2102">2102</span>
<span id="2103">2103</span>
<span id="2104">2104</span>
<span id="2105">2105</span>
<span id="2106">2106</span>
<span id="2107">2107</span>
<span id="2108">2108</span>
<span id="2109">2109</span>
<span id="2110">2110</span>
<span id="2111">2111</span>
<span id="2112">2112</span>
<span id="2113">2113</span>
<span id="2114">2114</span>
<span id="2115">2115</span>
<span id="2116">2116</span>
<span id="2117">2117</span>
<span id="2118">2118</span>
<span id="2119">2119</span>
<span id="2120">2120</span>
<span id="2121">2121</span>
<span id="2122">2122</span>
<span id="2123">2123</span>
<span id="2124">2124</span>
<span id="2125">2125</span>
<span id="2126">2126</span>
<span id="2127">2127</span>
<span id="2128">2128</span>
<span id="2129">2129</span>
<span id="2130">2130</span>
<span id="2131">2131</span>
<span id="2132">2132</span>
<span id="2133">2133</span>
<span id="2134">2134</span>
<span id="2135">2135</span>
<span id="2136">2136</span>
<span id="2137">2137</span>
<span id="2138">2138</span>
<span id="2139">2139</span>
<span id="2140">2140</span>
<span id="2141">2141</span>
<span id="2142">2142</span>
<span id="2143">2143</span>
<span id="2144">2144</span>
<span id="2145">2145</span>
<span id="2146">2146</span>
<span id="2147">2147</span>
<span id="2148">2148</span>
<span id="2149">2149</span>
<span id="2150">2150</span>
<span id="2151">2151</span>
<span id="2152">2152</span>
<span id="2153">2153</span>
<span id="2154">2154</span>
<span id="2155">2155</span>
<span id="2156">2156</span>
<span id="2157">2157</span>
<span id="2158">2158</span>
<span id="2159">2159</span>
<span id="2160">2160</span>
<span id="2161">2161</span>
<span id="2162">2162</span>
<span id="2163">2163</span>
<span id="2164">2164</span>
<span id="2165">2165</span>
<span id="2166">2166</span>
<span id="2167">2167</span>
<span id="2168">2168</span>
<span id="2169">2169</span>
<span id="2170">2170</span>
<span id="2171">2171</span>
<span id="2172">2172</span>
<span id="2173">2173</span>
<span id="2174">2174</span>
<span id="2175">2175</span>
<span id="2176">2176</span>
<span id="2177">2177</span>
<span id="2178">2178</span>
<span id="2179">2179</span>
<span id="2180">2180</span>
<span id="2181">2181</span>
<span id="2182">2182</span>
<span id="2183">2183</span>
<span id="2184">2184</span>
<span id="2185">2185</span>
<span id="2186">2186</span>
<span id="2187">2187</span>
<span id="2188">2188</span>
<span id="2189">2189</span>
<span id="2190">2190</span>
<span id="2191">2191</span>
<span id="2192">2192</span>
<span id="2193">2193</span>
<span id="2194">2194</span>
<span id="2195">2195</span>
<span id="2196">2196</span>
<span id="2197">2197</span>
<span id="2198">2198</span>
<span id="2199">2199</span>
<span id="2200">2200</span>
<span id="2201">2201</span>
<span id="2202">2202</span>
<span id="2203">2203</span>
<span id="2204">2204</span>
<span id="2205">2205</span>
<span id="2206">2206</span>
<span id="2207">2207</span>
<span id="2208">2208</span>
<span id="2209">2209</span>
<span id="2210">2210</span>
<span id="2211">2211</span>
<span id="2212">2212</span>
<span id="2213">2213</span>
<span id="2214">2214</span>
<span id="2215">2215</span>
<span id="2216">2216</span>
<span id="2217">2217</span>
<span id="2218">2218</span>
<span id="2219">2219</span>
<span id="2220">2220</span>
<span id="2221">2221</span>
<span id="2222">2222</span>
<span id="2223">2223</span>
<span id="2224">2224</span>
<span id="2225">2225</span>
<span id="2226">2226</span>
<span id="2227">2227</span>
<span id="2228">2228</span>
<span id="2229">2229</span>
<span id="2230">2230</span>
<span id="2231">2231</span>
<span id="2232">2232</span>
<span id="2233">2233</span>
<span id="2234">2234</span>
<span id="2235">2235</span>
<span id="2236">2236</span>
<span id="2237">2237</span>
<span id="2238">2238</span>
<span id="2239">2239</span>
<span id="2240">2240</span>
<span id="2241">2241</span>
<span id="2242">2242</span>
<span id="2243">2243</span>
<span id="2244">2244</span>
<span id="2245">2245</span>
<span id="2246">2246</span>
<span id="2247">2247</span>
<span id="2248">2248</span>
<span id="2249">2249</span>
<span id="2250">2250</span>
<span id="2251">2251</span>
<span id="2252">2252</span>
<span id="2253">2253</span>
<span id="2254">2254</span>
<span id="2255">2255</span>
<span id="2256">2256</span>
<span id="2257">2257</span>
<span id="2258">2258</span>
<span id="2259">2259</span>
<span id="2260">2260</span>
<span id="2261">2261</span>
<span id="2262">2262</span>
<span id="2263">2263</span>
<span id="2264">2264</span>
<span id="2265">2265</span>
<span id="2266">2266</span>
<span id="2267">2267</span>
<span id="2268">2268</span>
<span id="2269">2269</span>
<span id="2270">2270</span>
<span id="2271">2271</span>
<span id="2272">2272</span>
<span id="2273">2273</span>
<span id="2274">2274</span>
<span id="2275">2275</span>
<span id="2276">2276</span>
<span id="2277">2277</span>
<span id="2278">2278</span>
<span id="2279">2279</span>
<span id="2280">2280</span>
<span id="2281">2281</span>
<span id="2282">2282</span>
<span id="2283">2283</span>
<span id="2284">2284</span>
<span id="2285">2285</span>
<span id="2286">2286</span>
<span id="2287">2287</span>
<span id="2288">2288</span>
<span id="2289">2289</span>
<span id="2290">2290</span>
<span id="2291">2291</span>
<span id="2292">2292</span>
<span id="2293">2293</span>
<span id="2294">2294</span>
<span id="2295">2295</span>
<span id="2296">2296</span>
<span id="2297">2297</span>
<span id="2298">2298</span>
<span id="2299">2299</span>
<span id="2300">2300</span>
<span id="2301">2301</span>
<span id="2302">2302</span>
<span id="2303">2303</span>
<span id="2304">2304</span>
<span id="2305">2305</span>
<span id="2306">2306</span>
<span id="2307">2307</span>
<span id="2308">2308</span>
<span id="2309">2309</span>
<span id="2310">2310</span>
<span id="2311">2311</span>
<span id="2312">2312</span>
<span id="2313">2313</span>
<span id="2314">2314</span>
<span id="2315">2315</span>
<span id="2316">2316</span>
<span id="2317">2317</span>
<span id="2318">2318</span>
<span id="2319">2319</span>
<span id="2320">2320</span>
<span id="2321">2321</span>
<span id="2322">2322</span>
<span id="2323">2323</span>
<span id="2324">2324</span>
<span id="2325">2325</span>
<span id="2326">2326</span>
<span id="2327">2327</span>
<span id="2328">2328</span>
<span id="2329">2329</span>
<span id="2330">2330</span>
<span id="2331">2331</span>
<span id="2332">2332</span>
<span id="2333">2333</span>
<span id="2334">2334</span>
<span id="2335">2335</span>
<span id="2336">2336</span>
<span id="2337">2337</span>
<span id="2338">2338</span>
<span id="2339">2339</span>
<span id="2340">2340</span>
<span id="2341">2341</span>
<span id="2342">2342</span>
<span id="2343">2343</span>
<span id="2344">2344</span>
<span id="2345">2345</span>
<span id="2346">2346</span>
<span id="2347">2347</span>
<span id="2348">2348</span>
<span id="2349">2349</span>
<span id="2350">2350</span>
<span id="2351">2351</span>
<span id="2352">2352</span>
<span id="2353">2353</span>
<span id="2354">2354</span>
<span id="2355">2355</span>
<span id="2356">2356</span>
<span id="2357">2357</span>
<span id="2358">2358</span>
<span id="2359">2359</span>
<span id="2360">2360</span>
<span id="2361">2361</span>
<span id="2362">2362</span>
<span id="2363">2363</span>
<span id="2364">2364</span>
<span id="2365">2365</span>
<span id="2366">2366</span>
<span id="2367">2367</span>
<span id="2368">2368</span>
<span id="2369">2369</span>
<span id="2370">2370</span>
<span id="2371">2371</span>
<span id="2372">2372</span>
<span id="2373">2373</span>
<span id="2374">2374</span>
<span id="2375">2375</span>
<span id="2376">2376</span>
<span id="2377">2377</span>
<span id="2378">2378</span>
<span id="2379">2379</span>
<span id="2380">2380</span>
<span id="2381">2381</span>
<span id="2382">2382</span>
<span id="2383">2383</span>
<span id="2384">2384</span>
<span id="2385">2385</span>
<span id="2386">2386</span>
<span id="2387">2387</span>
<span id="2388">2388</span>
<span id="2389">2389</span>
<span id="2390">2390</span>
<span id="2391">2391</span>
<span id="2392">2392</span>
<span id="2393">2393</span>
<span id="2394">2394</span>
<span id="2395">2395</span>
<span id="2396">2396</span>
<span id="2397">2397</span>
<span id="2398">2398</span>
<span id="2399">2399</span>
<span id="2400">2400</span>
<span id="2401">2401</span>
<span id="2402">2402</span>
<span id="2403">2403</span>
<span id="2404">2404</span>
<span id="2405">2405</span>
<span id="2406">2406</span>
<span id="2407">2407</span>
<span id="2408">2408</span>
<span id="2409">2409</span>
<span id="2410">2410</span>
<span id="2411">2411</span>
<span id="2412">2412</span>
<span id="2413">2413</span>
<span id="2414">2414</span>
<span id="2415">2415</span>
<span id="2416">2416</span>
<span id="2417">2417</span>
<span id="2418">2418</span>
<span id="2419">2419</span>
<span id="2420">2420</span>
<span id="2421">2421</span>
<span id="2422">2422</span>
<span id="2423">2423</span>
<span id="2424">2424</span>
<span id="2425">2425</span>
<span id="2426">2426</span>
<span id="2427">2427</span>
<span id="2428">2428</span>
<span id="2429">2429</span>
<span id="2430">2430</span>
<span id="2431">2431</span>
<span id="2432">2432</span>
<span id="2433">2433</span>
<span id="2434">2434</span>
<span id="2435">2435</span>
<span id="2436">2436</span>
<span id="2437">2437</span>
<span id="2438">2438</span>
<span id="2439">2439</span>
<span id="2440">2440</span>
<span id="2441">2441</span>
<span id="2442">2442</span>
<span id="2443">2443</span>
<span id="2444">2444</span>
<span id="2445">2445</span>
<span id="2446">2446</span>
<span id="2447">2447</span>
<span id="2448">2448</span>
<span id="2449">2449</span>
<span id="2450">2450</span>
<span id="2451">2451</span>
<span id="2452">2452</span>
<span id="2453">2453</span>
<span id="2454">2454</span>
<span id="2455">2455</span>
<span id="2456">2456</span>
<span id="2457">2457</span>
<span id="2458">2458</span>
<span id="2459">2459</span>
<span id="2460">2460</span>
<span id="2461">2461</span>
<span id="2462">2462</span>
<span id="2463">2463</span>
<span id="2464">2464</span>
<span id="2465">2465</span>
<span id="2466">2466</span>
<span id="2467">2467</span>
<span id="2468">2468</span>
<span id="2469">2469</span>
<span id="2470">2470</span>
<span id="2471">2471</span>
<span id="2472">2472</span>
<span id="2473">2473</span>
<span id="2474">2474</span>
<span id="2475">2475</span>
<span id="2476">2476</span>
<span id="2477">2477</span>
<span id="2478">2478</span>
<span id="2479">2479</span>
<span id="2480">2480</span>
<span id="2481">2481</span>
<span id="2482">2482</span>
<span id="2483">2483</span>
<span id="2484">2484</span>
<span id="2485">2485</span>
<span id="2486">2486</span>
<span id="2487">2487</span>
<span id="2488">2488</span>
<span id="2489">2489</span>
<span id="2490">2490</span>
<span id="2491">2491</span>
<span id="2492">2492</span>
<span id="2493">2493</span>
<span id="2494">2494</span>
<span id="2495">2495</span>
<span id="2496">2496</span>
<span id="2497">2497</span>
<span id="2498">2498</span>
<span id="2499">2499</span>
<span id="2500">2500</span>
<span id="2501">2501</span>
<span id="2502">2502</span>
<span id="2503">2503</span>
<span id="2504">2504</span>
<span id="2505">2505</span>
<span id="2506">2506</span>
<span id="2507">2507</span>
<span id="2508">2508</span>
<span id="2509">2509</span>
<span id="2510">2510</span>
<span id="2511">2511</span>
<span id="2512">2512</span>
<span id="2513">2513</span>
<span id="2514">2514</span>
<span id="2515">2515</span>
<span id="2516">2516</span>
<span id="2517">2517</span>
<span id="2518">2518</span>
<span id="2519">2519</span>
<span id="2520">2520</span>
<span id="2521">2521</span>
<span id="2522">2522</span>
<span id="2523">2523</span>
<span id="2524">2524</span>
<span id="2525">2525</span>
<span id="2526">2526</span>
<span id="2527">2527</span>
<span id="2528">2528</span>
<span id="2529">2529</span>
<span id="2530">2530</span>
<span id="2531">2531</span>
<span id="2532">2532</span>
<span id="2533">2533</span>
<span id="2534">2534</span>
<span id="2535">2535</span>
<span id="2536">2536</span>
<span id="2537">2537</span>
<span id="2538">2538</span>
<span id="2539">2539</span>
<span id="2540">2540</span>
<span id="2541">2541</span>
<span id="2542">2542</span>
<span id="2543">2543</span>
<span id="2544">2544</span>
<span id="2545">2545</span>
<span id="2546">2546</span>
<span id="2547">2547</span>
<span id="2548">2548</span>
<span id="2549">2549</span>
<span id="2550">2550</span>
<span id="2551">2551</span>
<span id="2552">2552</span>
<span id="2553">2553</span>
<span id="2554">2554</span>
<span id="2555">2555</span>
<span id="2556">2556</span>
<span id="2557">2557</span>
<span id="2558">2558</span>
<span id="2559">2559</span>
<span id="2560">2560</span>
<span id="2561">2561</span>
<span id="2562">2562</span>
<span id="2563">2563</span>
<span id="2564">2564</span>
<span id="2565">2565</span>
<span id="2566">2566</span>
<span id="2567">2567</span>
<span id="2568">2568</span>
<span id="2569">2569</span>
<span id="2570">2570</span>
<span id="2571">2571</span>
<span id="2572">2572</span>
<span id="2573">2573</span>
<span id="2574">2574</span>
<span id="2575">2575</span>
<span id="2576">2576</span>
<span id="2577">2577</span>
<span id="2578">2578</span>
<span id="2579">2579</span>
<span id="2580">2580</span>
<span id="2581">2581</span>
<span id="2582">2582</span>
<span id="2583">2583</span>
<span id="2584">2584</span>
<span id="2585">2585</span>
<span id="2586">2586</span>
<span id="2587">2587</span>
<span id="2588">2588</span>
<span id="2589">2589</span>
<span id="2590">2590</span>
<span id="2591">2591</span>
<span id="2592">2592</span>
<span id="2593">2593</span>
<span id="2594">2594</span>
<span id="2595">2595</span>
<span id="2596">2596</span>
<span id="2597">2597</span>
<span id="2598">2598</span>
<span id="2599">2599</span>
<span id="2600">2600</span>
<span id="2601">2601</span>
<span id="2602">2602</span>
<span id="2603">2603</span>
<span id="2604">2604</span>
<span id="2605">2605</span>
<span id="2606">2606</span>
<span id="2607">2607</span>
<span id="2608">2608</span>
<span id="2609">2609</span>
<span id="2610">2610</span>
<span id="2611">2611</span>
<span id="2612">2612</span>
<span id="2613">2613</span>
<span id="2614">2614</span>
<span id="2615">2615</span>
<span id="2616">2616</span>
<span id="2617">2617</span>
<span id="2618">2618</span>
<span id="2619">2619</span>
<span id="2620">2620</span>
<span id="2621">2621</span>
<span id="2622">2622</span>
<span id="2623">2623</span>
<span id="2624">2624</span>
<span id="2625">2625</span>
<span id="2626">2626</span>
<span id="2627">2627</span>
<span id="2628">2628</span>
<span id="2629">2629</span>
<span id="2630">2630</span>
<span id="2631">2631</span>
<span id="2632">2632</span>
<span id="2633">2633</span>
<span id="2634">2634</span>
<span id="2635">2635</span>
<span id="2636">2636</span>
<span id="2637">2637</span>
<span id="2638">2638</span>
<span id="2639">2639</span>
<span id="2640">2640</span>
<span id="2641">2641</span>
<span id="2642">2642</span>
<span id="2643">2643</span>
<span id="2644">2644</span>
<span id="2645">2645</span>
<span id="2646">2646</span>
<span id="2647">2647</span>
<span id="2648">2648</span>
<span id="2649">2649</span>
<span id="2650">2650</span>
<span id="2651">2651</span>
<span id="2652">2652</span>
<span id="2653">2653</span>
<span id="2654">2654</span>
<span id="2655">2655</span>
<span id="2656">2656</span>
<span id="2657">2657</span>
<span id="2658">2658</span>
<span id="2659">2659</span>
<span id="2660">2660</span>
<span id="2661">2661</span>
<span id="2662">2662</span>
<span id="2663">2663</span>
<span id="2664">2664</span>
<span id="2665">2665</span>
<span id="2666">2666</span>
<span id="2667">2667</span>
<span id="2668">2668</span>
<span id="2669">2669</span>
<span id="2670">2670</span>
<span id="2671">2671</span>
<span id="2672">2672</span>
<span id="2673">2673</span>
<span id="2674">2674</span>
<span id="2675">2675</span>
<span id="2676">2676</span>
<span id="2677">2677</span>
<span id="2678">2678</span>
<span id="2679">2679</span>
<span id="2680">2680</span>
<span id="2681">2681</span>
<span id="2682">2682</span>
<span id="2683">2683</span>
<span id="2684">2684</span>
<span id="2685">2685</span>
<span id="2686">2686</span>
<span id="2687">2687</span>
<span id="2688">2688</span>
<span id="2689">2689</span>
<span id="2690">2690</span>
<span id="2691">2691</span>
<span id="2692">2692</span>
<span id="2693">2693</span>
<span id="2694">2694</span>
<span id="2695">2695</span>
<span id="2696">2696</span>
<span id="2697">2697</span>
<span id="2698">2698</span>
<span id="2699">2699</span>
<span id="2700">2700</span>
<span id="2701">2701</span>
<span id="2702">2702</span>
<span id="2703">2703</span>
<span id="2704">2704</span>
<span id="2705">2705</span>
<span id="2706">2706</span>
<span id="2707">2707</span>
<span id="2708">2708</span>
<span id="2709">2709</span>
<span id="2710">2710</span>
<span id="2711">2711</span>
<span id="2712">2712</span>
<span id="2713">2713</span>
<span id="2714">2714</span>
<span id="2715">2715</span>
<span id="2716">2716</span>
<span id="2717">2717</span>
<span id="2718">2718</span>
<span id="2719">2719</span>
<span id="2720">2720</span>
<span id="2721">2721</span>
<span id="2722">2722</span>
<span id="2723">2723</span>
<span id="2724">2724</span>
<span id="2725">2725</span>
<span id="2726">2726</span>
<span id="2727">2727</span>
<span id="2728">2728</span>
<span id="2729">2729</span>
<span id="2730">2730</span>
<span id="2731">2731</span>
<span id="2732">2732</span>
<span id="2733">2733</span>
<span id="2734">2734</span>
<span id="2735">2735</span>
<span id="2736">2736</span>
<span id="2737">2737</span>
<span id="2738">2738</span>
<span id="2739">2739</span>
<span id="2740">2740</span>
<span id="2741">2741</span>
<span id="2742">2742</span>
<span id="2743">2743</span>
<span id="2744">2744</span>
<span id="2745">2745</span>
<span id="2746">2746</span>
<span id="2747">2747</span>
<span id="2748">2748</span>
<span id="2749">2749</span>
<span id="2750">2750</span>
<span id="2751">2751</span>
<span id="2752">2752</span>
<span id="2753">2753</span>
<span id="2754">2754</span>
<span id="2755">2755</span>
<span id="2756">2756</span>
<span id="2757">2757</span>
<span id="2758">2758</span>
<span id="2759">2759</span>
<span id="2760">2760</span>
<span id="2761">2761</span>
<span id="2762">2762</span>
<span id="2763">2763</span>
<span id="2764">2764</span>
<span id="2765">2765</span>
<span id="2766">2766</span>
<span id="2767">2767</span>
<span id="2768">2768</span>
<span id="2769">2769</span>
<span id="2770">2770</span>
<span id="2771">2771</span>
<span id="2772">2772</span>
<span id="2773">2773</span>
<span id="2774">2774</span>
<span id="2775">2775</span>
<span id="2776">2776</span>
<span id="2777">2777</span>
<span id="2778">2778</span>
<span id="2779">2779</span>
<span id="2780">2780</span>
<span id="2781">2781</span>
<span id="2782">2782</span>
<span id="2783">2783</span>
<span id="2784">2784</span>
<span id="2785">2785</span>
<span id="2786">2786</span>
<span id="2787">2787</span>
<span id="2788">2788</span>
<span id="2789">2789</span>
<span id="2790">2790</span>
<span id="2791">2791</span>
<span id="2792">2792</span>
<span id="2793">2793</span>
<span id="2794">2794</span>
<span id="2795">2795</span>
<span id="2796">2796</span>
<span id="2797">2797</span>
<span id="2798">2798</span>
<span id="2799">2799</span>
<span id="2800">2800</span>
<span id="2801">2801</span>
<span id="2802">2802</span>
<span id="2803">2803</span>
<span id="2804">2804</span>
<span id="2805">2805</span>
<span id="2806">2806</span>
<span id="2807">2807</span>
<span id="2808">2808</span>
<span id="2809">2809</span>
<span id="2810">2810</span>
<span id="2811">2811</span>
<span id="2812">2812</span>
<span id="2813">2813</span>
<span id="2814">2814</span>
<span id="2815">2815</span>
<span id="2816">2816</span>
<span id="2817">2817</span>
<span id="2818">2818</span>
<span id="2819">2819</span>
<span id="2820">2820</span>
<span id="2821">2821</span>
<span id="2822">2822</span>
<span id="2823">2823</span>
<span id="2824">2824</span>
<span id="2825">2825</span>
<span id="2826">2826</span>
<span id="2827">2827</span>
<span id="2828">2828</span>
<span id="2829">2829</span>
<span id="2830">2830</span>
<span id="2831">2831</span>
<span id="2832">2832</span>
<span id="2833">2833</span>
<span id="2834">2834</span>
<span id="2835">2835</span>
<span id="2836">2836</span>
<span id="2837">2837</span>
<span id="2838">2838</span>
<span id="2839">2839</span>
<span id="2840">2840</span>
<span id="2841">2841</span>
<span id="2842">2842</span>
<span id="2843">2843</span>
<span id="2844">2844</span>
<span id="2845">2845</span>
<span id="2846">2846</span>
<span id="2847">2847</span>
<span id="2848">2848</span>
<span id="2849">2849</span>
<span id="2850">2850</span>
<span id="2851">2851</span>
<span id="2852">2852</span>
<span id="2853">2853</span>
<span id="2854">2854</span>
<span id="2855">2855</span>
<span id="2856">2856</span>
<span id="2857">2857</span>
<span id="2858">2858</span>
<span id="2859">2859</span>
<span id="2860">2860</span>
<span id="2861">2861</span>
<span id="2862">2862</span>
<span id="2863">2863</span>
<span id="2864">2864</span>
<span id="2865">2865</span>
<span id="2866">2866</span>
<span id="2867">2867</span>
<span id="2868">2868</span>
<span id="2869">2869</span>
<span id="2870">2870</span>
<span id="2871">2871</span>
<span id="2872">2872</span>
<span id="2873">2873</span>
<span id="2874">2874</span>
<span id="2875">2875</span>
<span id="2876">2876</span>
<span id="2877">2877</span>
<span id="2878">2878</span>
<span id="2879">2879</span>
<span id="2880">2880</span>
<span id="2881">2881</span>
<span id="2882">2882</span>
<span id="2883">2883</span>
<span id="2884">2884</span>
<span id="2885">2885</span>
<span id="2886">2886</span>
<span id="2887">2887</span>
<span id="2888">2888</span>
<span id="2889">2889</span>
<span id="2890">2890</span>
<span id="2891">2891</span>
<span id="2892">2892</span>
<span id="2893">2893</span>
<span id="2894">2894</span>
<span id="2895">2895</span>
<span id="2896">2896</span>
<span id="2897">2897</span>
<span id="2898">2898</span>
<span id="2899">2899</span>
<span id="2900">2900</span>
<span id="2901">2901</span>
<span id="2902">2902</span>
<span id="2903">2903</span>
<span id="2904">2904</span>
<span id="2905">2905</span>
<span id="2906">2906</span>
<span id="2907">2907</span>
<span id="2908">2908</span>
<span id="2909">2909</span>
<span id="2910">2910</span>
<span id="2911">2911</span>
<span id="2912">2912</span>
<span id="2913">2913</span>
<span id="2914">2914</span>
<span id="2915">2915</span>
<span id="2916">2916</span>
<span id="2917">2917</span>
<span id="2918">2918</span>
<span id="2919">2919</span>
<span id="2920">2920</span>
<span id="2921">2921</span>
<span id="2922">2922</span>
<span id="2923">2923</span>
<span id="2924">2924</span>
<span id="2925">2925</span>
<span id="2926">2926</span>
<span id="2927">2927</span>
<span id="2928">2928</span>
<span id="2929">2929</span>
<span id="2930">2930</span>
<span id="2931">2931</span>
<span id="2932">2932</span>
<span id="2933">2933</span>
<span id="2934">2934</span>
<span id="2935">2935</span>
<span id="2936">2936</span>
<span id="2937">2937</span>
<span id="2938">2938</span>
<span id="2939">2939</span>
<span id="2940">2940</span>
<span id="2941">2941</span>
<span id="2942">2942</span>
<span id="2943">2943</span>
<span id="2944">2944</span>
<span id="2945">2945</span>
<span id="2946">2946</span>
<span id="2947">2947</span>
<span id="2948">2948</span>
<span id="2949">2949</span>
<span id="2950">2950</span>
<span id="2951">2951</span>
<span id="2952">2952</span>
<span id="2953">2953</span>
<span id="2954">2954</span>
<span id="2955">2955</span>
<span id="2956">2956</span>
<span id="2957">2957</span>
<span id="2958">2958</span>
<span id="2959">2959</span>
<span id="2960">2960</span>
<span id="2961">2961</span>
<span id="2962">2962</span>
<span id="2963">2963</span>
<span id="2964">2964</span>
<span id="2965">2965</span>
<span id="2966">2966</span>
<span id="2967">2967</span>
<span id="2968">2968</span>
<span id="2969">2969</span>
<span id="2970">2970</span>
<span id="2971">2971</span>
<span id="2972">2972</span>
<span id="2973">2973</span>
<span id="2974">2974</span>
<span id="2975">2975</span>
<span id="2976">2976</span>
<span id="2977">2977</span>
<span id="2978">2978</span>
<span id="2979">2979</span>
<span id="2980">2980</span>
<span id="2981">2981</span>
<span id="2982">2982</span>
<span id="2983">2983</span>
<span id="2984">2984</span>
<span id="2985">2985</span>
<span id="2986">2986</span>
<span id="2987">2987</span>
<span id="2988">2988</span>
<span id="2989">2989</span>
<span id="2990">2990</span>
<span id="2991">2991</span>
<span id="2992">2992</span>
<span id="2993">2993</span>
<span id="2994">2994</span>
<span id="2995">2995</span>
<span id="2996">2996</span>
<span id="2997">2997</span>
<span id="2998">2998</span>
<span id="2999">2999</span>
<span id="3000">3000</span>
<span id="3001">3001</span>
<span id="3002">3002</span>
<span id="3003">3003</span>
<span id="3004">3004</span>
<span id="3005">3005</span>
<span id="3006">3006</span>
<span id="3007">3007</span>
<span id="3008">3008</span>
<span id="3009">3009</span>
<span id="3010">3010</span>
<span id="3011">3011</span>
<span id="3012">3012</span>
<span id="3013">3013</span>
<span id="3014">3014</span>
<span id="3015">3015</span>
<span id="3016">3016</span>
<span id="3017">3017</span>
<span id="3018">3018</span>
<span id="3019">3019</span>
<span id="3020">3020</span>
<span id="3021">3021</span>
<span id="3022">3022</span>
<span id="3023">3023</span>
<span id="3024">3024</span>
<span id="3025">3025</span>
<span id="3026">3026</span>
<span id="3027">3027</span>
<span id="3028">3028</span>
<span id="3029">3029</span>
<span id="3030">3030</span>
<span id="3031">3031</span>
<span id="3032">3032</span>
<span id="3033">3033</span>
<span id="3034">3034</span>
<span id="3035">3035</span>
<span id="3036">3036</span>
<span id="3037">3037</span>
<span id="3038">3038</span>
<span id="3039">3039</span>
<span id="3040">3040</span>
<span id="3041">3041</span>
<span id="3042">3042</span>
<span id="3043">3043</span>
<span id="3044">3044</span>
<span id="3045">3045</span>
<span id="3046">3046</span>
<span id="3047">3047</span>
<span id="3048">3048</span>
<span id="3049">3049</span>
<span id="3050">3050</span>
<span id="3051">3051</span>
<span id="3052">3052</span>
<span id="3053">3053</span>
<span id="3054">3054</span>
<span id="3055">3055</span>
<span id="3056">3056</span>
<span id="3057">3057</span>
<span id="3058">3058</span>
<span id="3059">3059</span>
<span id="3060">3060</span>
<span id="3061">3061</span>
<span id="3062">3062</span>
<span id="3063">3063</span>
<span id="3064">3064</span>
<span id="3065">3065</span>
<span id="3066">3066</span>
<span id="3067">3067</span>
<span id="3068">3068</span>
<span id="3069">3069</span>
<span id="3070">3070</span>
<span id="3071">3071</span>
<span id="3072">3072</span>
<span id="3073">3073</span>
<span id="3074">3074</span>
<span id="3075">3075</span>
<span id="3076">3076</span>
<span id="3077">3077</span>
<span id="3078">3078</span>
<span id="3079">3079</span>
<span id="3080">3080</span>
<span id="3081">3081</span>
<span id="3082">3082</span>
<span id="3083">3083</span>
<span id="3084">3084</span>
<span id="3085">3085</span>
<span id="3086">3086</span>
<span id="3087">3087</span>
<span id="3088">3088</span>
<span id="3089">3089</span>
<span id="3090">3090</span>
<span id="3091">3091</span>
<span id="3092">3092</span>
<span id="3093">3093</span>
<span id="3094">3094</span>
<span id="3095">3095</span>
<span id="3096">3096</span>
<span id="3097">3097</span>
<span id="3098">3098</span>
<span id="3099">3099</span>
<span id="3100">3100</span>
<span id="3101">3101</span>
<span id="3102">3102</span>
<span id="3103">3103</span>
<span id="3104">3104</span>
<span id="3105">3105</span>
<span id="3106">3106</span>
<span id="3107">3107</span>
<span id="3108">3108</span>
<span id="3109">3109</span>
<span id="3110">3110</span>
<span id="3111">3111</span>
<span id="3112">3112</span>
<span id="3113">3113</span>
<span id="3114">3114</span>
<span id="3115">3115</span>
<span id="3116">3116</span>
<span id="3117">3117</span>
<span id="3118">3118</span>
<span id="3119">3119</span>
<span id="3120">3120</span>
<span id="3121">3121</span>
<span id="3122">3122</span>
<span id="3123">3123</span>
<span id="3124">3124</span>
<span id="3125">3125</span>
<span id="3126">3126</span>
<span id="3127">3127</span>
<span id="3128">3128</span>
<span id="3129">3129</span>
<span id="3130">3130</span>
<span id="3131">3131</span>
<span id="3132">3132</span>
<span id="3133">3133</span>
<span id="3134">3134</span>
<span id="3135">3135</span>
<span id="3136">3136</span>
<span id="3137">3137</span>
<span id="3138">3138</span>
<span id="3139">3139</span>
<span id="3140">3140</span>
<span id="3141">3141</span>
<span id="3142">3142</span>
<span id="3143">3143</span>
<span id="3144">3144</span>
<span id="3145">3145</span>
<span id="3146">3146</span>
<span id="3147">3147</span>
<span id="3148">3148</span>
<span id="3149">3149</span>
<span id="3150">3150</span>
<span id="3151">3151</span>
<span id="3152">3152</span>
<span id="3153">3153</span>
<span id="3154">3154</span>
<span id="3155">3155</span>
<span id="3156">3156</span>
<span id="3157">3157</span>
<span id="3158">3158</span>
<span id="3159">3159</span>
<span id="3160">3160</span>
<span id="3161">3161</span>
<span id="3162">3162</span>
<span id="3163">3163</span>
<span id="3164">3164</span>
<span id="3165">3165</span>
<span id="3166">3166</span>
<span id="3167">3167</span>
<span id="3168">3168</span>
<span id="3169">3169</span>
<span id="3170">3170</span>
<span id="3171">3171</span>
<span id="3172">3172</span>
<span id="3173">3173</span>
<span id="3174">3174</span>
<span id="3175">3175</span>
<span id="3176">3176</span>
<span id="3177">3177</span>
<span id="3178">3178</span>
<span id="3179">3179</span>
<span id="3180">3180</span>
<span id="3181">3181</span>
<span id="3182">3182</span>
<span id="3183">3183</span>
<span id="3184">3184</span>
<span id="3185">3185</span>
<span id="3186">3186</span>
<span id="3187">3187</span>
<span id="3188">3188</span>
<span id="3189">3189</span>
<span id="3190">3190</span>
<span id="3191">3191</span>
<span id="3192">3192</span>
<span id="3193">3193</span>
<span id="3194">3194</span>
<span id="3195">3195</span>
<span id="3196">3196</span>
<span id="3197">3197</span>
<span id="3198">3198</span>
<span id="3199">3199</span>
<span id="3200">3200</span>
<span id="3201">3201</span>
<span id="3202">3202</span>
<span id="3203">3203</span>
<span id="3204">3204</span>
<span id="3205">3205</span>
<span id="3206">3206</span>
<span id="3207">3207</span>
<span id="3208">3208</span>
<span id="3209">3209</span>
<span id="3210">3210</span>
<span id="3211">3211</span>
<span id="3212">3212</span>
<span id="3213">3213</span>
<span id="3214">3214</span>
<span id="3215">3215</span>
<span id="3216">3216</span>
<span id="3217">3217</span>
<span id="3218">3218</span>
<span id="3219">3219</span>
<span id="3220">3220</span>
<span id="3221">3221</span>
<span id="3222">3222</span>
<span id="3223">3223</span>
<span id="3224">3224</span>
<span id="3225">3225</span>
<span id="3226">3226</span>
<span id="3227">3227</span>
<span id="3228">3228</span>
<span id="3229">3229</span>
<span id="3230">3230</span>
<span id="3231">3231</span>
<span id="3232">3232</span>
<span id="3233">3233</span>
<span id="3234">3234</span>
<span id="3235">3235</span>
<span id="3236">3236</span>
<span id="3237">3237</span>
<span id="3238">3238</span>
<span id="3239">3239</span>
<span id="3240">3240</span>
<span id="3241">3241</span>
<span id="3242">3242</span>
<span id="3243">3243</span>
<span id="3244">3244</span>
<span id="3245">3245</span>
<span id="3246">3246</span>
<span id="3247">3247</span>
<span id="3248">3248</span>
<span id="3249">3249</span>
<span id="3250">3250</span>
<span id="3251">3251</span>
<span id="3252">3252</span>
<span id="3253">3253</span>
<span id="3254">3254</span>
<span id="3255">3255</span>
<span id="3256">3256</span>
<span id="3257">3257</span>
<span id="3258">3258</span>
<span id="3259">3259</span>
<span id="3260">3260</span>
<span id="3261">3261</span>
<span id="3262">3262</span>
<span id="3263">3263</span>
<span id="3264">3264</span>
<span id="3265">3265</span>
<span id="3266">3266</span>
<span id="3267">3267</span>
<span id="3268">3268</span>
<span id="3269">3269</span>
<span id="3270">3270</span>
<span id="3271">3271</span>
<span id="3272">3272</span>
<span id="3273">3273</span>
<span id="3274">3274</span>
<span id="3275">3275</span>
<span id="3276">3276</span>
<span id="3277">3277</span>
<span id="3278">3278</span>
<span id="3279">3279</span>
<span id="3280">3280</span>
<span id="3281">3281</span>
<span id="3282">3282</span>
<span id="3283">3283</span>
<span id="3284">3284</span>
<span id="3285">3285</span>
<span id="3286">3286</span>
<span id="3287">3287</span>
<span id="3288">3288</span>
<span id="3289">3289</span>
<span id="3290">3290</span>
<span id="3291">3291</span>
<span id="3292">3292</span>
<span id="3293">3293</span>
<span id="3294">3294</span>
<span id="3295">3295</span>
<span id="3296">3296</span>
<span id="3297">3297</span>
<span id="3298">3298</span>
<span id="3299">3299</span>
<span id="3300">3300</span>
<span id="3301">3301</span>
<span id="3302">3302</span>
<span id="3303">3303</span>
<span id="3304">3304</span>
<span id="3305">3305</span>
<span id="3306">3306</span>
<span id="3307">3307</span>
<span id="3308">3308</span>
<span id="3309">3309</span>
<span id="3310">3310</span>
<span id="3311">3311</span>
<span id="3312">3312</span>
<span id="3313">3313</span>
<span id="3314">3314</span>
<span id="3315">3315</span>
<span id="3316">3316</span>
<span id="3317">3317</span>
<span id="3318">3318</span>
<span id="3319">3319</span>
<span id="3320">3320</span>
<span id="3321">3321</span>
<span id="3322">3322</span>
<span id="3323">3323</span>
<span id="3324">3324</span>
<span id="3325">3325</span>
<span id="3326">3326</span>
<span id="3327">3327</span>
<span id="3328">3328</span>
<span id="3329">3329</span>
<span id="3330">3330</span>
<span id="3331">3331</span>
<span id="3332">3332</span>
<span id="3333">3333</span>
<span id="3334">3334</span>
<span id="3335">3335</span>
<span id="3336">3336</span>
<span id="3337">3337</span>
<span id="3338">3338</span>
<span id="3339">3339</span>
<span id="3340">3340</span>
<span id="3341">3341</span>
<span id="3342">3342</span>
<span id="3343">3343</span>
<span id="3344">3344</span>
<span id="3345">3345</span>
<span id="3346">3346</span>
<span id="3347">3347</span>
<span id="3348">3348</span>
<span id="3349">3349</span>
<span id="3350">3350</span>
<span id="3351">3351</span>
<span id="3352">3352</span>
<span id="3353">3353</span>
<span id="3354">3354</span>
<span id="3355">3355</span>
<span id="3356">3356</span>
<span id="3357">3357</span>
<span id="3358">3358</span>
<span id="3359">3359</span>
<span id="3360">3360</span>
<span id="3361">3361</span>
<span id="3362">3362</span>
<span id="3363">3363</span>
<span id="3364">3364</span>
<span id="3365">3365</span>
<span id="3366">3366</span>
<span id="3367">3367</span>
<span id="3368">3368</span>
<span id="3369">3369</span>
<span id="3370">3370</span>
<span id="3371">3371</span>
<span id="3372">3372</span>
<span id="3373">3373</span>
<span id="3374">3374</span>
<span id="3375">3375</span>
<span id="3376">3376</span>
<span id="3377">3377</span>
<span id="3378">3378</span>
<span id="3379">3379</span>
<span id="3380">3380</span>
<span id="3381">3381</span>
<span id="3382">3382</span>
<span id="3383">3383</span>
<span id="3384">3384</span>
<span id="3385">3385</span>
<span id="3386">3386</span>
<span id="3387">3387</span>
<span id="3388">3388</span>
<span id="3389">3389</span>
<span id="3390">3390</span>
<span id="3391">3391</span>
<span id="3392">3392</span>
<span id="3393">3393</span>
<span id="3394">3394</span>
<span id="3395">3395</span>
<span id="3396">3396</span>
<span id="3397">3397</span>
<span id="3398">3398</span>
<span id="3399">3399</span>
<span id="3400">3400</span>
<span id="3401">3401</span>
<span id="3402">3402</span>
<span id="3403">3403</span>
<span id="3404">3404</span>
<span id="3405">3405</span>
<span id="3406">3406</span>
<span id="3407">3407</span>
<span id="3408">3408</span>
<span id="3409">3409</span>
<span id="3410">3410</span>
<span id="3411">3411</span>
<span id="3412">3412</span>
<span id="3413">3413</span>
<span id="3414">3414</span>
<span id="3415">3415</span>
<span id="3416">3416</span>
<span id="3417">3417</span>
<span id="3418">3418</span>
<span id="3419">3419</span>
<span id="3420">3420</span>
<span id="3421">3421</span>
<span id="3422">3422</span>
<span id="3423">3423</span>
<span id="3424">3424</span>
<span id="3425">3425</span>
<span id="3426">3426</span>
<span id="3427">3427</span>
<span id="3428">3428</span>
<span id="3429">3429</span>
<span id="3430">3430</span>
<span id="3431">3431</span>
<span id="3432">3432</span>
<span id="3433">3433</span>
<span id="3434">3434</span>
<span id="3435">3435</span>
<span id="3436">3436</span>
<span id="3437">3437</span>
<span id="3438">3438</span>
<span id="3439">3439</span>
<span id="3440">3440</span>
<span id="3441">3441</span>
<span id="3442">3442</span>
<span id="3443">3443</span>
<span id="3444">3444</span>
<span id="3445">3445</span>
<span id="3446">3446</span>
<span id="3447">3447</span>
<span id="3448">3448</span>
<span id="3449">3449</span>
<span id="3450">3450</span>
<span id="3451">3451</span>
<span id="3452">3452</span>
<span id="3453">3453</span>
<span id="3454">3454</span>
<span id="3455">3455</span>
<span id="3456">3456</span>
<span id="3457">3457</span>
<span id="3458">3458</span>
<span id="3459">3459</span>
<span id="3460">3460</span>
<span id="3461">3461</span>
<span id="3462">3462</span>
<span id="3463">3463</span>
<span id="3464">3464</span>
<span id="3465">3465</span>
<span id="3466">3466</span>
<span id="3467">3467</span>
<span id="3468">3468</span>
<span id="3469">3469</span>
<span id="3470">3470</span>
<span id="3471">3471</span>
<span id="3472">3472</span>
<span id="3473">3473</span>
<span id="3474">3474</span>
<span id="3475">3475</span>
<span id="3476">3476</span>
<span id="3477">3477</span>
<span id="3478">3478</span>
<span id="3479">3479</span>
<span id="3480">3480</span>
<span id="3481">3481</span>
<span id="3482">3482</span>
<span id="3483">3483</span>
<span id="3484">3484</span>
<span id="3485">3485</span>
<span id="3486">3486</span>
<span id="3487">3487</span>
<span id="3488">3488</span>
<span id="3489">3489</span>
<span id="3490">3490</span>
<span id="3491">3491</span>
<span id="3492">3492</span>
<span id="3493">3493</span>
<span id="3494">3494</span>
<span id="3495">3495</span>
<span id="3496">3496</span>
<span id="3497">3497</span>
<span id="3498">3498</span>
<span id="3499">3499</span>
<span id="3500">3500</span>
<span id="3501">3501</span>
<span id="3502">3502</span>
<span id="3503">3503</span>
<span id="3504">3504</span>
<span id="3505">3505</span>
<span id="3506">3506</span>
<span id="3507">3507</span>
<span id="3508">3508</span>
<span id="3509">3509</span>
<span id="3510">3510</span>
<span id="3511">3511</span>
<span id="3512">3512</span>
<span id="3513">3513</span>
<span id="3514">3514</span>
<span id="3515">3515</span>
<span id="3516">3516</span>
<span id="3517">3517</span>
<span id="3518">3518</span>
<span id="3519">3519</span>
<span id="3520">3520</span>
<span id="3521">3521</span>
<span id="3522">3522</span>
<span id="3523">3523</span>
<span id="3524">3524</span>
<span id="3525">3525</span>
<span id="3526">3526</span>
<span id="3527">3527</span>
<span id="3528">3528</span>
<span id="3529">3529</span>
<span id="3530">3530</span>
<span id="3531">3531</span>
<span id="3532">3532</span>
<span id="3533">3533</span>
<span id="3534">3534</span>
<span id="3535">3535</span>
<span id="3536">3536</span>
<span id="3537">3537</span>
<span id="3538">3538</span>
<span id="3539">3539</span>
<span id="3540">3540</span>
<span id="3541">3541</span>
<span id="3542">3542</span>
<span id="3543">3543</span>
<span id="3544">3544</span>
<span id="3545">3545</span>
<span id="3546">3546</span>
<span id="3547">3547</span>
<span id="3548">3548</span>
<span id="3549">3549</span>
<span id="3550">3550</span>
<span id="3551">3551</span>
<span id="3552">3552</span>
<span id="3553">3553</span>
<span id="3554">3554</span>
<span id="3555">3555</span>
<span id="3556">3556</span>
<span id="3557">3557</span>
<span id="3558">3558</span>
<span id="3559">3559</span>
<span id="3560">3560</span>
<span id="3561">3561</span>
<span id="3562">3562</span>
<span id="3563">3563</span>
<span id="3564">3564</span>
<span id="3565">3565</span>
<span id="3566">3566</span>
<span id="3567">3567</span>
<span id="3568">3568</span>
<span id="3569">3569</span>
<span id="3570">3570</span>
<span id="3571">3571</span>
<span id="3572">3572</span>
<span id="3573">3573</span>
<span id="3574">3574</span>
<span id="3575">3575</span>
<span id="3576">3576</span>
<span id="3577">3577</span>
<span id="3578">3578</span>
<span id="3579">3579</span>
<span id="3580">3580</span>
<span id="3581">3581</span>
<span id="3582">3582</span>
<span id="3583">3583</span>
<span id="3584">3584</span>
<span id="3585">3585</span>
<span id="3586">3586</span>
<span id="3587">3587</span>
<span id="3588">3588</span>
<span id="3589">3589</span>
<span id="3590">3590</span>
<span id="3591">3591</span>
<span id="3592">3592</span>
<span id="3593">3593</span>
<span id="3594">3594</span>
<span id="3595">3595</span>
<span id="3596">3596</span>
<span id="3597">3597</span>
<span id="3598">3598</span>
<span id="3599">3599</span>
<span id="3600">3600</span>
<span id="3601">3601</span>
<span id="3602">3602</span>
<span id="3603">3603</span>
<span id="3604">3604</span>
<span id="3605">3605</span>
<span id="3606">3606</span>
<span id="3607">3607</span>
<span id="3608">3608</span>
<span id="3609">3609</span>
<span id="3610">3610</span>
<span id="3611">3611</span>
<span id="3612">3612</span>
<span id="3613">3613</span>
<span id="3614">3614</span>
<span id="3615">3615</span>
<span id="3616">3616</span>
<span id="3617">3617</span>
<span id="3618">3618</span>
<span id="3619">3619</span>
<span id="3620">3620</span>
<span id="3621">3621</span>
<span id="3622">3622</span>
<span id="3623">3623</span>
<span id="3624">3624</span>
<span id="3625">3625</span>
<span id="3626">3626</span>
<span id="3627">3627</span>
<span id="3628">3628</span>
<span id="3629">3629</span>
<span id="3630">3630</span>
<span id="3631">3631</span>
<span id="3632">3632</span>
<span id="3633">3633</span>
<span id="3634">3634</span>
<span id="3635">3635</span>
<span id="3636">3636</span>
<span id="3637">3637</span>
<span id="3638">3638</span>
<span id="3639">3639</span>
<span id="3640">3640</span>
<span id="3641">3641</span>
<span id="3642">3642</span>
<span id="3643">3643</span>
<span id="3644">3644</span>
<span id="3645">3645</span>
<span id="3646">3646</span>
<span id="3647">3647</span>
<span id="3648">3648</span>
<span id="3649">3649</span>
<span id="3650">3650</span>
<span id="3651">3651</span>
<span id="3652">3652</span>
<span id="3653">3653</span>
<span id="3654">3654</span>
<span id="3655">3655</span>
<span id="3656">3656</span>
<span id="3657">3657</span>
<span id="3658">3658</span>
<span id="3659">3659</span>
<span id="3660">3660</span>
<span id="3661">3661</span>
<span id="3662">3662</span>
<span id="3663">3663</span>
<span id="3664">3664</span>
<span id="3665">3665</span>
<span id="3666">3666</span>
<span id="3667">3667</span>
<span id="3668">3668</span>
<span id="3669">3669</span>
<span id="3670">3670</span>
<span id="3671">3671</span>
<span id="3672">3672</span>
<span id="3673">3673</span>
<span id="3674">3674</span>
<span id="3675">3675</span>
<span id="3676">3676</span>
<span id="3677">3677</span>
<span id="3678">3678</span>
<span id="3679">3679</span>
<span id="3680">3680</span>
<span id="3681">3681</span>
<span id="3682">3682</span>
<span id="3683">3683</span>
<span id="3684">3684</span>
<span id="3685">3685</span>
<span id="3686">3686</span>
<span id="3687">3687</span>
<span id="3688">3688</span>
<span id="3689">3689</span>
<span id="3690">3690</span>
<span id="3691">3691</span>
<span id="3692">3692</span>
<span id="3693">3693</span>
<span id="3694">3694</span>
<span id="3695">3695</span>
<span id="3696">3696</span>
<span id="3697">3697</span>
<span id="3698">3698</span>
<span id="3699">3699</span>
<span id="3700">3700</span>
<span id="3701">3701</span>
<span id="3702">3702</span>
<span id="3703">3703</span>
<span id="3704">3704</span>
<span id="3705">3705</span>
<span id="3706">3706</span>
<span id="3707">3707</span>
<span id="3708">3708</span>
<span id="3709">3709</span>
<span id="3710">3710</span>
<span id="3711">3711</span>
<span id="3712">3712</span>
<span id="3713">3713</span>
<span id="3714">3714</span>
<span id="3715">3715</span>
<span id="3716">3716</span>
<span id="3717">3717</span>
<span id="3718">3718</span>
<span id="3719">3719</span>
<span id="3720">3720</span>
<span id="3721">3721</span>
<span id="3722">3722</span>
<span id="3723">3723</span>
<span id="3724">3724</span>
<span id="3725">3725</span>
<span id="3726">3726</span>
<span id="3727">3727</span>
<span id="3728">3728</span>
<span id="3729">3729</span>
<span id="3730">3730</span>
<span id="3731">3731</span>
<span id="3732">3732</span>
<span id="3733">3733</span>
<span id="3734">3734</span>
<span id="3735">3735</span>
<span id="3736">3736</span>
<span id="3737">3737</span>
<span id="3738">3738</span>
<span id="3739">3739</span>
<span id="3740">3740</span>
<span id="3741">3741</span>
<span id="3742">3742</span>
<span id="3743">3743</span>
<span id="3744">3744</span>
<span id="3745">3745</span>
<span id="3746">3746</span>
<span id="3747">3747</span>
<span id="3748">3748</span>
<span id="3749">3749</span>
<span id="3750">3750</span>
<span id="3751">3751</span>
<span id="3752">3752</span>
<span id="3753">3753</span>
<span id="3754">3754</span>
<span id="3755">3755</span>
<span id="3756">3756</span>
<span id="3757">3757</span>
<span id="3758">3758</span>
<span id="3759">3759</span>
<span id="3760">3760</span>
<span id="3761">3761</span>
<span id="3762">3762</span>
<span id="3763">3763</span>
<span id="3764">3764</span>
<span id="3765">3765</span>
<span id="3766">3766</span>
<span id="3767">3767</span>
<span id="3768">3768</span>
<span id="3769">3769</span>
<span id="3770">3770</span>
<span id="3771">3771</span>
<span id="3772">3772</span>
<span id="3773">3773</span>
<span id="3774">3774</span>
<span id="3775">3775</span>
<span id="3776">3776</span>
<span id="3777">3777</span>
<span id="3778">3778</span>
<span id="3779">3779</span>
<span id="3780">3780</span>
<span id="3781">3781</span>
<span id="3782">3782</span>
<span id="3783">3783</span>
<span id="3784">3784</span>
<span id="3785">3785</span>
<span id="3786">3786</span>
<span id="3787">3787</span>
<span id="3788">3788</span>
<span id="3789">3789</span>
<span id="3790">3790</span>
<span id="3791">3791</span>
<span id="3792">3792</span>
<span id="3793">3793</span>
<span id="3794">3794</span>
<span id="3795">3795</span>
<span id="3796">3796</span>
<span id="3797">3797</span>
<span id="3798">3798</span>
<span id="3799">3799</span>
<span id="3800">3800</span>
<span id="3801">3801</span>
<span id="3802">3802</span>
<span id="3803">3803</span>
<span id="3804">3804</span>
<span id="3805">3805</span>
<span id="3806">3806</span>
<span id="3807">3807</span>
<span id="3808">3808</span>
<span id="3809">3809</span>
<span id="3810">3810</span>
<span id="3811">3811</span>
<span id="3812">3812</span>
<span id="3813">3813</span>
<span id="3814">3814</span>
<span id="3815">3815</span>
<span id="3816">3816</span>
<span id="3817">3817</span>
<span id="3818">3818</span>
<span id="3819">3819</span>
<span id="3820">3820</span>
<span id="3821">3821</span>
<span id="3822">3822</span>
<span id="3823">3823</span>
<span id="3824">3824</span>
<span id="3825">3825</span>
<span id="3826">3826</span>
<span id="3827">3827</span>
<span id="3828">3828</span>
<span id="3829">3829</span>
<span id="3830">3830</span>
<span id="3831">3831</span>
<span id="3832">3832</span>
<span id="3833">3833</span>
<span id="3834">3834</span>
<span id="3835">3835</span>
<span id="3836">3836</span>
<span id="3837">3837</span>
<span id="3838">3838</span>
<span id="3839">3839</span>
<span id="3840">3840</span>
<span id="3841">3841</span>
<span id="3842">3842</span>
<span id="3843">3843</span>
<span id="3844">3844</span>
<span id="3845">3845</span>
<span id="3846">3846</span>
<span id="3847">3847</span>
<span id="3848">3848</span>
<span id="3849">3849</span>
<span id="3850">3850</span>
<span id="3851">3851</span>
<span id="3852">3852</span>
<span id="3853">3853</span>
<span id="3854">3854</span>
<span id="3855">3855</span>
<span id="3856">3856</span>
<span id="3857">3857</span>
<span id="3858">3858</span>
<span id="3859">3859</span>
<span id="3860">3860</span>
<span id="3861">3861</span>
<span id="3862">3862</span>
</pre><pre class='rust '>
<span class='comment'>//</span>
<span class='comment'>// This file was auto-generated, do not edit directly</span>
<span class='comment'>//</span>

<span class='comment'>/*
Copyright © 2008-2011 Kristian Høgsberg
    Copyright © 2010-2011 Intel Corporation
    Copyright © 2012-2013 Collabora, Ltd.

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation files
    (the &quot;Software&quot;), to deal in the Software without restriction,
    including without limitation the rights to use, copy, modify, merge,
    publish, distribute, sublicense, and/or sell copies of the Software,
    and to permit persons to whom the Software is furnished to do so,
    subject to the following conditions:

    The above copyright notice and this permission notice (including the
    next paragraph) shall be included in all copies or substantial
    portions of the Software.

    THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT.  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS
    BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
    ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
    CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    SOFTWARE.
*/</span>

<span class='kw'>use</span> <span class='ident'>wayland_sys</span>::<span class='ident'>common</span>::<span class='op'>*</span>;
<span class='kw'>use</span> <span class='ident'>wayland_sys</span>::<span class='ident'>client</span>::<span class='op'>*</span>;
<span class='kw'>use</span> {<span class='ident'>Proxy</span>, <span class='ident'>ProxyId</span>, <span class='ident'>wrap_proxy</span>};
<span class='kw'>use</span> <span class='ident'>events</span>::{<span class='ident'>EventIterator</span>, <span class='ident'>EventFifo</span>, <span class='ident'>get_eventiter_internals</span>, <span class='ident'>eventiter_from_internals</span>};
<span class='comment'>// update if needed to the appropriate file</span>
<span class='kw'>use</span> <span class='kw'>super</span>::<span class='ident'>interfaces</span>::<span class='op'>*</span>;

<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>ffi</span>::{<span class='ident'>CString</span>, <span class='ident'>CStr</span>};
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>ptr</span>;
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>sync</span>::<span class='ident'>Arc</span>;
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>sync</span>::<span class='ident'>atomic</span>::{<span class='ident'>AtomicBool</span>, <span class='ident'>Ordering</span>};
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>os</span>::<span class='ident'>raw</span>::{<span class='ident'>c_void</span>, <span class='ident'>c_char</span>};
<span class='doccomment'>/// An event generated by the protocol wayland.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Each variant is composed of a `ProxyId` reffering to the proxy object</span>
<span class='doccomment'>/// and of the event data itself.</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WaylandProtocolEvent</span> {
    <span class='ident'>WlDisplay</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlDisplayEvent</span>),
    <span class='ident'>WlRegistry</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlRegistryEvent</span>),
    <span class='ident'>WlCallback</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlCallbackEvent</span>),
    <span class='ident'>WlShm</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlShmEvent</span>),
    <span class='ident'>WlBuffer</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlBufferEvent</span>),
    <span class='ident'>WlDataOffer</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlDataOfferEvent</span>),
    <span class='ident'>WlDataSource</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlDataSourceEvent</span>),
    <span class='ident'>WlDataDevice</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlDataDeviceEvent</span>),
    <span class='ident'>WlShellSurface</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlShellSurfaceEvent</span>),
    <span class='ident'>WlSurface</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlSurfaceEvent</span>),
    <span class='ident'>WlSeat</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlSeatEvent</span>),
    <span class='ident'>WlPointer</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlPointerEvent</span>),
    <span class='ident'>WlKeyboard</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlKeyboardEvent</span>),
    <span class='ident'>WlTouch</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlTouchEvent</span>),
    <span class='ident'>WlOutput</span>(<span class='ident'>ProxyId</span>, <span class='ident'>WlOutputEvent</span>),
}

<span class='kw'>type</span> <span class='ident'>wayland_dispatcher_implem</span> <span class='op'>=</span> <span class='kw'>fn</span>(<span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>u32</span>, <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span>;

<span class='kw'>extern</span> <span class='string'>&quot;C&quot;</span> <span class='kw'>fn</span> <span class='ident'>event_dispatcher</span>(<span class='ident'>implem</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, _: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_message</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) {
    <span class='kw'>let</span> <span class='ident'>userdata</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_get_user_data</span>, <span class='ident'>proxy</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) } <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>, <span class='ident'>AtomicBool</span>);
    <span class='kw'>if</span> <span class='ident'>userdata</span>.<span class='ident'>is_null</span>() { <span class='kw'>return</span>; }
    <span class='kw'>let</span> <span class='ident'>fifo</span>: <span class='kw-2'>&amp;</span>(<span class='ident'>EventFifo</span>, <span class='ident'>AtomicBool</span>) <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='ident'>userdata</span> };
    <span class='kw'>if</span> <span class='op'>!</span><span class='ident'>fifo</span>.<span class='number'>1</span>.<span class='ident'>load</span>(<span class='ident'>Ordering</span>::<span class='ident'>SeqCst</span>) { <span class='kw'>return</span>; }
    <span class='kw'>let</span> <span class='ident'>implem</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>transmute</span>::<span class='op'>&lt;</span>_, <span class='ident'>wayland_dispatcher_implem</span><span class='op'>&gt;</span>(<span class='ident'>implem</span>) };
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='ident'>implem</span>(<span class='ident'>proxy</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>, <span class='ident'>args</span>);
    <span class='kw'>if</span> <span class='kw'>let</span> <span class='prelude-val'>Some</span>(<span class='ident'>evt</span>) <span class='op'>=</span> <span class='ident'>event</span> {
        <span class='ident'>fifo</span>.<span class='number'>0</span>.<span class='ident'>push</span>(::<span class='ident'>Event</span>::<span class='ident'>Wayland</span>(<span class='ident'>evt</span>));
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_display</span>
<span class='comment'>//</span>

<span class='doccomment'>/// core global object</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The core global object.  This is a special singleton object.  It</span>
<span class='doccomment'>/// is used for internal Wayland protocol features.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlDisplay</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlDisplay</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlDisplay</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlDisplay</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_display_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_display&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlDisplay</span> {
        <span class='ident'>WlDisplay</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlDisplay</span> {
        <span class='ident'>WlDisplay</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlDisplay</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_display::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='doccomment'>/// global error values</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// These errors are global and can be emitted in response to any</span>
<span class='doccomment'>/// server request.</span>
<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlDisplayError</span> {
    <span class='doccomment'>/// server couldn&#39;t find object</span>
    <span class='ident'>InvalidObject</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='doccomment'>/// method doesn&#39;t exist on the specified interface</span>
    <span class='ident'>InvalidMethod</span> <span class='op'>=</span> <span class='number'>1</span>,
    <span class='doccomment'>/// server is out of memory</span>
    <span class='ident'>NoMemory</span> <span class='op'>=</span> <span class='number'>2</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_display_error_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlDisplayError</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlDisplayError</span>::<span class='ident'>InvalidObject</span>),
        <span class='number'>1</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlDisplayError</span>::<span class='ident'>InvalidMethod</span>),
        <span class='number'>2</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlDisplayError</span>::<span class='ident'>NoMemory</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='comment'>// wl_display opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_DISPLAY_SYNC</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_DISPLAY_GET_REGISTRY</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlDisplayEvent</span> {
    <span class='doccomment'>/// fatal error event</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The error event is sent out when a fatal (non-recoverable)</span>
    <span class='doccomment'>/// error has occurred.  The object_id argument is the object</span>
    <span class='doccomment'>/// where the error occurred, most often in response to a request</span>
    <span class='doccomment'>/// to that object.  The code identifies the error and is defined</span>
    <span class='doccomment'>/// by the object interface.  As such, each interface defines its</span>
    <span class='doccomment'>/// own set of error codes.  The message is an brief description</span>
    <span class='doccomment'>/// of the error, for (debugging) convenience.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: object_id, code, message,</span>
    <span class='ident'>Error</span>(<span class='ident'>ProxyId</span>,<span class='ident'>u32</span>,<span class='ident'>String</span>,),
    <span class='doccomment'>/// acknowledge object ID deletion</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This event is used internally by the object ID management</span>
    <span class='doccomment'>/// logic.  When a client deletes an object, the server will send</span>
    <span class='doccomment'>/// this event to acknowledge that it has seen the delete request.</span>
    <span class='doccomment'>/// When the client receive this event, it will know that it can</span>
    <span class='doccomment'>/// safely reuse the object ID.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: id,</span>
    <span class='ident'>DeleteId</span>(<span class='ident'>u32</span>,),
}

<span class='kw'>fn</span> <span class='ident'>wl_display_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wrap_proxy</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>))};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>String</span>::<span class='ident'>from_utf8_lossy</span>(<span class='ident'>CStr</span>::<span class='ident'>from_ptr</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_char</span>)).<span class='ident'>to_bytes</span>()).<span class='ident'>into_owned</span>()};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlDisplayEvent</span>::<span class='ident'>Error</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,))
        },
        <span class='number'>1</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlDisplayEvent</span>::<span class='ident'>DeleteId</span>(<span class='ident'>arg_0</span>,))
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlDisplay</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlDisplay</span> {

    <span class='doccomment'>/// asynchronous roundtrip</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The sync request asks the server to emit the &#39;done&#39; event</span>
    <span class='doccomment'>/// on the returned wl_callback object.  Since requests are</span>
    <span class='doccomment'>/// handled in-order and events are delivered in-order, this can</span>
    <span class='doccomment'>/// be used as a barrier to ensure all previous requests and the</span>
    <span class='doccomment'>/// resulting events have been handled.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The object returned by this request will be destroyed by the</span>
    <span class='doccomment'>/// compositor after the callback is fired and as such the client must not</span>
    <span class='doccomment'>/// attempt to use it after that point.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The callback_data passed in the callback is the event serial.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>sync</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlCallback</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_DISPLAY_SYNC</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_callback_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlCallback</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }

    <span class='doccomment'>/// get global registry object</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request creates a registry object that allows the client</span>
    <span class='doccomment'>/// to list and bind the global objects available from the</span>
    <span class='doccomment'>/// compositor.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>get_registry</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlRegistry</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_DISPLAY_GET_REGISTRY</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_registry_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlRegistry</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }
}

<span class='comment'>//</span>
<span class='comment'>// interface wl_registry</span>
<span class='comment'>//</span>

<span class='doccomment'>/// global registry object</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The global registry object.  The server has a number of global</span>
<span class='doccomment'>/// objects that are available to all clients.  These objects</span>
<span class='doccomment'>/// typically represent an actual object in the server (for example,</span>
<span class='doccomment'>/// an input device) or they are singleton objects that provide</span>
<span class='doccomment'>/// extension functionality.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// When a client creates a registry object, the registry object</span>
<span class='doccomment'>/// will emit a global event for each global currently in the</span>
<span class='doccomment'>/// registry.  Globals come and go as a result of device or</span>
<span class='doccomment'>/// monitor hotplugs, reconfiguration or other events, and the</span>
<span class='doccomment'>/// registry will send out global and global_remove events to</span>
<span class='doccomment'>/// keep the client up to date with the changes.  To mark the end</span>
<span class='doccomment'>/// of the initial burst of events, the client can use the</span>
<span class='doccomment'>/// wl_display.sync request immediately after calling</span>
<span class='doccomment'>/// wl_display.get_registry.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A client can bind to a global object by using the bind</span>
<span class='doccomment'>/// request.  This creates a client-side handle that lets the object</span>
<span class='doccomment'>/// emit events to the client and lets the client invoke requests on</span>
<span class='doccomment'>/// the object.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlRegistry</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlRegistry</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlRegistry</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlRegistry</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_registry_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_registry&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlRegistry</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_registry_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlRegistry</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlRegistry</span> {
        <span class='ident'>WlRegistry</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlRegistry</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_registry::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='comment'>// wl_registry opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_REGISTRY_BIND</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlRegistryEvent</span> {
    <span class='doccomment'>/// announce global object</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Notify the client of global objects.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The event notifies the client that a global object with</span>
    <span class='doccomment'>/// the given name is now available, and it implements the</span>
    <span class='doccomment'>/// given version of the given interface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: name, interface, version,</span>
    <span class='ident'>Global</span>(<span class='ident'>u32</span>,<span class='ident'>String</span>,<span class='ident'>u32</span>,),
    <span class='doccomment'>/// announce removal of global object</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Notify the client of removed global objects.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This event notifies the client that the global identified</span>
    <span class='doccomment'>/// by name is no longer available.  If the client bound to</span>
    <span class='doccomment'>/// the global using the bind request, the client should now</span>
    <span class='doccomment'>/// destroy that object.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The object remains valid and requests to the object will be</span>
    <span class='doccomment'>/// ignored until the client destroys it, to avoid races between</span>
    <span class='doccomment'>/// the global going away and a client sending a request to it.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: name,</span>
    <span class='ident'>GlobalRemove</span>(<span class='ident'>u32</span>,),
}

<span class='kw'>fn</span> <span class='ident'>wl_registry_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>String</span>::<span class='ident'>from_utf8_lossy</span>(<span class='ident'>CStr</span>::<span class='ident'>from_ptr</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_char</span>)).<span class='ident'>to_bytes</span>()).<span class='ident'>into_owned</span>()};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlRegistryEvent</span>::<span class='ident'>Global</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,))
        },
        <span class='number'>1</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlRegistryEvent</span>::<span class='ident'>GlobalRemove</span>(<span class='ident'>arg_0</span>,))
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlRegistry</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlRegistry</span> {

    <span class='doccomment'>/// bind an object to the display</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Binds a new, client-created object to the server using the</span>
    <span class='doccomment'>/// specified name as the identifier.</span>
    <span class='kw'>pub</span> <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>bind</span><span class='op'>&lt;</span><span class='ident'>T</span>: <span class='ident'>Proxy</span><span class='op'>&gt;</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>name</span>: <span class='ident'>u32</span>,<span class='ident'>version</span>: <span class='ident'>u32</span>,) <span class='op'>-&gt;</span> <span class='ident'>T</span> {
        <span class='kw'>if</span> <span class='ident'>version</span> <span class='op'>&gt;</span> <span class='op'>&lt;</span><span class='ident'>T</span> <span class='kw'>as</span> <span class='ident'>Proxy</span><span class='op'>&gt;</span>::<span class='ident'>version</span>() {
            <span class='macro'>panic</span><span class='macro'>!</span>(<span class='string'>&quot;Tried to bind interface {} with version {} while it is only supported up to {}.&quot;</span>, <span class='op'>&lt;</span><span class='ident'>T</span> <span class='kw'>as</span> <span class='ident'>Proxy</span><span class='op'>&gt;</span>::<span class='ident'>interface_name</span>(), <span class='ident'>version</span>, <span class='op'>&lt;</span><span class='ident'>T</span> <span class='kw'>as</span> <span class='ident'>Proxy</span><span class='op'>&gt;</span>::<span class='ident'>version</span>())
        }
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_REGISTRY_BIND</span>, <span class='op'>&lt;</span><span class='ident'>T</span> <span class='kw'>as</span> <span class='ident'>Proxy</span><span class='op'>&gt;</span>::<span class='ident'>interface</span>()
           , <span class='ident'>name</span>, (<span class='op'>*</span><span class='op'>&lt;</span><span class='ident'>T</span> <span class='kw'>as</span> <span class='ident'>Proxy</span><span class='op'>&gt;</span>::<span class='ident'>interface</span>()).<span class='ident'>name</span>, <span class='ident'>version</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>T</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlRegistry</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_callback</span>
<span class='comment'>//</span>

<span class='doccomment'>/// callback object</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Clients can handle the &#39;done&#39; event to get notified when</span>
<span class='doccomment'>/// the related request is done.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlCallback</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlCallback</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlCallback</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlCallback</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_callback_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_callback&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlCallback</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_callback_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlCallback</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlCallback</span> {
        <span class='ident'>WlCallback</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlCallback</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_callback::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='comment'>// wl_callback opcodes</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlCallbackEvent</span> {
    <span class='doccomment'>/// done event</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Notify the client when the related request is done.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: callback_data,</span>
    <span class='ident'>Done</span>(<span class='ident'>u32</span>,),
}

<span class='kw'>fn</span> <span class='ident'>wl_callback_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlCallbackEvent</span>::<span class='ident'>Done</span>(<span class='ident'>arg_0</span>,))
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlCallback</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlCallback</span> {
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlCallback</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_compositor</span>
<span class='comment'>//</span>

<span class='doccomment'>/// the compositor singleton</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A compositor.  This object is a singleton global.  The</span>
<span class='doccomment'>/// compositor is in charge of combining the contents of multiple</span>
<span class='doccomment'>/// surfaces into one displayable output.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlCompositor</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlCompositor</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlCompositor</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlCompositor</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_compositor_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_compositor&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>3</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlCompositor</span> {
        <span class='ident'>WlCompositor</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlCompositor</span> {
        <span class='ident'>WlCompositor</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlCompositor</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_compositor::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='comment'>// wl_compositor opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_COMPOSITOR_CREATE_SURFACE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_COMPOSITOR_CREATE_REGION</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;

<span class='kw'>impl</span> <span class='ident'>WlCompositor</span> {

    <span class='doccomment'>/// create new surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Ask the compositor to create a new surface.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>create_surface</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlSurface</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_COMPOSITOR_CREATE_SURFACE</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_surface_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlSurface</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }

    <span class='doccomment'>/// create new region</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Ask the compositor to create a new region.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>create_region</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlRegion</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_COMPOSITOR_CREATE_REGION</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_region_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlRegion</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlCompositor</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_shm_pool</span>
<span class='comment'>//</span>

<span class='doccomment'>/// a shared memory pool</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The wl_shm_pool object encapsulates a piece of memory shared</span>
<span class='doccomment'>/// between the compositor and client.  Through the wl_shm_pool</span>
<span class='doccomment'>/// object, the client can allocate shared memory wl_buffer objects.</span>
<span class='doccomment'>/// All objects created through the same pool share the same</span>
<span class='doccomment'>/// underlying mapped memory. Reusing the mapped memory avoids the</span>
<span class='doccomment'>/// setup/teardown overhead and is useful when interactively resizing</span>
<span class='doccomment'>/// a surface or for many small buffers.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlShmPool</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlShmPool</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlShmPool</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlShmPool</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_shm_pool_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_shm_pool&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlShmPool</span> {
        <span class='ident'>WlShmPool</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlShmPool</span> {
        <span class='ident'>WlShmPool</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlShmPool</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_shm_pool::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='comment'>// wl_shm_pool opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_SHM_POOL_CREATE_BUFFER</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_SHM_POOL_DESTROY</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;
<span class='kw'>const</span> <span class='ident'>WL_SHM_POOL_RESIZE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>2</span>;

<span class='kw'>impl</span> <span class='ident'>WlShmPool</span> {

    <span class='doccomment'>/// create a buffer from the pool</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Create a wl_buffer object from the pool.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The buffer is created offset bytes into the pool and has</span>
    <span class='doccomment'>/// width and height as specified.  The stride arguments specifies</span>
    <span class='doccomment'>/// the number of bytes from beginning of one row to the beginning</span>
    <span class='doccomment'>/// of the next.  The format is the pixel format of the buffer and</span>
    <span class='doccomment'>/// must be one of those advertised through the wl_shm.format event.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A buffer will keep a reference to the pool it was created from</span>
    <span class='doccomment'>/// so it is valid to destroy the pool immediately after creating</span>
    <span class='doccomment'>/// a buffer from it.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>create_buffer</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>offset</span>: <span class='ident'>i32</span>, <span class='ident'>width</span>: <span class='ident'>i32</span>, <span class='ident'>height</span>: <span class='ident'>i32</span>, <span class='ident'>stride</span>: <span class='ident'>i32</span>, <span class='ident'>format</span>: <span class='ident'>u32</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlBuffer</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHM_POOL_CREATE_BUFFER</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_buffer_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>(), <span class='ident'>offset</span>, <span class='ident'>width</span>, <span class='ident'>height</span>, <span class='ident'>stride</span>, <span class='ident'>format</span>) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlBuffer</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }

    <span class='doccomment'>/// destroy the pool</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Destroy the shared memory pool.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The mmapped memory will be released when all</span>
    <span class='doccomment'>/// buffers that have been created from this pool</span>
    <span class='doccomment'>/// are gone.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>destroy</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHM_POOL_DESTROY</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }

    <span class='doccomment'>/// change the size of the pool mapping</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request will cause the server to remap the backing memory</span>
    <span class='doccomment'>/// for the pool from the file descriptor passed when the pool was</span>
    <span class='doccomment'>/// created, but using the new size.  This request can only be</span>
    <span class='doccomment'>/// used to make the pool bigger.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>resize</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>size</span>: <span class='ident'>i32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHM_POOL_RESIZE</span>
           , <span class='ident'>size</span>) };
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlShmPool</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_shm</span>
<span class='comment'>//</span>

<span class='doccomment'>/// shared memory support</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A global singleton object that provides support for shared</span>
<span class='doccomment'>/// memory.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Clients can create wl_shm_pool objects using the create_pool</span>
<span class='doccomment'>/// request.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// At connection setup time, the wl_shm object emits one or more</span>
<span class='doccomment'>/// format events to inform clients about the valid pixel formats</span>
<span class='doccomment'>/// that can be used for buffers.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlShm</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlShm</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlShm</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlShm</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_shm_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_shm&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlShm</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_shm_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlShm</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlShm</span> {
        <span class='ident'>WlShm</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlShm</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_shm::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='doccomment'>/// wl_shm error values</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// These errors can be emitted in response to wl_shm requests.</span>
<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlShmError</span> {
    <span class='doccomment'>/// buffer format is not known</span>
    <span class='ident'>InvalidFormat</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='doccomment'>/// invalid size or stride during pool or buffer creation</span>
    <span class='ident'>InvalidStride</span> <span class='op'>=</span> <span class='number'>1</span>,
    <span class='doccomment'>/// mmapping the file descriptor failed</span>
    <span class='ident'>InvalidFd</span> <span class='op'>=</span> <span class='number'>2</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_shm_error_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlShmError</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmError</span>::<span class='ident'>InvalidFormat</span>),
        <span class='number'>1</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmError</span>::<span class='ident'>InvalidStride</span>),
        <span class='number'>2</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmError</span>::<span class='ident'>InvalidFd</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='doccomment'>/// pixel formats</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// This describes the memory layout of an individual pixel.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// All renderers should support argb8888 and xrgb8888 but any other</span>
<span class='doccomment'>/// formats are optional and may not be supported by the particular</span>
<span class='doccomment'>/// renderer in use.</span>
<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlShmFormat</span> {
    <span class='doccomment'>/// 32-bit ARGB format</span>
    <span class='ident'>Argb8888</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='doccomment'>/// 32-bit RGB format</span>
    <span class='ident'>Xrgb8888</span> <span class='op'>=</span> <span class='number'>1</span>,
    <span class='ident'>C8</span> <span class='op'>=</span> <span class='number'>0x20203843</span>,
    <span class='ident'>Rgb332</span> <span class='op'>=</span> <span class='number'>0x38424752</span>,
    <span class='ident'>Bgr233</span> <span class='op'>=</span> <span class='number'>0x38524742</span>,
    <span class='ident'>Xrgb4444</span> <span class='op'>=</span> <span class='number'>0x32315258</span>,
    <span class='ident'>Xbgr4444</span> <span class='op'>=</span> <span class='number'>0x32314258</span>,
    <span class='ident'>Rgbx4444</span> <span class='op'>=</span> <span class='number'>0x32315852</span>,
    <span class='ident'>Bgrx4444</span> <span class='op'>=</span> <span class='number'>0x32315842</span>,
    <span class='ident'>Argb4444</span> <span class='op'>=</span> <span class='number'>0x32315241</span>,
    <span class='ident'>Abgr4444</span> <span class='op'>=</span> <span class='number'>0x32314241</span>,
    <span class='ident'>Rgba4444</span> <span class='op'>=</span> <span class='number'>0x32314152</span>,
    <span class='ident'>Bgra4444</span> <span class='op'>=</span> <span class='number'>0x32314142</span>,
    <span class='ident'>Xrgb1555</span> <span class='op'>=</span> <span class='number'>0x35315258</span>,
    <span class='ident'>Xbgr1555</span> <span class='op'>=</span> <span class='number'>0x35314258</span>,
    <span class='ident'>Rgbx5551</span> <span class='op'>=</span> <span class='number'>0x35315852</span>,
    <span class='ident'>Bgrx5551</span> <span class='op'>=</span> <span class='number'>0x35315842</span>,
    <span class='ident'>Argb1555</span> <span class='op'>=</span> <span class='number'>0x35315241</span>,
    <span class='ident'>Abgr1555</span> <span class='op'>=</span> <span class='number'>0x35314241</span>,
    <span class='ident'>Rgba5551</span> <span class='op'>=</span> <span class='number'>0x35314152</span>,
    <span class='ident'>Bgra5551</span> <span class='op'>=</span> <span class='number'>0x35314142</span>,
    <span class='ident'>Rgb565</span> <span class='op'>=</span> <span class='number'>0x36314752</span>,
    <span class='ident'>Bgr565</span> <span class='op'>=</span> <span class='number'>0x36314742</span>,
    <span class='ident'>Rgb888</span> <span class='op'>=</span> <span class='number'>0x34324752</span>,
    <span class='ident'>Bgr888</span> <span class='op'>=</span> <span class='number'>0x34324742</span>,
    <span class='ident'>Xbgr8888</span> <span class='op'>=</span> <span class='number'>0x34324258</span>,
    <span class='ident'>Rgbx8888</span> <span class='op'>=</span> <span class='number'>0x34325852</span>,
    <span class='ident'>Bgrx8888</span> <span class='op'>=</span> <span class='number'>0x34325842</span>,
    <span class='ident'>Abgr8888</span> <span class='op'>=</span> <span class='number'>0x34324241</span>,
    <span class='ident'>Rgba8888</span> <span class='op'>=</span> <span class='number'>0x34324152</span>,
    <span class='ident'>Bgra8888</span> <span class='op'>=</span> <span class='number'>0x34324142</span>,
    <span class='ident'>Xrgb2101010</span> <span class='op'>=</span> <span class='number'>0x30335258</span>,
    <span class='ident'>Xbgr2101010</span> <span class='op'>=</span> <span class='number'>0x30334258</span>,
    <span class='ident'>Rgbx1010102</span> <span class='op'>=</span> <span class='number'>0x30335852</span>,
    <span class='ident'>Bgrx1010102</span> <span class='op'>=</span> <span class='number'>0x30335842</span>,
    <span class='ident'>Argb2101010</span> <span class='op'>=</span> <span class='number'>0x30335241</span>,
    <span class='ident'>Abgr2101010</span> <span class='op'>=</span> <span class='number'>0x30334241</span>,
    <span class='ident'>Rgba1010102</span> <span class='op'>=</span> <span class='number'>0x30334152</span>,
    <span class='ident'>Bgra1010102</span> <span class='op'>=</span> <span class='number'>0x30334142</span>,
    <span class='ident'>Yuyv</span> <span class='op'>=</span> <span class='number'>0x56595559</span>,
    <span class='ident'>Yvyu</span> <span class='op'>=</span> <span class='number'>0x55595659</span>,
    <span class='ident'>Uyvy</span> <span class='op'>=</span> <span class='number'>0x59565955</span>,
    <span class='ident'>Vyuy</span> <span class='op'>=</span> <span class='number'>0x59555956</span>,
    <span class='ident'>Ayuv</span> <span class='op'>=</span> <span class='number'>0x56555941</span>,
    <span class='ident'>Nv12</span> <span class='op'>=</span> <span class='number'>0x3231564e</span>,
    <span class='ident'>Nv21</span> <span class='op'>=</span> <span class='number'>0x3132564e</span>,
    <span class='ident'>Nv16</span> <span class='op'>=</span> <span class='number'>0x3631564e</span>,
    <span class='ident'>Nv61</span> <span class='op'>=</span> <span class='number'>0x3136564e</span>,
    <span class='ident'>Yuv410</span> <span class='op'>=</span> <span class='number'>0x39565559</span>,
    <span class='ident'>Yvu410</span> <span class='op'>=</span> <span class='number'>0x39555659</span>,
    <span class='ident'>Yuv411</span> <span class='op'>=</span> <span class='number'>0x31315559</span>,
    <span class='ident'>Yvu411</span> <span class='op'>=</span> <span class='number'>0x31315659</span>,
    <span class='ident'>Yuv420</span> <span class='op'>=</span> <span class='number'>0x32315559</span>,
    <span class='ident'>Yvu420</span> <span class='op'>=</span> <span class='number'>0x32315659</span>,
    <span class='ident'>Yuv422</span> <span class='op'>=</span> <span class='number'>0x36315559</span>,
    <span class='ident'>Yvu422</span> <span class='op'>=</span> <span class='number'>0x36315659</span>,
    <span class='ident'>Yuv444</span> <span class='op'>=</span> <span class='number'>0x34325559</span>,
    <span class='ident'>Yvu444</span> <span class='op'>=</span> <span class='number'>0x34325659</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_shm_format_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlShmFormat</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Argb8888</span>),
        <span class='number'>1</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Xrgb8888</span>),
        <span class='number'>0x20203843</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>C8</span>),
        <span class='number'>0x38424752</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Rgb332</span>),
        <span class='number'>0x38524742</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Bgr233</span>),
        <span class='number'>0x32315258</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Xrgb4444</span>),
        <span class='number'>0x32314258</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Xbgr4444</span>),
        <span class='number'>0x32315852</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Rgbx4444</span>),
        <span class='number'>0x32315842</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Bgrx4444</span>),
        <span class='number'>0x32315241</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Argb4444</span>),
        <span class='number'>0x32314241</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Abgr4444</span>),
        <span class='number'>0x32314152</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Rgba4444</span>),
        <span class='number'>0x32314142</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Bgra4444</span>),
        <span class='number'>0x35315258</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Xrgb1555</span>),
        <span class='number'>0x35314258</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Xbgr1555</span>),
        <span class='number'>0x35315852</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Rgbx5551</span>),
        <span class='number'>0x35315842</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Bgrx5551</span>),
        <span class='number'>0x35315241</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Argb1555</span>),
        <span class='number'>0x35314241</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Abgr1555</span>),
        <span class='number'>0x35314152</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Rgba5551</span>),
        <span class='number'>0x35314142</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Bgra5551</span>),
        <span class='number'>0x36314752</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Rgb565</span>),
        <span class='number'>0x36314742</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Bgr565</span>),
        <span class='number'>0x34324752</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Rgb888</span>),
        <span class='number'>0x34324742</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Bgr888</span>),
        <span class='number'>0x34324258</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Xbgr8888</span>),
        <span class='number'>0x34325852</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Rgbx8888</span>),
        <span class='number'>0x34325842</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Bgrx8888</span>),
        <span class='number'>0x34324241</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Abgr8888</span>),
        <span class='number'>0x34324152</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Rgba8888</span>),
        <span class='number'>0x34324142</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Bgra8888</span>),
        <span class='number'>0x30335258</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Xrgb2101010</span>),
        <span class='number'>0x30334258</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Xbgr2101010</span>),
        <span class='number'>0x30335852</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Rgbx1010102</span>),
        <span class='number'>0x30335842</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Bgrx1010102</span>),
        <span class='number'>0x30335241</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Argb2101010</span>),
        <span class='number'>0x30334241</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Abgr2101010</span>),
        <span class='number'>0x30334152</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Rgba1010102</span>),
        <span class='number'>0x30334142</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Bgra1010102</span>),
        <span class='number'>0x56595559</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Yuyv</span>),
        <span class='number'>0x55595659</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Yvyu</span>),
        <span class='number'>0x59565955</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Uyvy</span>),
        <span class='number'>0x59555956</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Vyuy</span>),
        <span class='number'>0x56555941</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Ayuv</span>),
        <span class='number'>0x3231564e</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Nv12</span>),
        <span class='number'>0x3132564e</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Nv21</span>),
        <span class='number'>0x3631564e</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Nv16</span>),
        <span class='number'>0x3136564e</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Nv61</span>),
        <span class='number'>0x39565559</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Yuv410</span>),
        <span class='number'>0x39555659</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Yvu410</span>),
        <span class='number'>0x31315559</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Yuv411</span>),
        <span class='number'>0x31315659</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Yvu411</span>),
        <span class='number'>0x32315559</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Yuv420</span>),
        <span class='number'>0x32315659</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Yvu420</span>),
        <span class='number'>0x36315559</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Yuv422</span>),
        <span class='number'>0x36315659</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Yvu422</span>),
        <span class='number'>0x34325559</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Yuv444</span>),
        <span class='number'>0x34325659</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShmFormat</span>::<span class='ident'>Yvu444</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='comment'>// wl_shm opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_SHM_CREATE_POOL</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlShmEvent</span> {
    <span class='doccomment'>/// pixel format description</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Informs the client about a valid pixel format that</span>
    <span class='doccomment'>/// can be used for buffers. Known formats include</span>
    <span class='doccomment'>/// argb8888 and xrgb8888.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: format,</span>
    <span class='ident'>Format</span>(<span class='ident'>WlShmFormat</span>,),
}

<span class='kw'>fn</span> <span class='ident'>wl_shm_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>wl_shm_format_from_raw</span>(<span class='ident'>arg_0</span> <span class='kw'>as</span> <span class='ident'>u32</span>) { <span class='prelude-val'>Some</span>(<span class='ident'>a</span>) <span class='op'>=&gt;</span> <span class='ident'>a</span>, <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='kw'>return</span> <span class='prelude-val'>None</span> };
            <span class='prelude-val'>Some</span>(<span class='ident'>WlShmEvent</span>::<span class='ident'>Format</span>(<span class='ident'>arg_0</span>,))
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlShm</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlShm</span> {

    <span class='doccomment'>/// create a shm pool</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Create a new wl_shm_pool object.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The pool can be used to create shared memory based buffer</span>
    <span class='doccomment'>/// objects.  The server will mmap size bytes of the passed file</span>
    <span class='doccomment'>/// descriptor, to use as backing memory for the pool.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>create_pool</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fd</span>: ::<span class='ident'>std</span>::<span class='ident'>os</span>::<span class='ident'>unix</span>::<span class='ident'>io</span>::<span class='ident'>RawFd</span>, <span class='ident'>size</span>: <span class='ident'>i32</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlShmPool</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHM_CREATE_POOL</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_shm_pool_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>(), <span class='ident'>fd</span>, <span class='ident'>size</span>) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlShmPool</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlShm</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_buffer</span>
<span class='comment'>//</span>

<span class='doccomment'>/// content for a wl_surface</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A buffer provides the content for a wl_surface. Buffers are</span>
<span class='doccomment'>/// created through factory interfaces such as wl_drm, wl_shm or</span>
<span class='doccomment'>/// similar. It has a width and a height and can be attached to a</span>
<span class='doccomment'>/// wl_surface, but the mechanism by which a client provides and</span>
<span class='doccomment'>/// updates the contents is defined by the buffer factory interface.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlBuffer</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlBuffer</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlBuffer</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlBuffer</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_buffer_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_buffer&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlBuffer</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_buffer_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlBuffer</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlBuffer</span> {
        <span class='ident'>WlBuffer</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlBuffer</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_buffer::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='comment'>// wl_buffer opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_BUFFER_DESTROY</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlBufferEvent</span> {
    <span class='doccomment'>/// compositor releases buffer</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Sent when this wl_buffer is no longer used by the compositor.</span>
    <span class='doccomment'>/// The client is now free to re-use or destroy this buffer and its</span>
    <span class='doccomment'>/// backing storage.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// If a client receives a release event before the frame callback</span>
    <span class='doccomment'>/// requested in the same wl_surface.commit that attaches this</span>
    <span class='doccomment'>/// wl_buffer to a surface, then the client is immediately free to</span>
    <span class='doccomment'>/// re-use the buffer and its backing storage, and does not need a</span>
    <span class='doccomment'>/// second buffer for the next surface content update. Typically</span>
    <span class='doccomment'>/// this is possible, when the compositor maintains a copy of the</span>
    <span class='doccomment'>/// wl_surface contents, e.g. as a GL texture. This is an important</span>
    <span class='doccomment'>/// optimization for GL(ES) compositors with wl_shm clients.</span>
    <span class='ident'>Release</span>,
}

<span class='kw'>fn</span> <span class='ident'>wl_buffer_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>WlBufferEvent</span>::<span class='ident'>Release</span>)
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlBuffer</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlBuffer</span> {

    <span class='doccomment'>/// destroy a buffer</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Destroy a buffer. If and how you need to release the backing</span>
    <span class='doccomment'>/// storage is defined by the buffer factory interface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// For possible side-effects to a surface, see wl_surface.attach.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>destroy</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_BUFFER_DESTROY</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlBuffer</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_data_offer</span>
<span class='comment'>//</span>

<span class='doccomment'>/// offer to transfer data</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A wl_data_offer represents a piece of data offered for transfer</span>
<span class='doccomment'>/// by another client (the source client).  It is used by the</span>
<span class='doccomment'>/// copy-and-paste and drag-and-drop mechanisms.  The offer</span>
<span class='doccomment'>/// describes the different mime types that the data can be</span>
<span class='doccomment'>/// converted to and provides the mechanism for transferring the</span>
<span class='doccomment'>/// data directly from the source client.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlDataOffer</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlDataOffer</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlDataOffer</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlDataOffer</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_data_offer_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_data_offer&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlDataOffer</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_data_offer_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlDataOffer</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlDataOffer</span> {
        <span class='ident'>WlDataOffer</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlDataOffer</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_data_offer::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='comment'>// wl_data_offer opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_DATA_OFFER_ACCEPT</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_DATA_OFFER_RECEIVE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;
<span class='kw'>const</span> <span class='ident'>WL_DATA_OFFER_DESTROY</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>2</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlDataOfferEvent</span> {
    <span class='doccomment'>/// advertise offered mime type</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Sent immediately after creating the wl_data_offer object.  One</span>
    <span class='doccomment'>/// event per offered mime type.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: mime_type,</span>
    <span class='ident'>Offer</span>(<span class='ident'>String</span>,),
}

<span class='kw'>fn</span> <span class='ident'>wl_data_offer_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>String</span>::<span class='ident'>from_utf8_lossy</span>(<span class='ident'>CStr</span>::<span class='ident'>from_ptr</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_char</span>)).<span class='ident'>to_bytes</span>()).<span class='ident'>into_owned</span>()};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlDataOfferEvent</span>::<span class='ident'>Offer</span>(<span class='ident'>arg_0</span>,))
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlDataOffer</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlDataOffer</span> {

    <span class='doccomment'>/// accept one of the offered mime types</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Indicate that the client can accept the given mime type, or</span>
    <span class='doccomment'>/// NULL for not accepted.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Used for feedback during drag-and-drop.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>accept</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>serial</span>: <span class='ident'>u32</span>, <span class='ident'>mime_type</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>String</span><span class='op'>&gt;</span>,) {
        <span class='kw'>let</span> <span class='ident'>mime_type</span> <span class='op'>=</span> <span class='ident'>mime_type</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>t</span><span class='op'>|</span> <span class='ident'>CString</span>::<span class='ident'>new</span>(<span class='ident'>t</span>).<span class='ident'>unwrap_or_else</span>(<span class='op'>|</span>_<span class='op'>|</span> <span class='macro'>panic</span><span class='macro'>!</span>(<span class='string'>&quot;Got a String with interior null.&quot;</span>)));
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_DATA_OFFER_ACCEPT</span>
           , <span class='ident'>serial</span>, <span class='ident'>mime_type</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>s</span><span class='op'>|</span> <span class='ident'>s</span>.<span class='ident'>as_ptr</span>()).<span class='ident'>unwrap_or</span>(<span class='ident'>ptr</span>::<span class='ident'>null</span>())) };
    }

    <span class='doccomment'>/// request that the data is transferred</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// To transfer the offered data, the client issues this request</span>
    <span class='doccomment'>/// and indicates the mime type it wants to receive.  The transfer</span>
    <span class='doccomment'>/// happens through the passed file descriptor (typically created</span>
    <span class='doccomment'>/// with the pipe system call).  The source client writes the data</span>
    <span class='doccomment'>/// in the mime type representation requested and then closes the</span>
    <span class='doccomment'>/// file descriptor.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The receiving client reads from the read end of the pipe until</span>
    <span class='doccomment'>/// EOF and then closes its end, at which point the transfer is</span>
    <span class='doccomment'>/// complete.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>receive</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>mime_type</span>: <span class='ident'>String</span>, <span class='ident'>fd</span>: ::<span class='ident'>std</span>::<span class='ident'>os</span>::<span class='ident'>unix</span>::<span class='ident'>io</span>::<span class='ident'>RawFd</span>,) {
        <span class='kw'>let</span> <span class='ident'>mime_type</span> <span class='op'>=</span> <span class='ident'>CString</span>::<span class='ident'>new</span>(<span class='ident'>mime_type</span>).<span class='ident'>unwrap_or_else</span>(<span class='op'>|</span>_<span class='op'>|</span> <span class='macro'>panic</span><span class='macro'>!</span>(<span class='string'>&quot;Got a String with interior null.&quot;</span>));
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_DATA_OFFER_RECEIVE</span>
           , <span class='ident'>mime_type</span>.<span class='ident'>as_ptr</span>(), <span class='ident'>fd</span>) };
    }

    <span class='doccomment'>/// destroy data offer</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Destroy the data offer.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>destroy</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_DATA_OFFER_DESTROY</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlDataOffer</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_data_source</span>
<span class='comment'>//</span>

<span class='doccomment'>/// offer to transfer data</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The wl_data_source object is the source side of a wl_data_offer.</span>
<span class='doccomment'>/// It is created by the source client in a data transfer and</span>
<span class='doccomment'>/// provides a way to describe the offered data and a way to respond</span>
<span class='doccomment'>/// to requests to transfer the data.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlDataSource</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlDataSource</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlDataSource</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlDataSource</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_data_source_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_data_source&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlDataSource</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_data_source_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlDataSource</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlDataSource</span> {
        <span class='ident'>WlDataSource</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlDataSource</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_data_source::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='comment'>// wl_data_source opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_DATA_SOURCE_OFFER</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_DATA_SOURCE_DESTROY</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlDataSourceEvent</span> {
    <span class='doccomment'>/// a target accepts an offered mime type</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Sent when a target accepts pointer_focus or motion events.  If</span>
    <span class='doccomment'>/// a target does not accept any of the offered types, type is NULL.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Used for feedback during drag-and-drop.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: mime_type,</span>
    <span class='ident'>Target</span>(<span class='ident'>String</span>,),
    <span class='doccomment'>/// send the data</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Request for data from the client.  Send the data as the</span>
    <span class='doccomment'>/// specified mime type over the passed file descriptor, then</span>
    <span class='doccomment'>/// close it.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: mime_type, fd,</span>
    <span class='ident'>Send</span>(<span class='ident'>String</span>,::<span class='ident'>std</span>::<span class='ident'>os</span>::<span class='ident'>unix</span>::<span class='ident'>io</span>::<span class='ident'>RawFd</span>,),
    <span class='doccomment'>/// selection was cancelled</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This data source has been replaced by another data source.</span>
    <span class='doccomment'>/// The client should clean up and destroy this data source.</span>
    <span class='ident'>Cancelled</span>,
}

<span class='kw'>fn</span> <span class='ident'>wl_data_source_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>String</span>::<span class='ident'>from_utf8_lossy</span>(<span class='ident'>CStr</span>::<span class='ident'>from_ptr</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_char</span>)).<span class='ident'>to_bytes</span>()).<span class='ident'>into_owned</span>()};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlDataSourceEvent</span>::<span class='ident'>Target</span>(<span class='ident'>arg_0</span>,))
        },
        <span class='number'>1</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>String</span>::<span class='ident'>from_utf8_lossy</span>(<span class='ident'>CStr</span>::<span class='ident'>from_ptr</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_char</span>)).<span class='ident'>to_bytes</span>()).<span class='ident'>into_owned</span>()};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlDataSourceEvent</span>::<span class='ident'>Send</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,))
        },
        <span class='number'>2</span> <span class='op'>=&gt;</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>WlDataSourceEvent</span>::<span class='ident'>Cancelled</span>)
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlDataSource</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlDataSource</span> {

    <span class='doccomment'>/// add an offered mime type</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request adds a mime type to the set of mime types</span>
    <span class='doccomment'>/// advertised to targets.  Can be called several times to offer</span>
    <span class='doccomment'>/// multiple types.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>offer</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>mime_type</span>: <span class='ident'>String</span>,) {
        <span class='kw'>let</span> <span class='ident'>mime_type</span> <span class='op'>=</span> <span class='ident'>CString</span>::<span class='ident'>new</span>(<span class='ident'>mime_type</span>).<span class='ident'>unwrap_or_else</span>(<span class='op'>|</span>_<span class='op'>|</span> <span class='macro'>panic</span><span class='macro'>!</span>(<span class='string'>&quot;Got a String with interior null.&quot;</span>));
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_DATA_SOURCE_OFFER</span>
           , <span class='ident'>mime_type</span>.<span class='ident'>as_ptr</span>()) };
    }

    <span class='doccomment'>/// destroy the data source</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Destroy the data source.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>destroy</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_DATA_SOURCE_DESTROY</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlDataSource</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_data_device</span>
<span class='comment'>//</span>

<span class='doccomment'>/// data transfer device</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// There is one wl_data_device per seat which can be obtained</span>
<span class='doccomment'>/// from the global wl_data_device_manager singleton.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A wl_data_device provides access to inter-client data transfer</span>
<span class='doccomment'>/// mechanisms such as copy-and-paste and drag-and-drop.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlDataDevice</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlDataDevice</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlDataDevice</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlDataDevice</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_data_device_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_data_device&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>2</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlDataDevice</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_data_device_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlDataDevice</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlDataDevice</span> {
        <span class='ident'>WlDataDevice</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlDataDevice</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_data_device::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlDataDeviceError</span> {
    <span class='doccomment'>/// given wl_surface has another role</span>
    <span class='ident'>Role</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='attribute'>#[<span class='ident'>doc</span>(<span class='ident'>hidden</span>)]</span>
    <span class='ident'>__not_univariant</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_data_device_error_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlDataDeviceError</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlDataDeviceError</span>::<span class='ident'>Role</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='comment'>// wl_data_device opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_DATA_DEVICE_START_DRAG</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_DATA_DEVICE_SET_SELECTION</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;
<span class='kw'>const</span> <span class='ident'>WL_DATA_DEVICE_RELEASE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>2</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlDataDeviceEvent</span> {
    <span class='doccomment'>/// introduce a new wl_data_offer</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The data_offer event introduces a new wl_data_offer object,</span>
    <span class='doccomment'>/// which will subsequently be used in either the</span>
    <span class='doccomment'>/// data_device.enter event (for drag-and-drop) or the</span>
    <span class='doccomment'>/// data_device.selection event (for selections).  Immediately</span>
    <span class='doccomment'>/// following the data_device_data_offer event, the new data_offer</span>
    <span class='doccomment'>/// object will send out data_offer.offer events to describe the</span>
    <span class='doccomment'>/// mime types it offers.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: id,</span>
    <span class='ident'>DataOffer</span>(<span class='ident'>WlDataOffer</span>,),
    <span class='doccomment'>/// initiate drag-and-drop session</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This event is sent when an active drag-and-drop pointer enters</span>
    <span class='doccomment'>/// a surface owned by the client.  The position of the pointer at</span>
    <span class='doccomment'>/// enter time is provided by the x and y arguments, in surface</span>
    <span class='doccomment'>/// local coordinates.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: serial, surface, x, y, id,</span>
    <span class='ident'>Enter</span>(<span class='ident'>u32</span>,<span class='ident'>ProxyId</span>,<span class='ident'>f64</span>,<span class='ident'>f64</span>,<span class='ident'>ProxyId</span>,),
    <span class='doccomment'>/// end drag-and-drop session</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This event is sent when the drag-and-drop pointer leaves the</span>
    <span class='doccomment'>/// surface and the session ends.  The client must destroy the</span>
    <span class='doccomment'>/// wl_data_offer introduced at enter time at this point.</span>
    <span class='ident'>Leave</span>,
    <span class='doccomment'>/// drag-and-drop session motion</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This event is sent when the drag-and-drop pointer moves within</span>
    <span class='doccomment'>/// the currently focused surface. The new position of the pointer</span>
    <span class='doccomment'>/// is provided by the x and y arguments, in surface local</span>
    <span class='doccomment'>/// coordinates.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: time, x, y,</span>
    <span class='ident'>Motion</span>(<span class='ident'>u32</span>,<span class='ident'>f64</span>,<span class='ident'>f64</span>,),
    <span class='doccomment'>/// end drag-and-drag session successfully</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The event is sent when a drag-and-drop operation is ended</span>
    <span class='doccomment'>/// because the implicit grab is removed.</span>
    <span class='ident'>Drop</span>,
    <span class='doccomment'>/// advertise new selection</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The selection event is sent out to notify the client of a new</span>
    <span class='doccomment'>/// wl_data_offer for the selection for this device.  The</span>
    <span class='doccomment'>/// data_device.data_offer and the data_offer.offer events are</span>
    <span class='doccomment'>/// sent out immediately before this event to introduce the data</span>
    <span class='doccomment'>/// offer object.  The selection event is sent to a client</span>
    <span class='doccomment'>/// immediately before receiving keyboard focus and when a new</span>
    <span class='doccomment'>/// selection is set while the client has keyboard focus.  The</span>
    <span class='doccomment'>/// data_offer is valid until a new data_offer or NULL is received</span>
    <span class='doccomment'>/// or until the client loses keyboard focus.  The client must</span>
    <span class='doccomment'>/// destroy the previous selection data_offer, if any, upon receiving</span>
    <span class='doccomment'>/// this event.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: id,</span>
    <span class='ident'>Selection</span>(<span class='ident'>ProxyId</span>,),
}

<span class='kw'>fn</span> <span class='ident'>wl_data_device_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {{ <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>); <span class='ident'>WlDataOffer</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) }};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlDataDeviceEvent</span>::<span class='ident'>DataOffer</span>(<span class='ident'>arg_0</span>,))
        },
        <span class='number'>1</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wrap_proxy</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>))};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='kw'>let</span> <span class='ident'>arg_3</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>3</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='kw'>let</span> <span class='ident'>arg_4</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wrap_proxy</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>4</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>))};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlDataDeviceEvent</span>::<span class='ident'>Enter</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,<span class='ident'>arg_3</span>,<span class='ident'>arg_4</span>,))
        },
        <span class='number'>2</span> <span class='op'>=&gt;</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>WlDataDeviceEvent</span>::<span class='ident'>Leave</span>)
        },
        <span class='number'>3</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlDataDeviceEvent</span>::<span class='ident'>Motion</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,))
        },
        <span class='number'>4</span> <span class='op'>=&gt;</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>WlDataDeviceEvent</span>::<span class='ident'>Drop</span>)
        },
        <span class='number'>5</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wrap_proxy</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>))};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlDataDeviceEvent</span>::<span class='ident'>Selection</span>(<span class='ident'>arg_0</span>,))
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlDataDevice</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlDataDevice</span> {

    <span class='doccomment'>/// start drag-and-drop operation</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request asks the compositor to start a drag-and-drop</span>
    <span class='doccomment'>/// operation on behalf of the client.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The source argument is the data source that provides the data</span>
    <span class='doccomment'>/// for the eventual data transfer. If source is NULL, enter, leave</span>
    <span class='doccomment'>/// and motion events are sent only to the client that initiated the</span>
    <span class='doccomment'>/// drag and the client is expected to handle the data passing</span>
    <span class='doccomment'>/// internally.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The origin surface is the surface where the drag originates and</span>
    <span class='doccomment'>/// the client must have an active implicit grab that matches the</span>
    <span class='doccomment'>/// serial.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The icon surface is an optional (can be NULL) surface that</span>
    <span class='doccomment'>/// provides an icon to be moved around with the cursor.  Initially,</span>
    <span class='doccomment'>/// the top-left corner of the icon surface is placed at the cursor</span>
    <span class='doccomment'>/// hotspot, but subsequent wl_surface.attach request can move the</span>
    <span class='doccomment'>/// relative position. Attach requests must be confirmed with</span>
    <span class='doccomment'>/// wl_surface.commit as usual. The icon surface is given the role of</span>
    <span class='doccomment'>/// a drag-and-drop icon. If the icon surface already has another role,</span>
    <span class='doccomment'>/// it raises a protocol error.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The current and pending input regions of the icon wl_surface are</span>
    <span class='doccomment'>/// cleared, and wl_surface.set_input_region is ignored until the</span>
    <span class='doccomment'>/// wl_surface is no longer used as the icon surface. When the use</span>
    <span class='doccomment'>/// as an icon ends, the current and pending input regions become</span>
    <span class='doccomment'>/// undefined, and the wl_surface is unmapped.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>start_drag</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>source</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='ident'>WlDataSource</span><span class='op'>&gt;</span>, <span class='ident'>origin</span>: <span class='kw-2'>&amp;</span><span class='ident'>WlSurface</span>, <span class='ident'>icon</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='ident'>WlSurface</span><span class='op'>&gt;</span>, <span class='ident'>serial</span>: <span class='ident'>u32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_DATA_DEVICE_START_DRAG</span>
           , <span class='ident'>source</span>.<span class='ident'>map</span>(<span class='ident'>Proxy</span>::<span class='ident'>ptr</span>).<span class='ident'>unwrap_or</span>(<span class='ident'>ptr</span>::<span class='ident'>null_mut</span>()), <span class='ident'>origin</span>.<span class='ident'>ptr</span>(), <span class='ident'>icon</span>.<span class='ident'>map</span>(<span class='ident'>Proxy</span>::<span class='ident'>ptr</span>).<span class='ident'>unwrap_or</span>(<span class='ident'>ptr</span>::<span class='ident'>null_mut</span>()), <span class='ident'>serial</span>) };
    }

    <span class='doccomment'>/// copy data to the selection</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request asks the compositor to set the selection</span>
    <span class='doccomment'>/// to the data from the source on behalf of the client.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// To unset the selection, set the source to NULL.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_selection</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>source</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='ident'>WlDataSource</span><span class='op'>&gt;</span>, <span class='ident'>serial</span>: <span class='ident'>u32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_DATA_DEVICE_SET_SELECTION</span>
           , <span class='ident'>source</span>.<span class='ident'>map</span>(<span class='ident'>Proxy</span>::<span class='ident'>ptr</span>).<span class='ident'>unwrap_or</span>(<span class='ident'>ptr</span>::<span class='ident'>null_mut</span>()), <span class='ident'>serial</span>) };
    }

    <span class='doccomment'>/// destroy data device</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request destroys the data device.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Requires interface version `&gt;= 2`.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>release</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_DATA_DEVICE_RELEASE</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlDataDevice</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_data_device_manager</span>
<span class='comment'>//</span>

<span class='doccomment'>/// data transfer interface</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The wl_data_device_manager is a singleton global object that</span>
<span class='doccomment'>/// provides access to inter-client data transfer mechanisms such as</span>
<span class='doccomment'>/// copy-and-paste and drag-and-drop.  These mechanisms are tied to</span>
<span class='doccomment'>/// a wl_seat and this interface lets a client get a wl_data_device</span>
<span class='doccomment'>/// corresponding to a wl_seat.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlDataDeviceManager</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlDataDeviceManager</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlDataDeviceManager</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlDataDeviceManager</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_data_device_manager_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_data_device_manager&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>2</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlDataDeviceManager</span> {
        <span class='ident'>WlDataDeviceManager</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlDataDeviceManager</span> {
        <span class='ident'>WlDataDeviceManager</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlDataDeviceManager</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_data_device_manager::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='comment'>// wl_data_device_manager opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_DATA_DEVICE_MANAGER_CREATE_DATA_SOURCE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_DATA_DEVICE_MANAGER_GET_DATA_DEVICE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;

<span class='kw'>impl</span> <span class='ident'>WlDataDeviceManager</span> {

    <span class='doccomment'>/// create a new data source</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Create a new data source.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>create_data_source</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlDataSource</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_DATA_DEVICE_MANAGER_CREATE_DATA_SOURCE</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_data_source_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlDataSource</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }

    <span class='doccomment'>/// create a new data device</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Create a new data device for a given seat.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>get_data_device</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>seat</span>: <span class='kw-2'>&amp;</span><span class='ident'>WlSeat</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlDataDevice</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_DATA_DEVICE_MANAGER_GET_DATA_DEVICE</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_data_device_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>(), <span class='ident'>seat</span>.<span class='ident'>ptr</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlDataDevice</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlDataDeviceManager</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_shell</span>
<span class='comment'>//</span>

<span class='doccomment'>/// create desktop-style surfaces</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// This interface is implemented by servers that provide</span>
<span class='doccomment'>/// desktop-style user interfaces.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// It allows clients to associate a wl_shell_surface with</span>
<span class='doccomment'>/// a basic surface.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlShell</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlShell</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlShell</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlShell</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_shell_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_shell&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlShell</span> {
        <span class='ident'>WlShell</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlShell</span> {
        <span class='ident'>WlShell</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlShell</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_shell::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlShellError</span> {
    <span class='doccomment'>/// given wl_surface has another role</span>
    <span class='ident'>Role</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='attribute'>#[<span class='ident'>doc</span>(<span class='ident'>hidden</span>)]</span>
    <span class='ident'>__not_univariant</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_shell_error_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlShellError</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShellError</span>::<span class='ident'>Role</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='comment'>// wl_shell opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_SHELL_GET_SHELL_SURFACE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;

<span class='kw'>impl</span> <span class='ident'>WlShell</span> {

    <span class='doccomment'>/// create a shell surface from a surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Create a shell surface for an existing surface. This gives</span>
    <span class='doccomment'>/// the wl_surface the role of a shell surface. If the wl_surface</span>
    <span class='doccomment'>/// already has another role, it raises a protocol error.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Only one shell surface can be associated with a given surface.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>get_shell_surface</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>surface</span>: <span class='kw-2'>&amp;</span><span class='ident'>WlSurface</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlShellSurface</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHELL_GET_SHELL_SURFACE</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_shell_surface_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>(), <span class='ident'>surface</span>.<span class='ident'>ptr</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlShellSurface</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlShell</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_shell_surface</span>
<span class='comment'>//</span>

<span class='doccomment'>/// desktop-style metadata interface</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// An interface that may be implemented by a wl_surface, for</span>
<span class='doccomment'>/// implementations that provide a desktop-style user interface.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// It provides requests to treat surfaces like toplevel, fullscreen</span>
<span class='doccomment'>/// or popup windows, move, resize or maximize them, associate</span>
<span class='doccomment'>/// metadata like title and class, etc.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// On the server side the object is automatically destroyed when</span>
<span class='doccomment'>/// the related wl_surface is destroyed.  On client side,</span>
<span class='doccomment'>/// wl_shell_surface_destroy() must be called before destroying</span>
<span class='doccomment'>/// the wl_surface object.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlShellSurface</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlShellSurface</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlShellSurface</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlShellSurface</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_shell_surface_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_shell_surface&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlShellSurface</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_shell_surface_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlShellSurface</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlShellSurface</span> {
        <span class='ident'>WlShellSurface</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlShellSurface</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_shell_surface::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='doccomment'>/// edge values for resizing</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// These values are used to indicate which edge of a surface</span>
<span class='doccomment'>/// is being dragged in a resize operation. The server may</span>
<span class='doccomment'>/// use this information to adapt its behavior, e.g. choose</span>
<span class='doccomment'>/// an appropriate cursor image.</span>
<span class='kw'>pub</span> <span class='kw'>mod</span> <span class='ident'>WlShellSurfaceResize</span> {
<span class='macro'>bitflags</span><span class='macro'>!</span> {
    <span class='kw'>pub</span> <span class='ident'>flags</span> <span class='ident'>WlShellSurfaceResize</span>: <span class='ident'>u32</span> {
        <span class='kw'>const</span> <span class='prelude-val'>None</span> <span class='op'>=</span> <span class='number'>0</span>,
        <span class='kw'>const</span> <span class='ident'>Top</span> <span class='op'>=</span> <span class='number'>1</span>,
        <span class='kw'>const</span> <span class='ident'>Bottom</span> <span class='op'>=</span> <span class='number'>2</span>,
        <span class='kw'>const</span> <span class='ident'>Left</span> <span class='op'>=</span> <span class='number'>4</span>,
        <span class='kw'>const</span> <span class='ident'>TopLeft</span> <span class='op'>=</span> <span class='number'>5</span>,
        <span class='kw'>const</span> <span class='ident'>BottomLeft</span> <span class='op'>=</span> <span class='number'>6</span>,
        <span class='kw'>const</span> <span class='ident'>Right</span> <span class='op'>=</span> <span class='number'>8</span>,
        <span class='kw'>const</span> <span class='ident'>TopRight</span> <span class='op'>=</span> <span class='number'>9</span>,
        <span class='kw'>const</span> <span class='ident'>BottomRight</span> <span class='op'>=</span> <span class='number'>10</span>,
    }
}
}

<span class='kw'>fn</span> <span class='ident'>wl_shell_surface_resize_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlShellSurfaceResize</span>::<span class='ident'>WlShellSurfaceResize</span><span class='op'>&gt;</span> {
    <span class='prelude-val'>Some</span>(<span class='ident'>WlShellSurfaceResize</span>::<span class='ident'>WlShellSurfaceResize</span>::<span class='ident'>from_bits_truncate</span>(<span class='ident'>n</span>))
}

<span class='doccomment'>/// details of transient behaviour</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// These flags specify details of the expected behaviour</span>
<span class='doccomment'>/// of transient surfaces. Used in the set_transient request.</span>
<span class='kw'>pub</span> <span class='kw'>mod</span> <span class='ident'>WlShellSurfaceTransient</span> {
<span class='macro'>bitflags</span><span class='macro'>!</span> {
    <span class='kw'>pub</span> <span class='ident'>flags</span> <span class='ident'>WlShellSurfaceTransient</span>: <span class='ident'>u32</span> {
    <span class='doccomment'>/// do not set keyboard focus</span>
        <span class='kw'>const</span> <span class='ident'>Inactive</span> <span class='op'>=</span> <span class='number'>0x1</span>,
    }
}
}

<span class='kw'>fn</span> <span class='ident'>wl_shell_surface_transient_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlShellSurfaceTransient</span>::<span class='ident'>WlShellSurfaceTransient</span><span class='op'>&gt;</span> {
    <span class='prelude-val'>Some</span>(<span class='ident'>WlShellSurfaceTransient</span>::<span class='ident'>WlShellSurfaceTransient</span>::<span class='ident'>from_bits_truncate</span>(<span class='ident'>n</span>))
}

<span class='doccomment'>/// different method to set the surface fullscreen</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Hints to indicate to the compositor how to deal with a conflict</span>
<span class='doccomment'>/// between the dimensions of the surface and the dimensions of the</span>
<span class='doccomment'>/// output. The compositor is free to ignore this parameter.</span>
<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlShellSurfaceFullscreenMethod</span> {
    <span class='doccomment'>/// no preference, apply default policy</span>
    <span class='ident'>Default</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='doccomment'>/// scale, preserve the surface&#39;s aspect ratio and center on output</span>
    <span class='ident'>Scale</span> <span class='op'>=</span> <span class='number'>1</span>,
    <span class='doccomment'>/// switch output mode to the smallest mode that can fit the surface, add black borders to compensate size mismatch</span>
    <span class='ident'>Driver</span> <span class='op'>=</span> <span class='number'>2</span>,
    <span class='doccomment'>/// no upscaling, center on output and add black borders to compensate size mismatch</span>
    <span class='ident'>Fill</span> <span class='op'>=</span> <span class='number'>3</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_shell_surface_fullscreen_method_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlShellSurfaceFullscreenMethod</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShellSurfaceFullscreenMethod</span>::<span class='ident'>Default</span>),
        <span class='number'>1</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShellSurfaceFullscreenMethod</span>::<span class='ident'>Scale</span>),
        <span class='number'>2</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShellSurfaceFullscreenMethod</span>::<span class='ident'>Driver</span>),
        <span class='number'>3</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlShellSurfaceFullscreenMethod</span>::<span class='ident'>Fill</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='comment'>// wl_shell_surface opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_SHELL_SURFACE_PONG</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_SHELL_SURFACE_MOVE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;
<span class='kw'>const</span> <span class='ident'>WL_SHELL_SURFACE_RESIZE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>2</span>;
<span class='kw'>const</span> <span class='ident'>WL_SHELL_SURFACE_SET_TOPLEVEL</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>3</span>;
<span class='kw'>const</span> <span class='ident'>WL_SHELL_SURFACE_SET_TRANSIENT</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>4</span>;
<span class='kw'>const</span> <span class='ident'>WL_SHELL_SURFACE_SET_FULLSCREEN</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>5</span>;
<span class='kw'>const</span> <span class='ident'>WL_SHELL_SURFACE_SET_POPUP</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>6</span>;
<span class='kw'>const</span> <span class='ident'>WL_SHELL_SURFACE_SET_MAXIMIZED</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>7</span>;
<span class='kw'>const</span> <span class='ident'>WL_SHELL_SURFACE_SET_TITLE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>8</span>;
<span class='kw'>const</span> <span class='ident'>WL_SHELL_SURFACE_SET_CLASS</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>9</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlShellSurfaceEvent</span> {
    <span class='doccomment'>/// ping client</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Ping a client to check if it is receiving events and sending</span>
    <span class='doccomment'>/// requests. A client is expected to reply with a pong request.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: serial,</span>
    <span class='ident'>Ping</span>(<span class='ident'>u32</span>,),
    <span class='doccomment'>/// suggest resize</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The configure event asks the client to resize its surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The size is a hint, in the sense that the client is free to</span>
    <span class='doccomment'>/// ignore it if it doesn&#39;t resize, pick a smaller size (to</span>
    <span class='doccomment'>/// satisfy aspect ratio or resize in steps of NxM pixels).</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The edges parameter provides a hint about how the surface</span>
    <span class='doccomment'>/// was resized. The client may use this information to decide</span>
    <span class='doccomment'>/// how to adjust its content to the new size (e.g. a scrolling</span>
    <span class='doccomment'>/// area might adjust its content position to leave the viewable</span>
    <span class='doccomment'>/// content unmoved).</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The client is free to dismiss all but the last configure</span>
    <span class='doccomment'>/// event it received.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The width and height arguments specify the size of the window</span>
    <span class='doccomment'>/// in surface local coordinates.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: edges, width, height,</span>
    <span class='ident'>Configure</span>(<span class='ident'>WlShellSurfaceResize</span>::<span class='ident'>WlShellSurfaceResize</span>,<span class='ident'>i32</span>,<span class='ident'>i32</span>,),
    <span class='doccomment'>/// popup interaction is done</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The popup_done event is sent out when a popup grab is broken,</span>
    <span class='doccomment'>/// that is, when the user clicks a surface that doesn&#39;t belong</span>
    <span class='doccomment'>/// to the client owning the popup surface.</span>
    <span class='ident'>PopupDone</span>,
}

<span class='kw'>fn</span> <span class='ident'>wl_shell_surface_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlShellSurfaceEvent</span>::<span class='ident'>Ping</span>(<span class='ident'>arg_0</span>,))
        },
        <span class='number'>1</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>wl_shell_surface_resize_from_raw</span>(<span class='ident'>arg_0</span> <span class='kw'>as</span> <span class='ident'>u32</span>) { <span class='prelude-val'>Some</span>(<span class='ident'>a</span>) <span class='op'>=&gt;</span> <span class='ident'>a</span>, <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='kw'>return</span> <span class='prelude-val'>None</span> };
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlShellSurfaceEvent</span>::<span class='ident'>Configure</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,))
        },
        <span class='number'>2</span> <span class='op'>=&gt;</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>WlShellSurfaceEvent</span>::<span class='ident'>PopupDone</span>)
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlShellSurface</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlShellSurface</span> {

    <span class='doccomment'>/// respond to a ping event</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A client must respond to a ping event with a pong request or</span>
    <span class='doccomment'>/// the client may be deemed unresponsive.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>pong</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>serial</span>: <span class='ident'>u32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHELL_SURFACE_PONG</span>
           , <span class='ident'>serial</span>) };
    }

    <span class='doccomment'>/// start an interactive move</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Start a pointer-driven move of the surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request must be used in response to a button press event.</span>
    <span class='doccomment'>/// The server may ignore move requests depending on the state of</span>
    <span class='doccomment'>/// the surface (e.g. fullscreen or maximized).</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>move_</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>seat</span>: <span class='kw-2'>&amp;</span><span class='ident'>WlSeat</span>, <span class='ident'>serial</span>: <span class='ident'>u32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHELL_SURFACE_MOVE</span>
           , <span class='ident'>seat</span>.<span class='ident'>ptr</span>(), <span class='ident'>serial</span>) };
    }

    <span class='doccomment'>/// start an interactive resize</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Start a pointer-driven resizing of the surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request must be used in response to a button press event.</span>
    <span class='doccomment'>/// The server may ignore resize requests depending on the state of</span>
    <span class='doccomment'>/// the surface (e.g. fullscreen or maximized).</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>resize</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>seat</span>: <span class='kw-2'>&amp;</span><span class='ident'>WlSeat</span>, <span class='ident'>serial</span>: <span class='ident'>u32</span>, <span class='ident'>edges</span>: <span class='ident'>WlShellSurfaceResize</span>::<span class='ident'>WlShellSurfaceResize</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHELL_SURFACE_RESIZE</span>
           , <span class='ident'>seat</span>.<span class='ident'>ptr</span>(), <span class='ident'>serial</span>, <span class='ident'>edges</span>.<span class='ident'>bits</span>() <span class='kw'>as</span> <span class='ident'>u32</span>) };
    }

    <span class='doccomment'>/// make the surface a toplevel surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Map the surface as a toplevel surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A toplevel surface is not fullscreen, maximized or transient.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_toplevel</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHELL_SURFACE_SET_TOPLEVEL</span>
           ) };
    }

    <span class='doccomment'>/// make the surface a transient surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Map the surface relative to an existing surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The x and y arguments specify the locations of the upper left</span>
    <span class='doccomment'>/// corner of the surface relative to the upper left corner of the</span>
    <span class='doccomment'>/// parent surface, in surface local coordinates.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The flags argument controls details of the transient behaviour.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_transient</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>parent</span>: <span class='kw-2'>&amp;</span><span class='ident'>WlSurface</span>, <span class='ident'>x</span>: <span class='ident'>i32</span>, <span class='ident'>y</span>: <span class='ident'>i32</span>, <span class='ident'>flags</span>: <span class='ident'>WlShellSurfaceTransient</span>::<span class='ident'>WlShellSurfaceTransient</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHELL_SURFACE_SET_TRANSIENT</span>
           , <span class='ident'>parent</span>.<span class='ident'>ptr</span>(), <span class='ident'>x</span>, <span class='ident'>y</span>, <span class='ident'>flags</span>.<span class='ident'>bits</span>() <span class='kw'>as</span> <span class='ident'>u32</span>) };
    }

    <span class='doccomment'>/// make the surface a fullscreen surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Map the surface as a fullscreen surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// If an output parameter is given then the surface will be made</span>
    <span class='doccomment'>/// fullscreen on that output. If the client does not specify the</span>
    <span class='doccomment'>/// output then the compositor will apply its policy - usually</span>
    <span class='doccomment'>/// choosing the output on which the surface has the biggest surface</span>
    <span class='doccomment'>/// area.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The client may specify a method to resolve a size conflict</span>
    <span class='doccomment'>/// between the output size and the surface size - this is provided</span>
    <span class='doccomment'>/// through the method parameter.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The framerate parameter is used only when the method is set</span>
    <span class='doccomment'>/// to &quot;driver&quot;, to indicate the preferred framerate. A value of 0</span>
    <span class='doccomment'>/// indicates that the app does not care about framerate.  The</span>
    <span class='doccomment'>/// framerate is specified in mHz, that is framerate of 60000 is 60Hz.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A method of &quot;scale&quot; or &quot;driver&quot; implies a scaling operation of</span>
    <span class='doccomment'>/// the surface, either via a direct scaling operation or a change of</span>
    <span class='doccomment'>/// the output mode. This will override any kind of output scaling, so</span>
    <span class='doccomment'>/// that mapping a surface with a buffer size equal to the mode can</span>
    <span class='doccomment'>/// fill the screen independent of buffer_scale.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A method of &quot;fill&quot; means we don&#39;t scale up the buffer, however</span>
    <span class='doccomment'>/// any output scale is applied. This means that you may run into</span>
    <span class='doccomment'>/// an edge case where the application maps a buffer with the same</span>
    <span class='doccomment'>/// size of the output mode but buffer_scale 1 (thus making a</span>
    <span class='doccomment'>/// surface larger than the output). In this case it is allowed to</span>
    <span class='doccomment'>/// downscale the results to fit the screen.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The compositor must reply to this request with a configure event</span>
    <span class='doccomment'>/// with the dimensions for the output on which the surface will</span>
    <span class='doccomment'>/// be made fullscreen.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_fullscreen</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>method</span>: <span class='ident'>WlShellSurfaceFullscreenMethod</span>, <span class='ident'>framerate</span>: <span class='ident'>u32</span>, <span class='ident'>output</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='ident'>WlOutput</span><span class='op'>&gt;</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHELL_SURFACE_SET_FULLSCREEN</span>
           , <span class='ident'>method</span> <span class='kw'>as</span> <span class='ident'>u32</span>, <span class='ident'>framerate</span>, <span class='ident'>output</span>.<span class='ident'>map</span>(<span class='ident'>Proxy</span>::<span class='ident'>ptr</span>).<span class='ident'>unwrap_or</span>(<span class='ident'>ptr</span>::<span class='ident'>null_mut</span>())) };
    }

    <span class='doccomment'>/// make the surface a popup surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Map the surface as a popup.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A popup surface is a transient surface with an added pointer</span>
    <span class='doccomment'>/// grab.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// An existing implicit grab will be changed to owner-events mode,</span>
    <span class='doccomment'>/// and the popup grab will continue after the implicit grab ends</span>
    <span class='doccomment'>/// (i.e. releasing the mouse button does not cause the popup to</span>
    <span class='doccomment'>/// be unmapped).</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The popup grab continues until the window is destroyed or a</span>
    <span class='doccomment'>/// mouse button is pressed in any other clients window. A click</span>
    <span class='doccomment'>/// in any of the clients surfaces is reported as normal, however,</span>
    <span class='doccomment'>/// clicks in other clients surfaces will be discarded and trigger</span>
    <span class='doccomment'>/// the callback.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The x and y arguments specify the locations of the upper left</span>
    <span class='doccomment'>/// corner of the surface relative to the upper left corner of the</span>
    <span class='doccomment'>/// parent surface, in surface local coordinates.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_popup</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>seat</span>: <span class='kw-2'>&amp;</span><span class='ident'>WlSeat</span>, <span class='ident'>serial</span>: <span class='ident'>u32</span>, <span class='ident'>parent</span>: <span class='kw-2'>&amp;</span><span class='ident'>WlSurface</span>, <span class='ident'>x</span>: <span class='ident'>i32</span>, <span class='ident'>y</span>: <span class='ident'>i32</span>, <span class='ident'>flags</span>: <span class='ident'>WlShellSurfaceTransient</span>::<span class='ident'>WlShellSurfaceTransient</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHELL_SURFACE_SET_POPUP</span>
           , <span class='ident'>seat</span>.<span class='ident'>ptr</span>(), <span class='ident'>serial</span>, <span class='ident'>parent</span>.<span class='ident'>ptr</span>(), <span class='ident'>x</span>, <span class='ident'>y</span>, <span class='ident'>flags</span>.<span class='ident'>bits</span>() <span class='kw'>as</span> <span class='ident'>u32</span>) };
    }

    <span class='doccomment'>/// make the surface a maximized surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Map the surface as a maximized surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// If an output parameter is given then the surface will be</span>
    <span class='doccomment'>/// maximized on that output. If the client does not specify the</span>
    <span class='doccomment'>/// output then the compositor will apply its policy - usually</span>
    <span class='doccomment'>/// choosing the output on which the surface has the biggest surface</span>
    <span class='doccomment'>/// area.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The compositor will reply with a configure event telling</span>
    <span class='doccomment'>/// the expected new surface size. The operation is completed</span>
    <span class='doccomment'>/// on the next buffer attach to this surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A maximized surface typically fills the entire output it is</span>
    <span class='doccomment'>/// bound to, except for desktop element such as panels. This is</span>
    <span class='doccomment'>/// the main difference between a maximized shell surface and a</span>
    <span class='doccomment'>/// fullscreen shell surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The details depend on the compositor implementation.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_maximized</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>output</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='ident'>WlOutput</span><span class='op'>&gt;</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHELL_SURFACE_SET_MAXIMIZED</span>
           , <span class='ident'>output</span>.<span class='ident'>map</span>(<span class='ident'>Proxy</span>::<span class='ident'>ptr</span>).<span class='ident'>unwrap_or</span>(<span class='ident'>ptr</span>::<span class='ident'>null_mut</span>())) };
    }

    <span class='doccomment'>/// set surface title</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Set a short title for the surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This string may be used to identify the surface in a task bar,</span>
    <span class='doccomment'>/// window list, or other user interface elements provided by the</span>
    <span class='doccomment'>/// compositor.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The string must be encoded in UTF-8.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_title</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>title</span>: <span class='ident'>String</span>,) {
        <span class='kw'>let</span> <span class='ident'>title</span> <span class='op'>=</span> <span class='ident'>CString</span>::<span class='ident'>new</span>(<span class='ident'>title</span>).<span class='ident'>unwrap_or_else</span>(<span class='op'>|</span>_<span class='op'>|</span> <span class='macro'>panic</span><span class='macro'>!</span>(<span class='string'>&quot;Got a String with interior null.&quot;</span>));
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHELL_SURFACE_SET_TITLE</span>
           , <span class='ident'>title</span>.<span class='ident'>as_ptr</span>()) };
    }

    <span class='doccomment'>/// set surface class</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Set a class for the surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The surface class identifies the general class of applications</span>
    <span class='doccomment'>/// to which the surface belongs. A common convention is to use the</span>
    <span class='doccomment'>/// file name (or the full path if it is a non-standard location) of</span>
    <span class='doccomment'>/// the application&#39;s .desktop file as the class.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_class</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>class_</span>: <span class='ident'>String</span>,) {
        <span class='kw'>let</span> <span class='ident'>class_</span> <span class='op'>=</span> <span class='ident'>CString</span>::<span class='ident'>new</span>(<span class='ident'>class_</span>).<span class='ident'>unwrap_or_else</span>(<span class='op'>|</span>_<span class='op'>|</span> <span class='macro'>panic</span><span class='macro'>!</span>(<span class='string'>&quot;Got a String with interior null.&quot;</span>));
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SHELL_SURFACE_SET_CLASS</span>
           , <span class='ident'>class_</span>.<span class='ident'>as_ptr</span>()) };
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlShellSurface</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_surface</span>
<span class='comment'>//</span>

<span class='doccomment'>/// an onscreen surface</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A surface is a rectangular area that is displayed on the screen.</span>
<span class='doccomment'>/// It has a location, size and pixel contents.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The size of a surface (and relative positions on it) is described</span>
<span class='doccomment'>/// in surface local coordinates, which may differ from the buffer</span>
<span class='doccomment'>/// local coordinates of the pixel content, in case a buffer_transform</span>
<span class='doccomment'>/// or a buffer_scale is used.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A surface without a &quot;role&quot; is fairly useless, a compositor does</span>
<span class='doccomment'>/// not know where, when or how to present it. The role is the</span>
<span class='doccomment'>/// purpose of a wl_surface. Examples of roles are a cursor for a</span>
<span class='doccomment'>/// pointer (as set by wl_pointer.set_cursor), a drag icon</span>
<span class='doccomment'>/// (wl_data_device.start_drag), a sub-surface</span>
<span class='doccomment'>/// (wl_subcompositor.get_subsurface), and a window as defined by a</span>
<span class='doccomment'>/// shell protocol (e.g. wl_shell.get_shell_surface).</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A surface can have only one role at a time. Initially a</span>
<span class='doccomment'>/// wl_surface does not have a role. Once a wl_surface is given a</span>
<span class='doccomment'>/// role, it is set permanently for the whole lifetime of the</span>
<span class='doccomment'>/// wl_surface object. Giving the current role again is allowed,</span>
<span class='doccomment'>/// unless explicitly forbidden by the relevant interface</span>
<span class='doccomment'>/// specification.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Surface roles are given by requests in other interfaces such as</span>
<span class='doccomment'>/// wl_pointer.set_cursor. The request should explicitly mention</span>
<span class='doccomment'>/// that this request gives a role to a wl_surface. Often, this</span>
<span class='doccomment'>/// request also creates a new protocol object that represents the</span>
<span class='doccomment'>/// role and adds additional functionality to wl_surface. When a</span>
<span class='doccomment'>/// client wants to destroy a wl_surface, they must destroy this &#39;role</span>
<span class='doccomment'>/// object&#39; before the wl_surface.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Destroying the role object does not remove the role from the</span>
<span class='doccomment'>/// wl_surface, but it may stop the wl_surface from &quot;playing the role&quot;.</span>
<span class='doccomment'>/// For instance, if a wl_subsurface object is destroyed, the wl_surface</span>
<span class='doccomment'>/// it was created for will be unmapped and forget its position and</span>
<span class='doccomment'>/// z-order. It is allowed to create a wl_subsurface for the same</span>
<span class='doccomment'>/// wl_surface again, but it is not allowed to use the wl_surface as</span>
<span class='doccomment'>/// a cursor (cursor is a different role than sub-surface, and role</span>
<span class='doccomment'>/// switching is not allowed).</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlSurface</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlSurface</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlSurface</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlSurface</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_surface_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_surface&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>3</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlSurface</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_surface_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlSurface</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlSurface</span> {
        <span class='ident'>WlSurface</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlSurface</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_surface::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='doccomment'>/// wl_surface error values</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// These errors can be emitted in response to wl_surface requests.</span>
<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlSurfaceError</span> {
    <span class='doccomment'>/// buffer scale value is invalid</span>
    <span class='ident'>InvalidScale</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='doccomment'>/// buffer transform value is invalid</span>
    <span class='ident'>InvalidTransform</span> <span class='op'>=</span> <span class='number'>1</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_surface_error_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlSurfaceError</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlSurfaceError</span>::<span class='ident'>InvalidScale</span>),
        <span class='number'>1</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlSurfaceError</span>::<span class='ident'>InvalidTransform</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='comment'>// wl_surface opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_SURFACE_DESTROY</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_SURFACE_ATTACH</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;
<span class='kw'>const</span> <span class='ident'>WL_SURFACE_DAMAGE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>2</span>;
<span class='kw'>const</span> <span class='ident'>WL_SURFACE_FRAME</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>3</span>;
<span class='kw'>const</span> <span class='ident'>WL_SURFACE_SET_OPAQUE_REGION</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>4</span>;
<span class='kw'>const</span> <span class='ident'>WL_SURFACE_SET_INPUT_REGION</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>5</span>;
<span class='kw'>const</span> <span class='ident'>WL_SURFACE_COMMIT</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>6</span>;
<span class='kw'>const</span> <span class='ident'>WL_SURFACE_SET_BUFFER_TRANSFORM</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>7</span>;
<span class='kw'>const</span> <span class='ident'>WL_SURFACE_SET_BUFFER_SCALE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>8</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlSurfaceEvent</span> {
    <span class='doccomment'>/// surface enters an output</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This is emitted whenever a surface&#39;s creation, movement, or resizing</span>
    <span class='doccomment'>/// results in some part of it being within the scanout region of an</span>
    <span class='doccomment'>/// output.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Note that a surface may be overlapping with zero or more outputs.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: output,</span>
    <span class='ident'>Enter</span>(<span class='ident'>ProxyId</span>,),
    <span class='doccomment'>/// surface leaves an output</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This is emitted whenever a surface&#39;s creation, movement, or resizing</span>
    <span class='doccomment'>/// results in it no longer having any part of it within the scanout region</span>
    <span class='doccomment'>/// of an output.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: output,</span>
    <span class='ident'>Leave</span>(<span class='ident'>ProxyId</span>,),
}

<span class='kw'>fn</span> <span class='ident'>wl_surface_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wrap_proxy</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>))};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlSurfaceEvent</span>::<span class='ident'>Enter</span>(<span class='ident'>arg_0</span>,))
        },
        <span class='number'>1</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wrap_proxy</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>))};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlSurfaceEvent</span>::<span class='ident'>Leave</span>(<span class='ident'>arg_0</span>,))
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlSurface</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlSurface</span> {

    <span class='doccomment'>/// delete surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Deletes the surface and invalidates its object ID.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>destroy</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SURFACE_DESTROY</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }

    <span class='doccomment'>/// set the surface contents</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Set a buffer as the content of this surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The new size of the surface is calculated based on the buffer</span>
    <span class='doccomment'>/// size transformed by the inverse buffer_transform and the</span>
    <span class='doccomment'>/// inverse buffer_scale. This means that the supplied buffer</span>
    <span class='doccomment'>/// must be an integer multiple of the buffer_scale.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The x and y arguments specify the location of the new pending</span>
    <span class='doccomment'>/// buffer&#39;s upper left corner, relative to the current buffer&#39;s upper</span>
    <span class='doccomment'>/// left corner, in surface local coordinates. In other words, the</span>
    <span class='doccomment'>/// x and y, combined with the new surface size define in which</span>
    <span class='doccomment'>/// directions the surface&#39;s size changes.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Surface contents are double-buffered state, see wl_surface.commit.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The initial surface contents are void; there is no content.</span>
    <span class='doccomment'>/// wl_surface.attach assigns the given wl_buffer as the pending</span>
    <span class='doccomment'>/// wl_buffer. wl_surface.commit makes the pending wl_buffer the new</span>
    <span class='doccomment'>/// surface contents, and the size of the surface becomes the size</span>
    <span class='doccomment'>/// calculated from the wl_buffer, as described above. After commit,</span>
    <span class='doccomment'>/// there is no pending buffer until the next attach.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Committing a pending wl_buffer allows the compositor to read the</span>
    <span class='doccomment'>/// pixels in the wl_buffer. The compositor may access the pixels at</span>
    <span class='doccomment'>/// any time after the wl_surface.commit request. When the compositor</span>
    <span class='doccomment'>/// will not access the pixels anymore, it will send the</span>
    <span class='doccomment'>/// wl_buffer.release event. Only after receiving wl_buffer.release,</span>
    <span class='doccomment'>/// the client may re-use the wl_buffer. A wl_buffer that has been</span>
    <span class='doccomment'>/// attached and then replaced by another attach instead of committed</span>
    <span class='doccomment'>/// will not receive a release event, and is not used by the</span>
    <span class='doccomment'>/// compositor.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Destroying the wl_buffer after wl_buffer.release does not change</span>
    <span class='doccomment'>/// the surface contents. However, if the client destroys the</span>
    <span class='doccomment'>/// wl_buffer before receiving the wl_buffer.release event, the surface</span>
    <span class='doccomment'>/// contents become undefined immediately.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// If wl_surface.attach is sent with a NULL wl_buffer, the</span>
    <span class='doccomment'>/// following wl_surface.commit will remove the surface content.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>attach</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>buffer</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='ident'>WlBuffer</span><span class='op'>&gt;</span>, <span class='ident'>x</span>: <span class='ident'>i32</span>, <span class='ident'>y</span>: <span class='ident'>i32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SURFACE_ATTACH</span>
           , <span class='ident'>buffer</span>.<span class='ident'>map</span>(<span class='ident'>Proxy</span>::<span class='ident'>ptr</span>).<span class='ident'>unwrap_or</span>(<span class='ident'>ptr</span>::<span class='ident'>null_mut</span>()), <span class='ident'>x</span>, <span class='ident'>y</span>) };
    }

    <span class='doccomment'>/// mark part of the surface damaged</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request is used to describe the regions where the pending</span>
    <span class='doccomment'>/// buffer is different from the current surface contents, and where</span>
    <span class='doccomment'>/// the surface therefore needs to be repainted. The pending buffer</span>
    <span class='doccomment'>/// must be set by wl_surface.attach before sending damage. The</span>
    <span class='doccomment'>/// compositor ignores the parts of the damage that fall outside of</span>
    <span class='doccomment'>/// the surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Damage is double-buffered state, see wl_surface.commit.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The damage rectangle is specified in surface local coordinates.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The initial value for pending damage is empty: no damage.</span>
    <span class='doccomment'>/// wl_surface.damage adds pending damage: the new pending damage</span>
    <span class='doccomment'>/// is the union of old pending damage and the given rectangle.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// wl_surface.commit assigns pending damage as the current damage,</span>
    <span class='doccomment'>/// and clears pending damage. The server will clear the current</span>
    <span class='doccomment'>/// damage as it repaints the surface.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>damage</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>x</span>: <span class='ident'>i32</span>, <span class='ident'>y</span>: <span class='ident'>i32</span>, <span class='ident'>width</span>: <span class='ident'>i32</span>, <span class='ident'>height</span>: <span class='ident'>i32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SURFACE_DAMAGE</span>
           , <span class='ident'>x</span>, <span class='ident'>y</span>, <span class='ident'>width</span>, <span class='ident'>height</span>) };
    }

    <span class='doccomment'>/// request a frame throttling hint</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Request a notification when it is a good time start drawing a new</span>
    <span class='doccomment'>/// frame, by creating a frame callback. This is useful for throttling</span>
    <span class='doccomment'>/// redrawing operations, and driving animations.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// When a client is animating on a wl_surface, it can use the &#39;frame&#39;</span>
    <span class='doccomment'>/// request to get notified when it is a good time to draw and commit the</span>
    <span class='doccomment'>/// next frame of animation. If the client commits an update earlier than</span>
    <span class='doccomment'>/// that, it is likely that some updates will not make it to the display,</span>
    <span class='doccomment'>/// and the client is wasting resources by drawing too often.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The frame request will take effect on the next wl_surface.commit.</span>
    <span class='doccomment'>/// The notification will only be posted for one frame unless</span>
    <span class='doccomment'>/// requested again. For a wl_surface, the notifications are posted in</span>
    <span class='doccomment'>/// the order the frame requests were committed.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The server must send the notifications so that a client</span>
    <span class='doccomment'>/// will not send excessive updates, while still allowing</span>
    <span class='doccomment'>/// the highest possible update rate for clients that wait for the reply</span>
    <span class='doccomment'>/// before drawing again. The server should give some time for the client</span>
    <span class='doccomment'>/// to draw and commit after sending the frame callback events to let them</span>
    <span class='doccomment'>/// hit the next output refresh.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A server should avoid signalling the frame callbacks if the</span>
    <span class='doccomment'>/// surface is not visible in any way, e.g. the surface is off-screen,</span>
    <span class='doccomment'>/// or completely obscured by other opaque surfaces.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The object returned by this request will be destroyed by the</span>
    <span class='doccomment'>/// compositor after the callback is fired and as such the client must not</span>
    <span class='doccomment'>/// attempt to use it after that point.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The callback_data passed in the callback is the current time, in</span>
    <span class='doccomment'>/// milliseconds, with an undefined base.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>frame</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlCallback</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SURFACE_FRAME</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_callback_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlCallback</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }

    <span class='doccomment'>/// set opaque region</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request sets the region of the surface that contains</span>
    <span class='doccomment'>/// opaque content.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The opaque region is an optimization hint for the compositor</span>
    <span class='doccomment'>/// that lets it optimize out redrawing of content behind opaque</span>
    <span class='doccomment'>/// regions.  Setting an opaque region is not required for correct</span>
    <span class='doccomment'>/// behaviour, but marking transparent content as opaque will result</span>
    <span class='doccomment'>/// in repaint artifacts.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The opaque region is specified in surface local coordinates.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The compositor ignores the parts of the opaque region that fall</span>
    <span class='doccomment'>/// outside of the surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Opaque region is double-buffered state, see wl_surface.commit.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// wl_surface.set_opaque_region changes the pending opaque region.</span>
    <span class='doccomment'>/// wl_surface.commit copies the pending region to the current region.</span>
    <span class='doccomment'>/// Otherwise, the pending and current regions are never changed.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The initial value for opaque region is empty. Setting the pending</span>
    <span class='doccomment'>/// opaque region has copy semantics, and the wl_region object can be</span>
    <span class='doccomment'>/// destroyed immediately. A NULL wl_region causes the pending opaque</span>
    <span class='doccomment'>/// region to be set to empty.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_opaque_region</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>region</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='ident'>WlRegion</span><span class='op'>&gt;</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SURFACE_SET_OPAQUE_REGION</span>
           , <span class='ident'>region</span>.<span class='ident'>map</span>(<span class='ident'>Proxy</span>::<span class='ident'>ptr</span>).<span class='ident'>unwrap_or</span>(<span class='ident'>ptr</span>::<span class='ident'>null_mut</span>())) };
    }

    <span class='doccomment'>/// set input region</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request sets the region of the surface that can receive</span>
    <span class='doccomment'>/// pointer and touch events.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Input events happening outside of this region will try the next</span>
    <span class='doccomment'>/// surface in the server surface stack. The compositor ignores the</span>
    <span class='doccomment'>/// parts of the input region that fall outside of the surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The input region is specified in surface local coordinates.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Input region is double-buffered state, see wl_surface.commit.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// wl_surface.set_input_region changes the pending input region.</span>
    <span class='doccomment'>/// wl_surface.commit copies the pending region to the current region.</span>
    <span class='doccomment'>/// Otherwise the pending and current regions are never changed,</span>
    <span class='doccomment'>/// except cursor and icon surfaces are special cases, see</span>
    <span class='doccomment'>/// wl_pointer.set_cursor and wl_data_device.start_drag.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The initial value for input region is infinite. That means the</span>
    <span class='doccomment'>/// whole surface will accept input. Setting the pending input region</span>
    <span class='doccomment'>/// has copy semantics, and the wl_region object can be destroyed</span>
    <span class='doccomment'>/// immediately. A NULL wl_region causes the input region to be set</span>
    <span class='doccomment'>/// to infinite.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_input_region</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>region</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='ident'>WlRegion</span><span class='op'>&gt;</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SURFACE_SET_INPUT_REGION</span>
           , <span class='ident'>region</span>.<span class='ident'>map</span>(<span class='ident'>Proxy</span>::<span class='ident'>ptr</span>).<span class='ident'>unwrap_or</span>(<span class='ident'>ptr</span>::<span class='ident'>null_mut</span>())) };
    }

    <span class='doccomment'>/// commit pending surface state</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Surface state (input, opaque, and damage regions, attached buffers,</span>
    <span class='doccomment'>/// etc.) is double-buffered. Protocol requests modify the pending</span>
    <span class='doccomment'>/// state, as opposed to current state in use by the compositor. Commit</span>
    <span class='doccomment'>/// request atomically applies all pending state, replacing the current</span>
    <span class='doccomment'>/// state. After commit, the new pending state is as documented for each</span>
    <span class='doccomment'>/// related request.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// On commit, a pending wl_buffer is applied first, all other state</span>
    <span class='doccomment'>/// second. This means that all coordinates in double-buffered state are</span>
    <span class='doccomment'>/// relative to the new wl_buffer coming into use, except for</span>
    <span class='doccomment'>/// wl_surface.attach itself. If there is no pending wl_buffer, the</span>
    <span class='doccomment'>/// coordinates are relative to the current surface contents.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// All requests that need a commit to become effective are documented</span>
    <span class='doccomment'>/// to affect double-buffered state.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Other interfaces may add further double-buffered surface state.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>commit</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SURFACE_COMMIT</span>
           ) };
    }

    <span class='doccomment'>/// sets the buffer transformation</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request sets an optional transformation on how the compositor</span>
    <span class='doccomment'>/// interprets the contents of the buffer attached to the surface. The</span>
    <span class='doccomment'>/// accepted values for the transform parameter are the values for</span>
    <span class='doccomment'>/// wl_output.transform.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Buffer transform is double-buffered state, see wl_surface.commit.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A newly created surface has its buffer transformation set to normal.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// wl_surface.set_buffer_transform changes the pending buffer</span>
    <span class='doccomment'>/// transformation. wl_surface.commit copies the pending buffer</span>
    <span class='doccomment'>/// transformation to the current one. Otherwise, the pending and current</span>
    <span class='doccomment'>/// values are never changed.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The purpose of this request is to allow clients to render content</span>
    <span class='doccomment'>/// according to the output transform, thus permiting the compositor to</span>
    <span class='doccomment'>/// use certain optimizations even if the display is rotated. Using</span>
    <span class='doccomment'>/// hardware overlays and scanning out a client buffer for fullscreen</span>
    <span class='doccomment'>/// surfaces are examples of such optimizations. Those optimizations are</span>
    <span class='doccomment'>/// highly dependent on the compositor implementation, so the use of this</span>
    <span class='doccomment'>/// request should be considered on a case-by-case basis.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Note that if the transform value includes 90 or 270 degree rotation,</span>
    <span class='doccomment'>/// the width of the buffer will become the surface height and the height</span>
    <span class='doccomment'>/// of the buffer will become the surface width.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// If transform is not one of the values from the</span>
    <span class='doccomment'>/// wl_output.transform enum the invalid_transform protocol error</span>
    <span class='doccomment'>/// is raised.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Requires interface version `&gt;= 2`.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_buffer_transform</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>transform</span>: <span class='ident'>i32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SURFACE_SET_BUFFER_TRANSFORM</span>
           , <span class='ident'>transform</span>) };
    }

    <span class='doccomment'>/// sets the buffer scaling factor</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request sets an optional scaling factor on how the compositor</span>
    <span class='doccomment'>/// interprets the contents of the buffer attached to the window.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Buffer scale is double-buffered state, see wl_surface.commit.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A newly created surface has its buffer scale set to 1.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// wl_surface.set_buffer_scale changes the pending buffer scale.</span>
    <span class='doccomment'>/// wl_surface.commit copies the pending buffer scale to the current one.</span>
    <span class='doccomment'>/// Otherwise, the pending and current values are never changed.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The purpose of this request is to allow clients to supply higher</span>
    <span class='doccomment'>/// resolution buffer data for use on high resolution outputs. Its</span>
    <span class='doccomment'>/// intended that you pick the same	buffer scale as the scale of the</span>
    <span class='doccomment'>/// output that the surface is displayed on.This means the compositor</span>
    <span class='doccomment'>/// can avoid scaling when rendering the surface on that output.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Note that if the scale is larger than 1, then you have to attach</span>
    <span class='doccomment'>/// a buffer that is larger (by a factor of scale in each dimension)</span>
    <span class='doccomment'>/// than the desired surface size.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// If scale is not positive the invalid_scale protocol error is</span>
    <span class='doccomment'>/// raised.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Requires interface version `&gt;= 3`.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_buffer_scale</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>scale</span>: <span class='ident'>i32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SURFACE_SET_BUFFER_SCALE</span>
           , <span class='ident'>scale</span>) };
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlSurface</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_seat</span>
<span class='comment'>//</span>

<span class='doccomment'>/// group of input devices</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A seat is a group of keyboards, pointer and touch devices. This</span>
<span class='doccomment'>/// object is published as a global during start up, or when such a</span>
<span class='doccomment'>/// device is hot plugged.  A seat typically has a pointer and</span>
<span class='doccomment'>/// maintains a keyboard focus and a pointer focus.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlSeat</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlSeat</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlSeat</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlSeat</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_seat_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_seat&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>5</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlSeat</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_seat_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlSeat</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlSeat</span> {
        <span class='ident'>WlSeat</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlSeat</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_seat::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='doccomment'>/// seat capability bitmask</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// This is a bitmask of capabilities this seat has; if a member is</span>
<span class='doccomment'>/// set, then it is present on the seat.</span>
<span class='kw'>pub</span> <span class='kw'>mod</span> <span class='ident'>WlSeatCapability</span> {
<span class='macro'>bitflags</span><span class='macro'>!</span> {
    <span class='kw'>pub</span> <span class='ident'>flags</span> <span class='ident'>WlSeatCapability</span>: <span class='ident'>u32</span> {
    <span class='doccomment'>/// The seat has pointer devices</span>
        <span class='kw'>const</span> <span class='ident'>Pointer</span> <span class='op'>=</span> <span class='number'>1</span>,
    <span class='doccomment'>/// The seat has one or more keyboards</span>
        <span class='kw'>const</span> <span class='ident'>Keyboard</span> <span class='op'>=</span> <span class='number'>2</span>,
    <span class='doccomment'>/// The seat has touch devices</span>
        <span class='kw'>const</span> <span class='ident'>Touch</span> <span class='op'>=</span> <span class='number'>4</span>,
    }
}
}

<span class='kw'>fn</span> <span class='ident'>wl_seat_capability_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlSeatCapability</span>::<span class='ident'>WlSeatCapability</span><span class='op'>&gt;</span> {
    <span class='prelude-val'>Some</span>(<span class='ident'>WlSeatCapability</span>::<span class='ident'>WlSeatCapability</span>::<span class='ident'>from_bits_truncate</span>(<span class='ident'>n</span>))
}

<span class='comment'>// wl_seat opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_SEAT_GET_POINTER</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_SEAT_GET_KEYBOARD</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;
<span class='kw'>const</span> <span class='ident'>WL_SEAT_GET_TOUCH</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>2</span>;
<span class='kw'>const</span> <span class='ident'>WL_SEAT_RELEASE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>3</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlSeatEvent</span> {
    <span class='doccomment'>/// seat capabilities changed</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This is emitted whenever a seat gains or loses the pointer,</span>
    <span class='doccomment'>/// keyboard or touch capabilities.  The argument is a capability</span>
    <span class='doccomment'>/// enum containing the complete set of capabilities this seat has.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: capabilities,</span>
    <span class='ident'>Capabilities</span>(<span class='ident'>WlSeatCapability</span>::<span class='ident'>WlSeatCapability</span>,),
    <span class='doccomment'>/// unique identifier for this seat</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// In a multiseat configuration this can be used by the client to help</span>
    <span class='doccomment'>/// identify which physical devices the seat represents. Based on</span>
    <span class='doccomment'>/// the seat configuration used by the compositor.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: name,</span>
    <span class='ident'>Name</span>(<span class='ident'>String</span>,),
}

<span class='kw'>fn</span> <span class='ident'>wl_seat_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>wl_seat_capability_from_raw</span>(<span class='ident'>arg_0</span> <span class='kw'>as</span> <span class='ident'>u32</span>) { <span class='prelude-val'>Some</span>(<span class='ident'>a</span>) <span class='op'>=&gt;</span> <span class='ident'>a</span>, <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='kw'>return</span> <span class='prelude-val'>None</span> };
            <span class='prelude-val'>Some</span>(<span class='ident'>WlSeatEvent</span>::<span class='ident'>Capabilities</span>(<span class='ident'>arg_0</span>,))
        },
        <span class='number'>1</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>String</span>::<span class='ident'>from_utf8_lossy</span>(<span class='ident'>CStr</span>::<span class='ident'>from_ptr</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_char</span>)).<span class='ident'>to_bytes</span>()).<span class='ident'>into_owned</span>()};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlSeatEvent</span>::<span class='ident'>Name</span>(<span class='ident'>arg_0</span>,))
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlSeat</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlSeat</span> {

    <span class='doccomment'>/// return pointer object</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The ID provided will be initialized to the wl_pointer interface</span>
    <span class='doccomment'>/// for this seat.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request only takes effect if the seat has the pointer</span>
    <span class='doccomment'>/// capability.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>get_pointer</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlPointer</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SEAT_GET_POINTER</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_pointer_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlPointer</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }

    <span class='doccomment'>/// return keyboard object</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The ID provided will be initialized to the wl_keyboard interface</span>
    <span class='doccomment'>/// for this seat.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request only takes effect if the seat has the keyboard</span>
    <span class='doccomment'>/// capability.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>get_keyboard</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlKeyboard</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SEAT_GET_KEYBOARD</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_keyboard_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlKeyboard</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }

    <span class='doccomment'>/// return touch object</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The ID provided will be initialized to the wl_touch interface</span>
    <span class='doccomment'>/// for this seat.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request only takes effect if the seat has the touch</span>
    <span class='doccomment'>/// capability.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>get_touch</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlTouch</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SEAT_GET_TOUCH</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_touch_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlTouch</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }

    <span class='doccomment'>/// release the seat object</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Using this request client can tell the server that it is not going to</span>
    <span class='doccomment'>/// use the seat object anymore.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Requires interface version `&gt;= 5`.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>release</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SEAT_RELEASE</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlSeat</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_pointer</span>
<span class='comment'>//</span>

<span class='doccomment'>/// pointer input device</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The wl_pointer interface represents one or more input devices,</span>
<span class='doccomment'>/// such as mice, which control the pointer location and pointer_focus</span>
<span class='doccomment'>/// of a seat.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The wl_pointer interface generates motion, enter and leave</span>
<span class='doccomment'>/// events for the surfaces that the pointer is located over,</span>
<span class='doccomment'>/// and button and axis events for button presses, button releases</span>
<span class='doccomment'>/// and scrolling.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlPointer</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlPointer</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlPointer</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlPointer</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_pointer_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_pointer&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>3</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlPointer</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_pointer_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlPointer</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlPointer</span> {
        <span class='ident'>WlPointer</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlPointer</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_pointer::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlPointerError</span> {
    <span class='doccomment'>/// given wl_surface has another role</span>
    <span class='ident'>Role</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='attribute'>#[<span class='ident'>doc</span>(<span class='ident'>hidden</span>)]</span>
    <span class='ident'>__not_univariant</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_pointer_error_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlPointerError</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlPointerError</span>::<span class='ident'>Role</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='doccomment'>/// physical button state</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Describes the physical state of a button which provoked the button</span>
<span class='doccomment'>/// event.</span>
<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlPointerButtonState</span> {
    <span class='doccomment'>/// The button is not pressed</span>
    <span class='ident'>Released</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='doccomment'>/// The button is pressed</span>
    <span class='ident'>Pressed</span> <span class='op'>=</span> <span class='number'>1</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_pointer_button_state_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlPointerButtonState</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlPointerButtonState</span>::<span class='ident'>Released</span>),
        <span class='number'>1</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlPointerButtonState</span>::<span class='ident'>Pressed</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='doccomment'>/// axis types</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Describes the axis types of scroll events.</span>
<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlPointerAxis</span> {
    <span class='ident'>VerticalScroll</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='ident'>HorizontalScroll</span> <span class='op'>=</span> <span class='number'>1</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_pointer_axis_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlPointerAxis</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlPointerAxis</span>::<span class='ident'>VerticalScroll</span>),
        <span class='number'>1</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlPointerAxis</span>::<span class='ident'>HorizontalScroll</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='comment'>// wl_pointer opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_POINTER_SET_CURSOR</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_POINTER_RELEASE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlPointerEvent</span> {
    <span class='doccomment'>/// enter event</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Notification that this seat&#39;s pointer is focused on a certain</span>
    <span class='doccomment'>/// surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// When an seat&#39;s focus enters a surface, the pointer image</span>
    <span class='doccomment'>/// is undefined and a client should respond to this event by setting</span>
    <span class='doccomment'>/// an appropriate pointer image with the set_cursor request.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: serial, surface, surface_x, surface_y,</span>
    <span class='ident'>Enter</span>(<span class='ident'>u32</span>,<span class='ident'>ProxyId</span>,<span class='ident'>f64</span>,<span class='ident'>f64</span>,),
    <span class='doccomment'>/// leave event</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Notification that this seat&#39;s pointer is no longer focused on</span>
    <span class='doccomment'>/// a certain surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The leave notification is sent before the enter notification</span>
    <span class='doccomment'>/// for the new focus.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: serial, surface,</span>
    <span class='ident'>Leave</span>(<span class='ident'>u32</span>,<span class='ident'>ProxyId</span>,),
    <span class='doccomment'>/// pointer motion event</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Notification of pointer location change. The arguments</span>
    <span class='doccomment'>/// surface_x and surface_y are the location relative to the</span>
    <span class='doccomment'>/// focused surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: time, surface_x, surface_y,</span>
    <span class='ident'>Motion</span>(<span class='ident'>u32</span>,<span class='ident'>f64</span>,<span class='ident'>f64</span>,),
    <span class='doccomment'>/// pointer button event</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Mouse button click and release notifications.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The location of the click is given by the last motion or</span>
    <span class='doccomment'>/// enter event.</span>
    <span class='doccomment'>/// The time argument is a timestamp with millisecond</span>
    <span class='doccomment'>/// granularity, with an undefined base.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: serial, time, button, state,</span>
    <span class='ident'>Button</span>(<span class='ident'>u32</span>,<span class='ident'>u32</span>,<span class='ident'>u32</span>,<span class='ident'>WlPointerButtonState</span>,),
    <span class='doccomment'>/// axis event</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Scroll and other axis notifications.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// For scroll events (vertical and horizontal scroll axes), the</span>
    <span class='doccomment'>/// value parameter is the length of a vector along the specified</span>
    <span class='doccomment'>/// axis in a coordinate space identical to those of motion events,</span>
    <span class='doccomment'>/// representing a relative movement along the specified axis.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// For devices that support movements non-parallel to axes multiple</span>
    <span class='doccomment'>/// axis events will be emitted.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// When applicable, for example for touch pads, the server can</span>
    <span class='doccomment'>/// choose to emit scroll events where the motion vector is</span>
    <span class='doccomment'>/// equivalent to a motion event vector.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// When applicable, clients can transform its view relative to the</span>
    <span class='doccomment'>/// scroll distance.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: time, axis, value,</span>
    <span class='ident'>Axis</span>(<span class='ident'>u32</span>,<span class='ident'>WlPointerAxis</span>,<span class='ident'>f64</span>,),
}

<span class='kw'>fn</span> <span class='ident'>wl_pointer_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wrap_proxy</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>))};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='kw'>let</span> <span class='ident'>arg_3</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>3</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlPointerEvent</span>::<span class='ident'>Enter</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,<span class='ident'>arg_3</span>,))
        },
        <span class='number'>1</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wrap_proxy</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>))};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlPointerEvent</span>::<span class='ident'>Leave</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,))
        },
        <span class='number'>2</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlPointerEvent</span>::<span class='ident'>Motion</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,))
        },
        <span class='number'>3</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_3</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>3</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_3</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>wl_pointer_button_state_from_raw</span>(<span class='ident'>arg_3</span> <span class='kw'>as</span> <span class='ident'>u32</span>) { <span class='prelude-val'>Some</span>(<span class='ident'>a</span>) <span class='op'>=&gt;</span> <span class='ident'>a</span>, <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='kw'>return</span> <span class='prelude-val'>None</span> };
            <span class='prelude-val'>Some</span>(<span class='ident'>WlPointerEvent</span>::<span class='ident'>Button</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,<span class='ident'>arg_3</span>,))
        },
        <span class='number'>4</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>wl_pointer_axis_from_raw</span>(<span class='ident'>arg_1</span> <span class='kw'>as</span> <span class='ident'>u32</span>) { <span class='prelude-val'>Some</span>(<span class='ident'>a</span>) <span class='op'>=&gt;</span> <span class='ident'>a</span>, <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='kw'>return</span> <span class='prelude-val'>None</span> };
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlPointerEvent</span>::<span class='ident'>Axis</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,))
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlPointer</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlPointer</span> {

    <span class='doccomment'>/// set the pointer surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Set the pointer surface, i.e., the surface that contains the</span>
    <span class='doccomment'>/// pointer image (cursor). This request gives the surface the role</span>
    <span class='doccomment'>/// of a cursor. If the surface already has another role, it raises</span>
    <span class='doccomment'>/// a protocol error.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The cursor actually changes only if the pointer</span>
    <span class='doccomment'>/// focus for this device is one of the requesting client&#39;s surfaces</span>
    <span class='doccomment'>/// or the surface parameter is the current pointer surface. If</span>
    <span class='doccomment'>/// there was a previous surface set with this request it is</span>
    <span class='doccomment'>/// replaced. If surface is NULL, the pointer image is hidden.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The parameters hotspot_x and hotspot_y define the position of</span>
    <span class='doccomment'>/// the pointer surface relative to the pointer location. Its</span>
    <span class='doccomment'>/// top-left corner is always at (x, y) - (hotspot_x, hotspot_y),</span>
    <span class='doccomment'>/// where (x, y) are the coordinates of the pointer location, in surface</span>
    <span class='doccomment'>/// local coordinates.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// On surface.attach requests to the pointer surface, hotspot_x</span>
    <span class='doccomment'>/// and hotspot_y are decremented by the x and y parameters</span>
    <span class='doccomment'>/// passed to the request. Attach must be confirmed by</span>
    <span class='doccomment'>/// wl_surface.commit as usual.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The hotspot can also be updated by passing the currently set</span>
    <span class='doccomment'>/// pointer surface to this request with new values for hotspot_x</span>
    <span class='doccomment'>/// and hotspot_y.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The current and pending input regions of the wl_surface are</span>
    <span class='doccomment'>/// cleared, and wl_surface.set_input_region is ignored until the</span>
    <span class='doccomment'>/// wl_surface is no longer used as the cursor. When the use as a</span>
    <span class='doccomment'>/// cursor ends, the current and pending input regions become</span>
    <span class='doccomment'>/// undefined, and the wl_surface is unmapped.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_cursor</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>serial</span>: <span class='ident'>u32</span>, <span class='ident'>surface</span>: <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='kw-2'>&amp;</span><span class='ident'>WlSurface</span><span class='op'>&gt;</span>, <span class='ident'>hotspot_x</span>: <span class='ident'>i32</span>, <span class='ident'>hotspot_y</span>: <span class='ident'>i32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_POINTER_SET_CURSOR</span>
           , <span class='ident'>serial</span>, <span class='ident'>surface</span>.<span class='ident'>map</span>(<span class='ident'>Proxy</span>::<span class='ident'>ptr</span>).<span class='ident'>unwrap_or</span>(<span class='ident'>ptr</span>::<span class='ident'>null_mut</span>()), <span class='ident'>hotspot_x</span>, <span class='ident'>hotspot_y</span>) };
    }

    <span class='doccomment'>/// release the pointer object</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Using this request client can tell the server that it is not going to</span>
    <span class='doccomment'>/// use the pointer object anymore.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This request destroys the pointer proxy object, so user must not call</span>
    <span class='doccomment'>/// wl_pointer_destroy() after using this request.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Requires interface version `&gt;= 3`.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>release</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_POINTER_RELEASE</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlPointer</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_keyboard</span>
<span class='comment'>//</span>

<span class='doccomment'>/// keyboard input device</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The wl_keyboard interface represents one or more keyboards</span>
<span class='doccomment'>/// associated with a seat.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlKeyboard</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlKeyboard</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlKeyboard</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlKeyboard</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_keyboard_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_keyboard&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>4</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlKeyboard</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_keyboard_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlKeyboard</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlKeyboard</span> {
        <span class='ident'>WlKeyboard</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlKeyboard</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_keyboard::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='doccomment'>/// keyboard mapping format</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// This specifies the format of the keymap provided to the</span>
<span class='doccomment'>/// client with the wl_keyboard.keymap event.</span>
<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlKeyboardKeymapFormat</span> {
    <span class='doccomment'>/// no keymap; client must understand how to interpret the raw keycode</span>
    <span class='ident'>NoKeymap</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='doccomment'>/// libxkbcommon compatible; to determine the xkb keycode, clients must add 8 to the key event keycode</span>
    <span class='ident'>XkbV1</span> <span class='op'>=</span> <span class='number'>1</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_keyboard_keymap_format_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlKeyboardKeymapFormat</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlKeyboardKeymapFormat</span>::<span class='ident'>NoKeymap</span>),
        <span class='number'>1</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlKeyboardKeymapFormat</span>::<span class='ident'>XkbV1</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='doccomment'>/// physical key state</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Describes the physical state of a key which provoked the key event.</span>
<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlKeyboardKeyState</span> {
    <span class='doccomment'>/// key is not pressed</span>
    <span class='ident'>Released</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='doccomment'>/// key is pressed</span>
    <span class='ident'>Pressed</span> <span class='op'>=</span> <span class='number'>1</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_keyboard_key_state_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlKeyboardKeyState</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlKeyboardKeyState</span>::<span class='ident'>Released</span>),
        <span class='number'>1</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlKeyboardKeyState</span>::<span class='ident'>Pressed</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='comment'>// wl_keyboard opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_KEYBOARD_RELEASE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlKeyboardEvent</span> {
    <span class='doccomment'>/// keyboard mapping</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This event provides a file descriptor to the client which can be</span>
    <span class='doccomment'>/// memory-mapped to provide a keyboard mapping description.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: format, fd, size,</span>
    <span class='ident'>Keymap</span>(<span class='ident'>WlKeyboardKeymapFormat</span>,::<span class='ident'>std</span>::<span class='ident'>os</span>::<span class='ident'>unix</span>::<span class='ident'>io</span>::<span class='ident'>RawFd</span>,<span class='ident'>u32</span>,),
    <span class='doccomment'>/// enter event</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Notification that this seat&#39;s keyboard focus is on a certain</span>
    <span class='doccomment'>/// surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: serial, surface, keys,</span>
    <span class='ident'>Enter</span>(<span class='ident'>u32</span>,<span class='ident'>ProxyId</span>,<span class='ident'>Vec</span><span class='op'>&lt;</span><span class='ident'>u8</span><span class='op'>&gt;</span>,),
    <span class='doccomment'>/// leave event</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Notification that this seat&#39;s keyboard focus is no longer on</span>
    <span class='doccomment'>/// a certain surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The leave notification is sent before the enter notification</span>
    <span class='doccomment'>/// for the new focus.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: serial, surface,</span>
    <span class='ident'>Leave</span>(<span class='ident'>u32</span>,<span class='ident'>ProxyId</span>,),
    <span class='doccomment'>/// key event</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A key was pressed or released.</span>
    <span class='doccomment'>/// The time argument is a timestamp with millisecond</span>
    <span class='doccomment'>/// granularity, with an undefined base.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: serial, time, key, state,</span>
    <span class='ident'>Key</span>(<span class='ident'>u32</span>,<span class='ident'>u32</span>,<span class='ident'>u32</span>,<span class='ident'>WlKeyboardKeyState</span>,),
    <span class='doccomment'>/// modifier and group state</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Notifies clients that the modifier and/or group state has</span>
    <span class='doccomment'>/// changed, and it should update its local state.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: serial, mods_depressed, mods_latched, mods_locked, group,</span>
    <span class='ident'>Modifiers</span>(<span class='ident'>u32</span>,<span class='ident'>u32</span>,<span class='ident'>u32</span>,<span class='ident'>u32</span>,<span class='ident'>u32</span>,),
    <span class='doccomment'>/// repeat rate and delay</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Informs the client about the keyboard&#39;s repeat rate and delay.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This event is sent as soon as the wl_keyboard object has been created,</span>
    <span class='doccomment'>/// and is guaranteed to be received by the client before any key press</span>
    <span class='doccomment'>/// event.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Negative values for either rate or delay are illegal. A rate of zero</span>
    <span class='doccomment'>/// will disable any repeating (regardless of the value of delay).</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This event can be sent later on as well with a new value if necessary,</span>
    <span class='doccomment'>/// so clients should continue listening for the event past the creation</span>
    <span class='doccomment'>/// of wl_keyboard.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: rate, delay,</span>
    <span class='ident'>RepeatInfo</span>(<span class='ident'>i32</span>,<span class='ident'>i32</span>,),
}

<span class='kw'>fn</span> <span class='ident'>wl_keyboard_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>wl_keyboard_keymap_format_from_raw</span>(<span class='ident'>arg_0</span> <span class='kw'>as</span> <span class='ident'>u32</span>) { <span class='prelude-val'>Some</span>(<span class='ident'>a</span>) <span class='op'>=&gt;</span> <span class='ident'>a</span>, <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='kw'>return</span> <span class='prelude-val'>None</span> };
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlKeyboardEvent</span>::<span class='ident'>Keymap</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,))
        },
        <span class='number'>1</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wrap_proxy</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>))};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {{ <span class='kw'>let</span> <span class='ident'>array</span> <span class='op'>=</span> <span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_array</span>); ::<span class='ident'>std</span>::<span class='ident'>slice</span>::<span class='ident'>from_raw_parts</span>((<span class='op'>*</span><span class='ident'>array</span>).<span class='ident'>data</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u8</span>, (<span class='op'>*</span><span class='ident'>array</span>).<span class='ident'>size</span> <span class='kw'>as</span> <span class='ident'>usize</span>).<span class='ident'>to_owned</span>() }};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlKeyboardEvent</span>::<span class='ident'>Enter</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,))
        },
        <span class='number'>2</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wrap_proxy</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>))};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlKeyboardEvent</span>::<span class='ident'>Leave</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,))
        },
        <span class='number'>3</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_3</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>3</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_3</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>wl_keyboard_key_state_from_raw</span>(<span class='ident'>arg_3</span> <span class='kw'>as</span> <span class='ident'>u32</span>) { <span class='prelude-val'>Some</span>(<span class='ident'>a</span>) <span class='op'>=&gt;</span> <span class='ident'>a</span>, <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='kw'>return</span> <span class='prelude-val'>None</span> };
            <span class='prelude-val'>Some</span>(<span class='ident'>WlKeyboardEvent</span>::<span class='ident'>Key</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,<span class='ident'>arg_3</span>,))
        },
        <span class='number'>4</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_3</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>3</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_4</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>4</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlKeyboardEvent</span>::<span class='ident'>Modifiers</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,<span class='ident'>arg_3</span>,<span class='ident'>arg_4</span>,))
        },
        <span class='number'>5</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlKeyboardEvent</span>::<span class='ident'>RepeatInfo</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,))
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlKeyboard</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlKeyboard</span> {

    <span class='doccomment'>/// release the keyboard object</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Requires interface version `&gt;= 3`.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>release</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_KEYBOARD_RELEASE</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlKeyboard</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_touch</span>
<span class='comment'>//</span>

<span class='doccomment'>/// touchscreen input device</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The wl_touch interface represents a touchscreen</span>
<span class='doccomment'>/// associated with a seat.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Touch interactions can consist of one or more contacts.</span>
<span class='doccomment'>/// For each contact, a series of events is generated, starting</span>
<span class='doccomment'>/// with a down event, followed by zero or more motion events,</span>
<span class='doccomment'>/// and ending with an up event. Events relating to the same</span>
<span class='doccomment'>/// contact point can be identified by the ID of the sequence.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlTouch</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlTouch</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlTouch</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlTouch</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_touch_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_touch&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>3</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlTouch</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_touch_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlTouch</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlTouch</span> {
        <span class='ident'>WlTouch</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlTouch</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_touch::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='comment'>// wl_touch opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_TOUCH_RELEASE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;

<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlTouchEvent</span> {
    <span class='doccomment'>/// touch down event and beginning of a touch sequence</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A new touch point has appeared on the surface. This touch point is</span>
    <span class='doccomment'>/// assigned a unique @id. Future events from this touchpoint reference</span>
    <span class='doccomment'>/// this ID. The ID ceases to be valid after a touch up event and may be</span>
    <span class='doccomment'>/// re-used in the future.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: serial, time, surface, id, x, y,</span>
    <span class='ident'>Down</span>(<span class='ident'>u32</span>,<span class='ident'>u32</span>,<span class='ident'>ProxyId</span>,<span class='ident'>i32</span>,<span class='ident'>f64</span>,<span class='ident'>f64</span>,),
    <span class='doccomment'>/// end of a touch event sequence</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The touch point has disappeared. No further events will be sent for</span>
    <span class='doccomment'>/// this touchpoint and the touch point&#39;s ID is released and may be</span>
    <span class='doccomment'>/// re-used in a future touch down event.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: serial, time, id,</span>
    <span class='ident'>Up</span>(<span class='ident'>u32</span>,<span class='ident'>u32</span>,<span class='ident'>i32</span>,),
    <span class='doccomment'>/// update of touch point coordinates</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A touchpoint has changed coordinates.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: time, id, x, y,</span>
    <span class='ident'>Motion</span>(<span class='ident'>u32</span>,<span class='ident'>i32</span>,<span class='ident'>f64</span>,<span class='ident'>f64</span>,),
    <span class='doccomment'>/// end of touch frame event</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Indicates the end of a contact point list.</span>
    <span class='ident'>Frame</span>,
    <span class='doccomment'>/// touch session cancelled</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Sent if the compositor decides the touch stream is a global</span>
    <span class='doccomment'>/// gesture. No further events are sent to the clients from that</span>
    <span class='doccomment'>/// particular gesture. Touch cancellation applies to all touch points</span>
    <span class='doccomment'>/// currently active on this client&#39;s surface. The client is</span>
    <span class='doccomment'>/// responsible for finalizing the touch points, future touch points on</span>
    <span class='doccomment'>/// this surface may re-use the touch point ID.</span>
    <span class='ident'>Cancel</span>,
}

<span class='kw'>fn</span> <span class='ident'>wl_touch_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wrap_proxy</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>))};
            <span class='kw'>let</span> <span class='ident'>arg_3</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>3</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_4</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>4</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='kw'>let</span> <span class='ident'>arg_5</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>5</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlTouchEvent</span>::<span class='ident'>Down</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,<span class='ident'>arg_3</span>,<span class='ident'>arg_4</span>,<span class='ident'>arg_5</span>,))
        },
        <span class='number'>1</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlTouchEvent</span>::<span class='ident'>Up</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,))
        },
        <span class='number'>2</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='kw'>let</span> <span class='ident'>arg_3</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>wl_fixed_to_double</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>3</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>))};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlTouchEvent</span>::<span class='ident'>Motion</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,<span class='ident'>arg_3</span>,))
        },
        <span class='number'>3</span> <span class='op'>=&gt;</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>WlTouchEvent</span>::<span class='ident'>Frame</span>)
        },
        <span class='number'>4</span> <span class='op'>=&gt;</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>WlTouchEvent</span>::<span class='ident'>Cancel</span>)
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlTouch</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlTouch</span> {

    <span class='doccomment'>/// release the touch object</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Requires interface version `&gt;= 3`.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>release</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_TOUCH_RELEASE</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlTouch</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_output</span>
<span class='comment'>//</span>

<span class='doccomment'>/// compositor output region</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// An output describes part of the compositor geometry.  The</span>
<span class='doccomment'>/// compositor works in the &#39;compositor coordinate system&#39; and an</span>
<span class='doccomment'>/// output corresponds to rectangular area in that space that is</span>
<span class='doccomment'>/// actually visible.  This typically corresponds to a monitor that</span>
<span class='doccomment'>/// displays part of the compositor space.  This object is published</span>
<span class='doccomment'>/// as global during start up, or when a monitor is hotplugged.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlOutput</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlOutput</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlOutput</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlOutput</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_output_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_output&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>2</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlOutput</span> {
        <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_add_dispatcher</span>, <span class='ident'>ptr</span>, <span class='ident'>event_dispatcher</span>, <span class='ident'>wl_output_implem</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span>, <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>());
        <span class='ident'>WlOutput</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlOutput</span> {
        <span class='ident'>WlOutput</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlOutput</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_output::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='doccomment'>/// subpixel geometry information</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// This enumeration describes how the physical</span>
<span class='doccomment'>/// pixels on an output are laid out.</span>
<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlOutputSubpixel</span> {
    <span class='ident'>Unknown</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='prelude-val'>None</span> <span class='op'>=</span> <span class='number'>1</span>,
    <span class='ident'>HorizontalRgb</span> <span class='op'>=</span> <span class='number'>2</span>,
    <span class='ident'>HorizontalBgr</span> <span class='op'>=</span> <span class='number'>3</span>,
    <span class='ident'>VerticalRgb</span> <span class='op'>=</span> <span class='number'>4</span>,
    <span class='ident'>VerticalBgr</span> <span class='op'>=</span> <span class='number'>5</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_output_subpixel_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlOutputSubpixel</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputSubpixel</span>::<span class='ident'>Unknown</span>),
        <span class='number'>1</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputSubpixel</span>::<span class='prelude-val'>None</span>),
        <span class='number'>2</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputSubpixel</span>::<span class='ident'>HorizontalRgb</span>),
        <span class='number'>3</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputSubpixel</span>::<span class='ident'>HorizontalBgr</span>),
        <span class='number'>4</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputSubpixel</span>::<span class='ident'>VerticalRgb</span>),
        <span class='number'>5</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputSubpixel</span>::<span class='ident'>VerticalBgr</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='doccomment'>/// transform from framebuffer to output</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// This describes the transform that a compositor will apply to a</span>
<span class='doccomment'>/// surface to compensate for the rotation or mirroring of an</span>
<span class='doccomment'>/// output device.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The flipped values correspond to an initial flip around a</span>
<span class='doccomment'>/// vertical axis followed by rotation.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The purpose is mainly to allow clients render accordingly and</span>
<span class='doccomment'>/// tell the compositor, so that for fullscreen surfaces, the</span>
<span class='doccomment'>/// compositor will still be able to scan out directly from client</span>
<span class='doccomment'>/// surfaces.</span>
<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlOutputTransform</span> {
    <span class='ident'>Normal</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='ident'>T90</span> <span class='op'>=</span> <span class='number'>1</span>,
    <span class='ident'>T180</span> <span class='op'>=</span> <span class='number'>2</span>,
    <span class='ident'>T270</span> <span class='op'>=</span> <span class='number'>3</span>,
    <span class='ident'>Flipped</span> <span class='op'>=</span> <span class='number'>4</span>,
    <span class='ident'>Flipped90</span> <span class='op'>=</span> <span class='number'>5</span>,
    <span class='ident'>Flipped180</span> <span class='op'>=</span> <span class='number'>6</span>,
    <span class='ident'>Flipped270</span> <span class='op'>=</span> <span class='number'>7</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_output_transform_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlOutputTransform</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputTransform</span>::<span class='ident'>Normal</span>),
        <span class='number'>1</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputTransform</span>::<span class='ident'>T90</span>),
        <span class='number'>2</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputTransform</span>::<span class='ident'>T180</span>),
        <span class='number'>3</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputTransform</span>::<span class='ident'>T270</span>),
        <span class='number'>4</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputTransform</span>::<span class='ident'>Flipped</span>),
        <span class='number'>5</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputTransform</span>::<span class='ident'>Flipped90</span>),
        <span class='number'>6</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputTransform</span>::<span class='ident'>Flipped180</span>),
        <span class='number'>7</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputTransform</span>::<span class='ident'>Flipped270</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='doccomment'>/// mode information</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// These flags describe properties of an output mode.</span>
<span class='doccomment'>/// They are used in the flags bitfield of the mode event.</span>
<span class='kw'>pub</span> <span class='kw'>mod</span> <span class='ident'>WlOutputMode</span> {
<span class='macro'>bitflags</span><span class='macro'>!</span> {
    <span class='kw'>pub</span> <span class='ident'>flags</span> <span class='ident'>WlOutputMode</span>: <span class='ident'>u32</span> {
    <span class='doccomment'>/// indicates this is the current mode</span>
        <span class='kw'>const</span> <span class='ident'>Current</span> <span class='op'>=</span> <span class='number'>0x1</span>,
    <span class='doccomment'>/// indicates this is the preferred mode</span>
        <span class='kw'>const</span> <span class='ident'>Preferred</span> <span class='op'>=</span> <span class='number'>0x2</span>,
    }
}
}

<span class='kw'>fn</span> <span class='ident'>wl_output_mode_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlOutputMode</span>::<span class='ident'>WlOutputMode</span><span class='op'>&gt;</span> {
    <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputMode</span>::<span class='ident'>WlOutputMode</span>::<span class='ident'>from_bits_truncate</span>(<span class='ident'>n</span>))
}

<span class='comment'>// wl_output opcodes</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlOutputEvent</span> {
    <span class='doccomment'>/// properties of the output</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The geometry event describes geometric properties of the output.</span>
    <span class='doccomment'>/// The event is sent when binding to the output object and whenever</span>
    <span class='doccomment'>/// any of the properties change.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: x, y, physical_width, physical_height, subpixel, make, model, transform,</span>
    <span class='ident'>Geometry</span>(<span class='ident'>i32</span>,<span class='ident'>i32</span>,<span class='ident'>i32</span>,<span class='ident'>i32</span>,<span class='ident'>WlOutputSubpixel</span>,<span class='ident'>String</span>,<span class='ident'>String</span>,<span class='ident'>WlOutputTransform</span>,),
    <span class='doccomment'>/// advertise available modes for the output</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The mode event describes an available mode for the output.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The event is sent when binding to the output object and there</span>
    <span class='doccomment'>/// will always be one mode, the current mode.  The event is sent</span>
    <span class='doccomment'>/// again if an output changes mode, for the mode that is now</span>
    <span class='doccomment'>/// current.  In other words, the current mode is always the last</span>
    <span class='doccomment'>/// mode that was received with the current flag set.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The size of a mode is given in physical hardware units of</span>
    <span class='doccomment'>/// the output device. This is not necessarily the same as</span>
    <span class='doccomment'>/// the output size in the global compositor space. For instance,</span>
    <span class='doccomment'>/// the output may be scaled, as described in wl_output.scale,</span>
    <span class='doccomment'>/// or transformed , as described in wl_output.transform.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: flags, width, height, refresh,</span>
    <span class='ident'>Mode</span>(<span class='ident'>WlOutputMode</span>::<span class='ident'>WlOutputMode</span>,<span class='ident'>i32</span>,<span class='ident'>i32</span>,<span class='ident'>i32</span>,),
    <span class='doccomment'>/// sent all information about output</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This event is sent after all other properties has been</span>
    <span class='doccomment'>/// sent after binding to the output object and after any</span>
    <span class='doccomment'>/// other property changes done after that. This allows</span>
    <span class='doccomment'>/// changes to the output properties to be seen as</span>
    <span class='doccomment'>/// atomic, even if they happen via multiple events.</span>
    <span class='ident'>Done</span>,
    <span class='doccomment'>/// output scaling properties</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This event contains scaling geometry information</span>
    <span class='doccomment'>/// that is not in the geometry event. It may be sent after</span>
    <span class='doccomment'>/// binding the output object or if the output scale changes</span>
    <span class='doccomment'>/// later. If it is not sent, the client should assume a</span>
    <span class='doccomment'>/// scale of 1.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A scale larger than 1 means that the compositor will</span>
    <span class='doccomment'>/// automatically scale surface buffers by this amount</span>
    <span class='doccomment'>/// when rendering. This is used for very high resolution</span>
    <span class='doccomment'>/// displays where applications rendering at the native</span>
    <span class='doccomment'>/// resolution would be too small to be legible.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// It is intended that scaling aware clients track the</span>
    <span class='doccomment'>/// current output of a surface, and if it is on a scaled</span>
    <span class='doccomment'>/// output it should use wl_surface.set_buffer_scale with</span>
    <span class='doccomment'>/// the scale of the output. That way the compositor can</span>
    <span class='doccomment'>/// avoid scaling the surface, and the client can supply</span>
    <span class='doccomment'>/// a higher detail image.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Values: factor,</span>
    <span class='ident'>Scale</span>(<span class='ident'>i32</span>,),
}

<span class='kw'>fn</span> <span class='ident'>wl_output_implem</span>(<span class='ident'>proxy</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>, <span class='ident'>opcode</span>: <span class='ident'>u32</span>, <span class='ident'>args</span>: <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_argument</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WaylandProtocolEvent</span><span class='op'>&gt;</span> {
    <span class='kw'>let</span> <span class='ident'>event</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>opcode</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_3</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>3</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_4</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>4</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_4</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>wl_output_subpixel_from_raw</span>(<span class='ident'>arg_4</span> <span class='kw'>as</span> <span class='ident'>u32</span>) { <span class='prelude-val'>Some</span>(<span class='ident'>a</span>) <span class='op'>=&gt;</span> <span class='ident'>a</span>, <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='kw'>return</span> <span class='prelude-val'>None</span> };
            <span class='kw'>let</span> <span class='ident'>arg_5</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>String</span>::<span class='ident'>from_utf8_lossy</span>(<span class='ident'>CStr</span>::<span class='ident'>from_ptr</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>5</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_char</span>)).<span class='ident'>to_bytes</span>()).<span class='ident'>into_owned</span>()};
            <span class='kw'>let</span> <span class='ident'>arg_6</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='ident'>String</span>::<span class='ident'>from_utf8_lossy</span>(<span class='ident'>CStr</span>::<span class='ident'>from_ptr</span>(<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>6</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_char</span>)).<span class='ident'>to_bytes</span>()).<span class='ident'>into_owned</span>()};
            <span class='kw'>let</span> <span class='ident'>arg_7</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>7</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_7</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>wl_output_transform_from_raw</span>(<span class='ident'>arg_7</span> <span class='kw'>as</span> <span class='ident'>u32</span>) { <span class='prelude-val'>Some</span>(<span class='ident'>a</span>) <span class='op'>=&gt;</span> <span class='ident'>a</span>, <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='kw'>return</span> <span class='prelude-val'>None</span> };
            <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputEvent</span>::<span class='ident'>Geometry</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,<span class='ident'>arg_3</span>,<span class='ident'>arg_4</span>,<span class='ident'>arg_5</span>,<span class='ident'>arg_6</span>,<span class='ident'>arg_7</span>,))
        },
        <span class='number'>1</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>u32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>match</span> <span class='ident'>wl_output_mode_from_raw</span>(<span class='ident'>arg_0</span> <span class='kw'>as</span> <span class='ident'>u32</span>) { <span class='prelude-val'>Some</span>(<span class='ident'>a</span>) <span class='op'>=&gt;</span> <span class='ident'>a</span>, <span class='prelude-val'>None</span> <span class='op'>=&gt;</span> <span class='kw'>return</span> <span class='prelude-val'>None</span> };
            <span class='kw'>let</span> <span class='ident'>arg_1</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>1</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_2</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>2</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='kw'>let</span> <span class='ident'>arg_3</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>3</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputEvent</span>::<span class='ident'>Mode</span>(<span class='ident'>arg_0</span>,<span class='ident'>arg_1</span>,<span class='ident'>arg_2</span>,<span class='ident'>arg_3</span>,))
        },
        <span class='number'>2</span> <span class='op'>=&gt;</span> {
            <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputEvent</span>::<span class='ident'>Done</span>)
        },
        <span class='number'>3</span> <span class='op'>=&gt;</span> {
            <span class='kw'>let</span> <span class='ident'>arg_0</span> <span class='op'>=</span> <span class='kw'>unsafe</span> {<span class='op'>*</span>(<span class='ident'>args</span>.<span class='ident'>offset</span>(<span class='number'>0</span>) <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>i32</span>)};
            <span class='prelude-val'>Some</span>(<span class='ident'>WlOutputEvent</span>::<span class='ident'>Scale</span>(<span class='ident'>arg_0</span>,))
        },
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    };
    <span class='ident'>event</span>.<span class='ident'>map</span>(<span class='op'>|</span><span class='ident'>event</span><span class='op'>|</span> <span class='ident'>WaylandProtocolEvent</span>::<span class='ident'>WlOutput</span>(<span class='ident'>wrap_proxy</span>(<span class='ident'>proxy</span>), <span class='ident'>event</span>))
}

<span class='kw'>impl</span> <span class='ident'>WlOutput</span> {
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlOutput</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_region</span>
<span class='comment'>//</span>

<span class='doccomment'>/// region interface</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A region object describes an area.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Region objects are used to describe the opaque and input</span>
<span class='doccomment'>/// regions of a surface.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlRegion</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlRegion</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlRegion</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlRegion</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_region_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_region&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlRegion</span> {
        <span class='ident'>WlRegion</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlRegion</span> {
        <span class='ident'>WlRegion</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlRegion</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_region::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='comment'>// wl_region opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_REGION_DESTROY</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_REGION_ADD</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;
<span class='kw'>const</span> <span class='ident'>WL_REGION_SUBTRACT</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>2</span>;

<span class='kw'>impl</span> <span class='ident'>WlRegion</span> {

    <span class='doccomment'>/// destroy region</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Destroy the region.  This will invalidate the object ID.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>destroy</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_REGION_DESTROY</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }

    <span class='doccomment'>/// add rectangle to region</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Add the specified rectangle to the region.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>add</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>x</span>: <span class='ident'>i32</span>, <span class='ident'>y</span>: <span class='ident'>i32</span>, <span class='ident'>width</span>: <span class='ident'>i32</span>, <span class='ident'>height</span>: <span class='ident'>i32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_REGION_ADD</span>
           , <span class='ident'>x</span>, <span class='ident'>y</span>, <span class='ident'>width</span>, <span class='ident'>height</span>) };
    }

    <span class='doccomment'>/// subtract rectangle from region</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Subtract the specified rectangle from the region.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>subtract</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>x</span>: <span class='ident'>i32</span>, <span class='ident'>y</span>: <span class='ident'>i32</span>, <span class='ident'>width</span>: <span class='ident'>i32</span>, <span class='ident'>height</span>: <span class='ident'>i32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_REGION_SUBTRACT</span>
           , <span class='ident'>x</span>, <span class='ident'>y</span>, <span class='ident'>width</span>, <span class='ident'>height</span>) };
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlRegion</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_subcompositor</span>
<span class='comment'>//</span>

<span class='doccomment'>/// sub-surface compositing</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The global interface exposing sub-surface compositing capabilities.</span>
<span class='doccomment'>/// A wl_surface, that has sub-surfaces associated, is called the</span>
<span class='doccomment'>/// parent surface. Sub-surfaces can be arbitrarily nested and create</span>
<span class='doccomment'>/// a tree of sub-surfaces.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The root surface in a tree of sub-surfaces is the main</span>
<span class='doccomment'>/// surface. The main surface cannot be a sub-surface, because</span>
<span class='doccomment'>/// sub-surfaces must always have a parent.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A main surface with its sub-surfaces forms a (compound) window.</span>
<span class='doccomment'>/// For window management purposes, this set of wl_surface objects is</span>
<span class='doccomment'>/// to be considered as a single window, and it should also behave as</span>
<span class='doccomment'>/// such.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The aim of sub-surfaces is to offload some of the compositing work</span>
<span class='doccomment'>/// within a window from clients to the compositor. A prime example is</span>
<span class='doccomment'>/// a video player with decorations and video in separate wl_surface</span>
<span class='doccomment'>/// objects. This should allow the compositor to pass YUV video buffer</span>
<span class='doccomment'>/// processing to dedicated overlay hardware when possible.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlSubcompositor</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlSubcompositor</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlSubcompositor</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlSubcompositor</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_subcompositor_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_subcompositor&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlSubcompositor</span> {
        <span class='ident'>WlSubcompositor</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlSubcompositor</span> {
        <span class='ident'>WlSubcompositor</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlSubcompositor</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_subcompositor::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlSubcompositorError</span> {
    <span class='doccomment'>/// the to-be sub-surface is invalid</span>
    <span class='ident'>BadSurface</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='attribute'>#[<span class='ident'>doc</span>(<span class='ident'>hidden</span>)]</span>
    <span class='ident'>__not_univariant</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_subcompositor_error_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlSubcompositorError</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlSubcompositorError</span>::<span class='ident'>BadSurface</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='comment'>// wl_subcompositor opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_SUBCOMPOSITOR_DESTROY</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_SUBCOMPOSITOR_GET_SUBSURFACE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;

<span class='kw'>impl</span> <span class='ident'>WlSubcompositor</span> {

    <span class='doccomment'>/// unbind from the subcompositor interface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Informs the server that the client will not be using this</span>
    <span class='doccomment'>/// protocol object anymore. This does not affect any other</span>
    <span class='doccomment'>/// objects, wl_subsurface objects included.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>destroy</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SUBCOMPOSITOR_DESTROY</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }

    <span class='doccomment'>/// give a surface the role sub-surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Create a sub-surface interface for the given surface, and</span>
    <span class='doccomment'>/// associate it with the given parent surface. This turns a</span>
    <span class='doccomment'>/// plain wl_surface into a sub-surface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The to-be sub-surface must not already have another role, and it</span>
    <span class='doccomment'>/// must not have an existing wl_subsurface object. Otherwise a protocol</span>
    <span class='doccomment'>/// error is raised.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>get_subsurface</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>surface</span>: <span class='kw-2'>&amp;</span><span class='ident'>WlSurface</span>, <span class='ident'>parent</span>: <span class='kw-2'>&amp;</span><span class='ident'>WlSurface</span>,) <span class='op'>-&gt;</span> <span class='ident'>WlSubsurface</span> {
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal_constructor</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SUBCOMPOSITOR_GET_SUBSURFACE</span>, <span class='kw-2'>&amp;</span><span class='ident'>wl_subsurface_interface</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>wl_interface</span>
           , <span class='ident'>ptr</span>::<span class='ident'>null_mut</span>::<span class='op'>&lt;</span><span class='ident'>wl_proxy</span><span class='op'>&gt;</span>(), <span class='ident'>surface</span>.<span class='ident'>ptr</span>(), <span class='ident'>parent</span>.<span class='ident'>ptr</span>()) };
        <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>proxy</span>: <span class='ident'>WlSubsurface</span> <span class='op'>=</span> <span class='kw'>unsafe</span> { <span class='ident'>Proxy</span>::<span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>) };
        <span class='kw'>let</span> <span class='ident'>evt_iter</span> <span class='op'>=</span> <span class='ident'>eventiter_from_internals</span>(<span class='self'>self</span>.<span class='ident'>evq</span>.<span class='ident'>clone</span>());
        <span class='ident'>proxy</span>.<span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='ident'>evt_iter</span>);
        ::<span class='ident'>std</span>::<span class='ident'>mem</span>::<span class='ident'>forget</span>(<span class='ident'>evt_iter</span>); <span class='comment'>// Don&#39;t run the destructor !</span>
        <span class='ident'>proxy</span>
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlSubcompositor</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
<span class='comment'>//</span>
<span class='comment'>// interface wl_subsurface</span>
<span class='comment'>//</span>

<span class='doccomment'>/// sub-surface interface to a wl_surface</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// An additional interface to a wl_surface object, which has been</span>
<span class='doccomment'>/// made a sub-surface. A sub-surface has one parent surface. A</span>
<span class='doccomment'>/// sub-surface&#39;s size and position are not limited to that of the parent.</span>
<span class='doccomment'>/// Particularly, a sub-surface is not automatically clipped to its</span>
<span class='doccomment'>/// parent&#39;s area.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// A sub-surface becomes mapped, when a non-NULL wl_buffer is applied</span>
<span class='doccomment'>/// and the parent surface is mapped. The order of which one happens</span>
<span class='doccomment'>/// first is irrelevant. A sub-surface is hidden if the parent becomes</span>
<span class='doccomment'>/// hidden, or if a NULL wl_buffer is applied. These rules apply</span>
<span class='doccomment'>/// recursively through the tree of surfaces.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The behaviour of wl_surface.commit request on a sub-surface</span>
<span class='doccomment'>/// depends on the sub-surface&#39;s mode. The possible modes are</span>
<span class='doccomment'>/// synchronized and desynchronized, see methods</span>
<span class='doccomment'>/// wl_subsurface.set_sync and wl_subsurface.set_desync. Synchronized</span>
<span class='doccomment'>/// mode caches the wl_surface state to be applied when the parent&#39;s</span>
<span class='doccomment'>/// state gets applied, and desynchronized mode applies the pending</span>
<span class='doccomment'>/// wl_surface state directly. A sub-surface is initially in the</span>
<span class='doccomment'>/// synchronized mode.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Sub-surfaces have also other kind of state, which is managed by</span>
<span class='doccomment'>/// wl_subsurface requests, as opposed to wl_surface requests. This</span>
<span class='doccomment'>/// state includes the sub-surface position relative to the parent</span>
<span class='doccomment'>/// surface (wl_subsurface.set_position), and the stacking order of</span>
<span class='doccomment'>/// the parent and its sub-surfaces (wl_subsurface.place_above and</span>
<span class='doccomment'>/// .place_below). This state is applied when the parent surface&#39;s</span>
<span class='doccomment'>/// wl_surface state is applied, regardless of the sub-surface&#39;s mode.</span>
<span class='doccomment'>/// As the exception, set_sync and set_desync are effective immediately.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// The main surface can be thought to be always in desynchronized mode,</span>
<span class='doccomment'>/// since it does not have a parent in the sub-surfaces sense.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// Even if a sub-surface is in desynchronized mode, it will behave as</span>
<span class='doccomment'>/// in synchronized mode, if its parent surface behaves as in</span>
<span class='doccomment'>/// synchronized mode. This rule is applied recursively throughout the</span>
<span class='doccomment'>/// tree of surfaces. This means, that one can set a sub-surface into</span>
<span class='doccomment'>/// synchronized mode, and then assume that all its child and grand-child</span>
<span class='doccomment'>/// sub-surfaces are synchronized, too, without explicitly setting them.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// If the wl_surface associated with the wl_subsurface is destroyed, the</span>
<span class='doccomment'>/// wl_subsurface object becomes inert. Note, that destroying either object</span>
<span class='doccomment'>/// takes effect immediately. If you need to synchronize the removal</span>
<span class='doccomment'>/// of a sub-surface to the parent surface update, unmap the sub-surface</span>
<span class='doccomment'>/// first by attaching a NULL wl_buffer, update parent, and then destroy</span>
<span class='doccomment'>/// the sub-surface.</span>
<span class='doccomment'>///</span>
<span class='doccomment'>/// If the parent wl_surface object is destroyed, the sub-surface is</span>
<span class='doccomment'>/// unmapped.</span>
<span class='kw'>pub</span> <span class='kw'>struct</span> <span class='ident'>WlSubsurface</span> {
    <span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>,
    <span class='ident'>evq</span>: <span class='ident'>Arc</span><span class='op'>&lt;</span>(<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>)<span class='op'>&gt;</span>
}

<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Sync</span> <span class='kw'>for</span> <span class='ident'>WlSubsurface</span> {}
<span class='kw'>unsafe</span> <span class='kw'>impl</span> <span class='ident'>Send</span> <span class='kw'>for</span> <span class='ident'>WlSubsurface</span> {}
<span class='kw'>impl</span> <span class='ident'>Proxy</span> <span class='kw'>for</span> <span class='ident'>WlSubsurface</span> {
    <span class='kw'>fn</span> <span class='ident'>ptr</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span> { <span class='self'>self</span>.<span class='ident'>ptr</span> }
    <span class='kw'>fn</span> <span class='ident'>interface</span>() <span class='op'>-&gt;</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> { <span class='kw'>unsafe</span> { <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>wl_subsurface_interface</span>  <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_interface</span> } }
    <span class='kw'>fn</span> <span class='ident'>interface_name</span>() <span class='op'>-&gt;</span> <span class='kw-2'>&amp;</span><span class='lifetime'>&#39;static</span> <span class='ident'>str</span> { <span class='string'>&quot;wl_subsurface&quot;</span> }
    <span class='kw'>fn</span> <span class='ident'>version</span>() <span class='op'>-&gt;</span> <span class='ident'>u32</span> { <span class='number'>1</span> }
    <span class='kw'>fn</span> <span class='ident'>id</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>) <span class='op'>-&gt;</span> <span class='ident'>ProxyId</span> { <span class='ident'>ProxyId</span> { <span class='ident'>id</span>: <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span> } }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlSubsurface</span> {
        <span class='ident'>WlSubsurface</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>unsafe</span> <span class='kw'>fn</span> <span class='ident'>from_ptr_no_own</span>(<span class='ident'>ptr</span>: <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>wl_proxy</span>) <span class='op'>-&gt;</span> <span class='ident'>WlSubsurface</span> {
        <span class='ident'>WlSubsurface</span> { <span class='ident'>ptr</span>: <span class='ident'>ptr</span>, <span class='ident'>evq</span>: <span class='ident'>Arc</span>::<span class='ident'>new</span>((<span class='ident'>EventFifo</span>::<span class='ident'>new</span>(), <span class='ident'>AtomicBool</span>::<span class='ident'>new</span>(<span class='bool-val'>false</span>))) }
    }
    <span class='kw'>fn</span> <span class='ident'>set_evt_iterator</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>, <span class='ident'>evt</span>: <span class='kw-2'>&amp;</span><span class='ident'>EventIterator</span>) {
        <span class='self'>self</span>.<span class='ident'>evq</span> <span class='op'>=</span> <span class='ident'>get_eventiter_internals</span>(<span class='ident'>evt</span>);
        <span class='kw'>let</span> <span class='ident'>ptr</span> <span class='op'>=</span> <span class='kw-2'>&amp;</span><span class='op'>*</span><span class='self'>self</span>.<span class='ident'>evq</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> (<span class='ident'>EventFifo</span>,<span class='ident'>AtomicBool</span>);
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_set_user_data</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>, <span class='ident'>ptr</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw'>const</span> <span class='ident'>c_void</span> <span class='kw'>as</span> <span class='op'>*</span><span class='kw-2'>mut</span> <span class='ident'>c_void</span>) };
    }
}

<span class='kw'>impl</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Debug</span> <span class='kw'>for</span> <span class='ident'>WlSubsurface</span> {
    <span class='kw'>fn</span> <span class='ident'>fmt</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>fmt</span>: <span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Formatter</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Result</span><span class='op'>&lt;</span>(), ::<span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Error</span><span class='op'>&gt;</span> {
        <span class='ident'>fmt</span>.<span class='ident'>write_fmt</span>(<span class='macro'>format_args</span><span class='macro'>!</span>(<span class='string'>&quot;wayland::wl_subsurface::{}&quot;</span>, <span class='self'>self</span>.<span class='ident'>ptr</span> <span class='kw'>as</span> <span class='ident'>usize</span>))
    }
}

<span class='attribute'>#[<span class='ident'>repr</span>(<span class='ident'>u32</span>)]</span>
<span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>)]</span>
<span class='kw'>pub</span> <span class='kw'>enum</span> <span class='ident'>WlSubsurfaceError</span> {
    <span class='doccomment'>/// wl_surface is not a sibling or the parent</span>
    <span class='ident'>BadSurface</span> <span class='op'>=</span> <span class='number'>0</span>,
    <span class='attribute'>#[<span class='ident'>doc</span>(<span class='ident'>hidden</span>)]</span>
    <span class='ident'>__not_univariant</span>,
}
<span class='kw'>fn</span> <span class='ident'>wl_subsurface_error_from_raw</span>(<span class='ident'>n</span>: <span class='ident'>u32</span>) <span class='op'>-&gt;</span> <span class='prelude-ty'>Option</span><span class='op'>&lt;</span><span class='ident'>WlSubsurfaceError</span><span class='op'>&gt;</span> {
    <span class='kw'>match</span> <span class='ident'>n</span> {
        <span class='number'>0</span> <span class='op'>=&gt;</span> <span class='prelude-val'>Some</span>(<span class='ident'>WlSubsurfaceError</span>::<span class='ident'>BadSurface</span>),
        _ <span class='op'>=&gt;</span> <span class='prelude-val'>None</span>
    }
}

<span class='comment'>// wl_subsurface opcodes</span>
<span class='kw'>const</span> <span class='ident'>WL_SUBSURFACE_DESTROY</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>0</span>;
<span class='kw'>const</span> <span class='ident'>WL_SUBSURFACE_SET_POSITION</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>1</span>;
<span class='kw'>const</span> <span class='ident'>WL_SUBSURFACE_PLACE_ABOVE</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>2</span>;
<span class='kw'>const</span> <span class='ident'>WL_SUBSURFACE_PLACE_BELOW</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>3</span>;
<span class='kw'>const</span> <span class='ident'>WL_SUBSURFACE_SET_SYNC</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>4</span>;
<span class='kw'>const</span> <span class='ident'>WL_SUBSURFACE_SET_DESYNC</span>: <span class='ident'>u32</span> <span class='op'>=</span> <span class='number'>5</span>;

<span class='kw'>impl</span> <span class='ident'>WlSubsurface</span> {

    <span class='doccomment'>/// remove sub-surface interface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The sub-surface interface is removed from the wl_surface object</span>
    <span class='doccomment'>/// that was turned into a sub-surface with</span>
    <span class='doccomment'>/// wl_subcompositor.get_subsurface request. The wl_surface&#39;s association</span>
    <span class='doccomment'>/// to the parent is deleted, and the wl_surface loses its role as</span>
    <span class='doccomment'>/// a sub-surface. The wl_surface is unmapped.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>destroy</span>(<span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SUBSURFACE_DESTROY</span>
           ) };
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }

    <span class='doccomment'>/// reposition the sub-surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This schedules a sub-surface position change.</span>
    <span class='doccomment'>/// The sub-surface will be moved so, that its origin (top-left</span>
    <span class='doccomment'>/// corner pixel) will be at the location x, y of the parent surface</span>
    <span class='doccomment'>/// coordinate system. The coordinates are not restricted to the parent</span>
    <span class='doccomment'>/// surface area. Negative values are allowed.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The scheduled coordinates will take effect whenever the state of the</span>
    <span class='doccomment'>/// parent surface is applied. When this happens depends on whether the</span>
    <span class='doccomment'>/// parent surface is in synchronized mode or not. See</span>
    <span class='doccomment'>/// wl_subsurface.set_sync and wl_subsurface.set_desync for details.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// If more than one set_position request is invoked by the client before</span>
    <span class='doccomment'>/// the commit of the parent surface, the position of a new request always</span>
    <span class='doccomment'>/// replaces the scheduled position from any previous request.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The initial position is 0, 0.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_position</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>x</span>: <span class='ident'>i32</span>, <span class='ident'>y</span>: <span class='ident'>i32</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SUBSURFACE_SET_POSITION</span>
           , <span class='ident'>x</span>, <span class='ident'>y</span>) };
    }

    <span class='doccomment'>/// restack the sub-surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// This sub-surface is taken from the stack, and put back just</span>
    <span class='doccomment'>/// above the reference surface, changing the z-order of the sub-surfaces.</span>
    <span class='doccomment'>/// The reference surface must be one of the sibling surfaces, or the</span>
    <span class='doccomment'>/// parent surface. Using any other surface, including this sub-surface,</span>
    <span class='doccomment'>/// will cause a protocol error.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The z-order is double-buffered. Requests are handled in order and</span>
    <span class='doccomment'>/// applied immediately to a pending state. The final pending state is</span>
    <span class='doccomment'>/// copied to the active state the next time the state of the parent</span>
    <span class='doccomment'>/// surface is applied. When this happens depends on whether the parent</span>
    <span class='doccomment'>/// surface is in synchronized mode or not. See wl_subsurface.set_sync and</span>
    <span class='doccomment'>/// wl_subsurface.set_desync for details.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// A new sub-surface is initially added as the top-most in the stack</span>
    <span class='doccomment'>/// of its siblings and parent.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>place_above</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>sibling</span>: <span class='kw-2'>&amp;</span><span class='ident'>WlSurface</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SUBSURFACE_PLACE_ABOVE</span>
           , <span class='ident'>sibling</span>.<span class='ident'>ptr</span>()) };
    }

    <span class='doccomment'>/// restack the sub-surface</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// The sub-surface is placed just below of the reference surface.</span>
    <span class='doccomment'>/// See wl_subsurface.place_above.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>place_below</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>, <span class='ident'>sibling</span>: <span class='kw-2'>&amp;</span><span class='ident'>WlSurface</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SUBSURFACE_PLACE_BELOW</span>
           , <span class='ident'>sibling</span>.<span class='ident'>ptr</span>()) };
    }

    <span class='doccomment'>/// set sub-surface to synchronized mode</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Change the commit behaviour of the sub-surface to synchronized</span>
    <span class='doccomment'>/// mode, also described as the parent dependent mode.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// In synchronized mode, wl_surface.commit on a sub-surface will</span>
    <span class='doccomment'>/// accumulate the committed state in a cache, but the state will</span>
    <span class='doccomment'>/// not be applied and hence will not change the compositor output.</span>
    <span class='doccomment'>/// The cached state is applied to the sub-surface immediately after</span>
    <span class='doccomment'>/// the parent surface&#39;s state is applied. This ensures atomic</span>
    <span class='doccomment'>/// updates of the parent and all its synchronized sub-surfaces.</span>
    <span class='doccomment'>/// Applying the cached state will invalidate the cache, so further</span>
    <span class='doccomment'>/// parent surface commits do not (re-)apply old state.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// See wl_subsurface for the recursive effect of this mode.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_sync</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SUBSURFACE_SET_SYNC</span>
           ) };
    }

    <span class='doccomment'>/// set sub-surface to desynchronized mode</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Change the commit behaviour of the sub-surface to desynchronized</span>
    <span class='doccomment'>/// mode, also described as independent or freely running mode.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// In desynchronized mode, wl_surface.commit on a sub-surface will</span>
    <span class='doccomment'>/// apply the pending state directly, without caching, as happens</span>
    <span class='doccomment'>/// normally with a wl_surface. Calling wl_surface.commit on the</span>
    <span class='doccomment'>/// parent surface has no effect on the sub-surface&#39;s wl_surface</span>
    <span class='doccomment'>/// state. This mode allows a sub-surface to be updated on its own.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// If cached state exists when wl_surface.commit is called in</span>
    <span class='doccomment'>/// desynchronized mode, the pending state is added to the cached</span>
    <span class='doccomment'>/// state, and applied as whole. This invalidates the cache.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// Note: even if a sub-surface is set to desynchronized, a parent</span>
    <span class='doccomment'>/// sub-surface may override it to behave as synchronized. For details,</span>
    <span class='doccomment'>/// see wl_subsurface.</span>
    <span class='doccomment'>///</span>
    <span class='doccomment'>/// If a surface&#39;s parent surface behaves as desynchronized, then</span>
    <span class='doccomment'>/// the cached state is applied on set_desync.</span>
    <span class='kw'>pub</span> <span class='kw'>fn</span> <span class='ident'>set_desync</span>(<span class='kw-2'>&amp;</span><span class='self'>self</span>,) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_marshal</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>(), <span class='ident'>WL_SUBSURFACE_SET_DESYNC</span>
           ) };
    }
}

<span class='kw'>impl</span> <span class='ident'>Drop</span> <span class='kw'>for</span> <span class='ident'>WlSubsurface</span> {
    <span class='kw'>fn</span> <span class='ident'>drop</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='self'>self</span>) {
        <span class='kw'>unsafe</span> { <span class='macro'>ffi_dispatch</span><span class='macro'>!</span>(<span class='ident'>WAYLAND_CLIENT_HANDLE</span>, <span class='ident'>wl_proxy_destroy</span>, <span class='self'>self</span>.<span class='ident'>ptr</span>()) }
    }
}
</pre>
</section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../../../../../../../../../../../";
        window.currentCrate = "wayland_client";
        window.playgroundUrl = "";
    </script>
    <script src="../../../../../../../../../../../../jquery.js"></script>
    <script src="../../../../../../../../../../../../main.js"></script>
    
    <script defer src="../../../../../../../../../../../../search-index.js"></script>
</body>
</html>